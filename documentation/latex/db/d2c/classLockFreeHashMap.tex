\doxysection{Lock\+Free\+Hash\+Map\texorpdfstring{$<$}{<} Key, Value \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{classLockFreeHashMap}{}\label{classLockFreeHashMap}\index{LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}}


{\ttfamily \#include $<$Lock\+Free\+Hash\+Map.\+h$>$}



Inheritance diagram for Lock\+Free\+Hash\+Map\texorpdfstring{$<$}{<} Key, Value \texorpdfstring{$>$}{>}\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=211pt]{d9/d44/classLockFreeHashMap__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Lock\+Free\+Hash\+Map\texorpdfstring{$<$}{<} Key, Value \texorpdfstring{$>$}{>}\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=211pt]{d5/dfe/classLockFreeHashMap__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structLockFreeHashMap_1_1Iterator}{Iterator}}
\begin{DoxyCompactList}\small\item\em Non-\/const iterator. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classLockFreeHashMap_1_1KeyValue}{Key\+Value}}
\begin{DoxyCompactList}\small\item\em A key / value pair that is inserted in the map. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classLockFreeHashMap_a638496ae9d7758bfb0f12b6e477647dc}\label{classLockFreeHashMap_a638496ae9d7758bfb0f12b6e477647dc} 
using {\bfseries Map\+Type} = \mbox{\hyperlink{classLockFreeHashMap}{Lock\+Free\+Hash\+Map}}$<$ Key, Value $>$
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classLockFreeHashMap_a99cc8576eb24e276e64a720f51516d62}\label{classLockFreeHashMap_a99cc8576eb24e276e64a720f51516d62} 
{\bfseries Lock\+Free\+Hash\+Map} (\mbox{\hyperlink{classLFHMAllocator}{LFHMAllocator}} \&in\+Allocator)
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classLockFreeHashMap_a64add1094aa66c55413b2488e8ae8d16}{Init}} (uint32 in\+Max\+Buckets)
\item 
void \mbox{\hyperlink{classLockFreeHashMap_afe0dc35025cb64372c9aef71ee997a0d}{Clear}} ()
\item 
\Hypertarget{classLockFreeHashMap_ab0b1ca4bac3c00813a024ed4b462e44d}\label{classLockFreeHashMap_ab0b1ca4bac3c00813a024ed4b462e44d} 
uint32 {\bfseries Get\+Num\+Buckets} () const
\begin{DoxyCompactList}\small\item\em Get the current amount of buckets that the map is using. \end{DoxyCompactList}\item 
\Hypertarget{classLockFreeHashMap_a99097bb01c8c980e4fe1be3bc63c8415}\label{classLockFreeHashMap_a99097bb01c8c980e4fe1be3bc63c8415} 
uint32 {\bfseries Get\+Max\+Buckets} () const
\begin{DoxyCompactList}\small\item\em Get the maximum amount of buckets that this map supports. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classLockFreeHashMap_a7c6ead3c7440e19213eac4119236964d}{Set\+Num\+Buckets}} (uint32 in\+Num\+Buckets)
\item 
{\footnotesize template$<$class... Params$>$ }\\\mbox{\hyperlink{classLockFreeHashMap_1_1KeyValue}{Key\+Value}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classLockFreeHashMap_a9a758f6a4dbf7bb4e25bac764a948266}{Create}} (\mbox{\hyperlink{classLFHMAllocatorContext}{LFHMAllocator\+Context}} \&io\+Context, const Key \&in\+Key, uint64 in\+Key\+Hash, int in\+Extra\+Bytes, Params \&\&... in\+Constructor\+Params)
\item 
\Hypertarget{classLockFreeHashMap_abf0f1e866eba5975400db74cc3da6913}\label{classLockFreeHashMap_abf0f1e866eba5975400db74cc3da6913} 
const \mbox{\hyperlink{classLockFreeHashMap_1_1KeyValue}{Key\+Value}} \texorpdfstring{$\ast$}{*} {\bfseries Find} (const Key \&in\+Key, uint64 in\+Key\+Hash) const
\begin{DoxyCompactList}\small\item\em Find an element, returns null if not found. \end{DoxyCompactList}\item 
\Hypertarget{classLockFreeHashMap_ae1a2bd3a51575e8353470750d0ea9f4b}\label{classLockFreeHashMap_ae1a2bd3a51575e8353470750d0ea9f4b} 
uint32 {\bfseries To\+Handle} (const \mbox{\hyperlink{classLockFreeHashMap_1_1KeyValue}{Key\+Value}} \texorpdfstring{$\ast$}{*}in\+Key\+Value) const
\begin{DoxyCompactList}\small\item\em Get convert key value pair to uint32 handle. \end{DoxyCompactList}\item 
\Hypertarget{classLockFreeHashMap_a0705a68e432c61be72d5f6fdfffb2d85}\label{classLockFreeHashMap_a0705a68e432c61be72d5f6fdfffb2d85} 
const \mbox{\hyperlink{classLockFreeHashMap_1_1KeyValue}{Key\+Value}} \texorpdfstring{$\ast$}{*} {\bfseries From\+Handle} (uint32 in\+Handle) const
\begin{DoxyCompactList}\small\item\em Convert uint32 handle back to key and value. \end{DoxyCompactList}\item 
\Hypertarget{classLockFreeHashMap_a483d330f8722f8ad6f6398b1d4d81653}\label{classLockFreeHashMap_a483d330f8722f8ad6f6398b1d4d81653} 
void {\bfseries Get\+All\+Key\+Values} (Array$<$ const \mbox{\hyperlink{classLockFreeHashMap_1_1KeyValue}{Key\+Value}} \texorpdfstring{$\ast$}{*} $>$ \&out\+All) const
\begin{DoxyCompactList}\small\item\em Get all key/value pairs. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structLockFreeHashMap_1_1Iterator}{Iterator}} \mbox{\hyperlink{classLockFreeHashMap_a0ecc7b5f560d02210a707b1099f8b99e}{begin}} ()
\item 
\Hypertarget{classLockFreeHashMap_af90c81d993eb139aded4c89bff98998d}\label{classLockFreeHashMap_af90c81d993eb139aded4c89bff98998d} 
\mbox{\hyperlink{structLockFreeHashMap_1_1Iterator}{Iterator}} {\bfseries end} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classNonCopyable}{Non\+Copyable}}}
\begin{DoxyCompactItemize}
\item 
{\bfseries Non\+Copyable} (const \mbox{\hyperlink{classNonCopyable}{Non\+Copyable}} \&)=delete
\item 
void {\bfseries operator=} (const \mbox{\hyperlink{classNonCopyable}{Non\+Copyable}} \&)=delete
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classLockFreeHashMap_afba2f355a6948c3c97ed5183c0b704e9}\label{classLockFreeHashMap_afba2f355a6948c3c97ed5183c0b704e9} 
static const uint32 {\bfseries c\+Invalid\+Handle} = uint32(-\/1)
\begin{DoxyCompactList}\small\item\em Value of an invalid handle. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$class Key, class Value$>$\newline
class Lock\+Free\+Hash\+Map$<$ Key, Value $>$}
Very simple lock free hash map that only allows insertion, retrieval and provides a fixed amount of buckets and fixed storage. Note\+: This class currently assumes key and value are simple types that need no calls to the destructor. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classLockFreeHashMap_a0ecc7b5f560d02210a707b1099f8b99e}\label{classLockFreeHashMap_a0ecc7b5f560d02210a707b1099f8b99e} 
\index{LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}!begin@{begin}}
\index{begin@{begin}!LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}}
\doxysubsubsection{\texorpdfstring{begin()}{begin()}}
{\footnotesize\ttfamily template$<$class Key , class Value $>$ \\
\mbox{\hyperlink{classLockFreeHashMap}{Lock\+Free\+Hash\+Map}}$<$ Key, Value $>$\+::\+Iterator \mbox{\hyperlink{classLockFreeHashMap}{Lock\+Free\+Hash\+Map}}$<$ Key, Value $>$\+::begin (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Iterate over the map, note that it is not safe to do this in parallel to \doxylink{classLockFreeHashMap_afe0dc35025cb64372c9aef71ee997a0d}{Clear()}. It is safe to do this while adding elements to the map, but newly added elements may or may not be returned by the iterator. \Hypertarget{classLockFreeHashMap_afe0dc35025cb64372c9aef71ee997a0d}\label{classLockFreeHashMap_afe0dc35025cb64372c9aef71ee997a0d} 
\index{LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}!Clear@{Clear}}
\index{Clear@{Clear}!LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}}
\doxysubsubsection{\texorpdfstring{Clear()}{Clear()}}
{\footnotesize\ttfamily template$<$class Key , class Value $>$ \\
void \mbox{\hyperlink{classLockFreeHashMap}{Lock\+Free\+Hash\+Map}}$<$ Key, Value $>$\+::\+Clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Remove all elements. Note that this cannot happen simultaneously with adding new elements. \Hypertarget{classLockFreeHashMap_a9a758f6a4dbf7bb4e25bac764a948266}\label{classLockFreeHashMap_a9a758f6a4dbf7bb4e25bac764a948266} 
\index{LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}!Create@{Create}}
\index{Create@{Create}!LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}}
\doxysubsubsection{\texorpdfstring{Create()}{Create()}}
{\footnotesize\ttfamily template$<$class Key , class Value $>$ \\
template$<$class... Params$>$ \\
\mbox{\hyperlink{classLockFreeHashMap}{Lock\+Free\+Hash\+Map}}$<$ Key, Value $>$\+::\+Key\+Value \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classLockFreeHashMap}{Lock\+Free\+Hash\+Map}}$<$ Key, Value $>$\+::\+Create (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classLFHMAllocatorContext}{LFHMAllocator\+Context}} \&}]{io\+Context,  }\item[{const Key \&}]{in\+Key,  }\item[{uint64}]{in\+Key\+Hash,  }\item[{int}]{in\+Extra\+Bytes,  }\item[{Params \&\&...}]{in\+Constructor\+Params }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Insert a new element, returns null if map full. Multiple threads can be inserting in the map at the same time. \Hypertarget{classLockFreeHashMap_a64add1094aa66c55413b2488e8ae8d16}\label{classLockFreeHashMap_a64add1094aa66c55413b2488e8ae8d16} 
\index{LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}!Init@{Init}}
\index{Init@{Init}!LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}}
\doxysubsubsection{\texorpdfstring{Init()}{Init()}}
{\footnotesize\ttfamily template$<$class Key , class Value $>$ \\
void \mbox{\hyperlink{classLockFreeHashMap}{Lock\+Free\+Hash\+Map}}$<$ Key, Value $>$\+::\+Init (\begin{DoxyParamCaption}\item[{uint32}]{in\+Max\+Buckets }\end{DoxyParamCaption})}

Initialization 
\begin{DoxyParams}{Parameters}
{\em in\+Max\+Buckets} & Max amount of buckets to use in the hashmap. Must be power of 2. \\
\hline
\end{DoxyParams}
\Hypertarget{classLockFreeHashMap_a7c6ead3c7440e19213eac4119236964d}\label{classLockFreeHashMap_a7c6ead3c7440e19213eac4119236964d} 
\index{LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}!SetNumBuckets@{SetNumBuckets}}
\index{SetNumBuckets@{SetNumBuckets}!LockFreeHashMap$<$ Key, Value $>$@{LockFreeHashMap$<$ Key, Value $>$}}
\doxysubsubsection{\texorpdfstring{SetNumBuckets()}{SetNumBuckets()}}
{\footnotesize\ttfamily template$<$class Key , class Value $>$ \\
void \mbox{\hyperlink{classLockFreeHashMap}{Lock\+Free\+Hash\+Map}}$<$ Key, Value $>$\+::\+Set\+Num\+Buckets (\begin{DoxyParamCaption}\item[{uint32}]{in\+Num\+Buckets }\end{DoxyParamCaption})}

Update the number of buckets. This must be done after clearing the map and cannot be done concurrently with any other operations on the map. Note that the number of buckets can never become bigger than the specified max buckets during initialization and that it must be a power of 2. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
includes/jolt/\+Core/Lock\+Free\+Hash\+Map.\+h\item 
includes/jolt/\+Core/Lock\+Free\+Hash\+Map.\+inl\end{DoxyCompactItemize}
