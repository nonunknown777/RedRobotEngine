\doxysection{Narrow\+Phase\+Query Class Reference}
\hypertarget{classNarrowPhaseQuery}{}\label{classNarrowPhaseQuery}\index{NarrowPhaseQuery@{NarrowPhaseQuery}}


{\ttfamily \#include $<$Narrow\+Phase\+Query.\+h$>$}



Inheritance diagram for Narrow\+Phase\+Query\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{df/d43/classNarrowPhaseQuery__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Narrow\+Phase\+Query\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=237pt]{d2/d66/classNarrowPhaseQuery__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classNarrowPhaseQuery_a85be5810a9b3d96dcb527767f499c852}\label{classNarrowPhaseQuery_a85be5810a9b3d96dcb527767f499c852} 
void {\bfseries Init} (\mbox{\hyperlink{classBodyLockInterface}{Body\+Lock\+Interface}} \&in\+Body\+Lock\+Interface, \mbox{\hyperlink{classBroadPhaseQuery}{Broad\+Phase\+Query}} \&in\+Broad\+Phase\+Query)
\begin{DoxyCompactList}\small\item\em Initialize the interface (should only be called by \doxylink{classPhysicsSystem}{Physics\+System}) \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classNarrowPhaseQuery_a57dbce38dfc79303abacb33d0373ba46}{Cast\+Ray}} (const \mbox{\hyperlink{structRRayCast}{RRay\+Cast}} \&in\+Ray, \mbox{\hyperlink{classRayCastResult}{Ray\+Cast\+Result}} \&io\+Hit, const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&in\+Broad\+Phase\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&in\+Object\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&in\+Body\+Filter=\{ \}) const
\item 
void \mbox{\hyperlink{classNarrowPhaseQuery_a6ef59f16467096fbb0ab9f476e15c8f3}{Cast\+Ray}} (const \mbox{\hyperlink{structRRayCast}{RRay\+Cast}} \&in\+Ray, const \mbox{\hyperlink{classRayCastSettings}{Ray\+Cast\+Settings}} \&in\+Ray\+Cast\+Settings, \mbox{\hyperlink{classCollisionCollector}{Cast\+Ray\+Collector}} \&io\+Collector, const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&in\+Broad\+Phase\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&in\+Object\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&in\+Body\+Filter=\{ \}, const \mbox{\hyperlink{classShapeFilter}{Shape\+Filter}} \&in\+Shape\+Filter=\{ \}) const
\item 
void \mbox{\hyperlink{classNarrowPhaseQuery_afcfabe1320517d1bdc956cded95f0f8a}{Collide\+Point}} (\mbox{\hyperlink{classVec3}{RVec3\+Arg}} in\+Point, \mbox{\hyperlink{classCollisionCollector}{Collide\+Point\+Collector}} \&io\+Collector, const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&in\+Broad\+Phase\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&in\+Object\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&in\+Body\+Filter=\{ \}, const \mbox{\hyperlink{classShapeFilter}{Shape\+Filter}} \&in\+Shape\+Filter=\{ \}) const
\item 
void \mbox{\hyperlink{classNarrowPhaseQuery_a6874ff06a6884c2706a1bbf8ed2590a8}{Collide\+Shape}} (const \mbox{\hyperlink{classShape}{Shape}} \texorpdfstring{$\ast$}{*}in\+Shape, \mbox{\hyperlink{classVec3}{Vec3\+Arg}} in\+Shape\+Scale, \mbox{\hyperlink{classMat44}{RMat44\+Arg}} in\+Center\+Of\+Mass\+Transform, const \mbox{\hyperlink{classCollideShapeSettings}{Collide\+Shape\+Settings}} \&in\+Collide\+Shape\+Settings, \mbox{\hyperlink{classVec3}{RVec3\+Arg}} in\+Base\+Offset, \mbox{\hyperlink{classCollisionCollector}{Collide\+Shape\+Collector}} \&io\+Collector, const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&in\+Broad\+Phase\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&in\+Object\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&in\+Body\+Filter=\{ \}, const \mbox{\hyperlink{classShapeFilter}{Shape\+Filter}} \&in\+Shape\+Filter=\{ \}) const
\item 
void \mbox{\hyperlink{classNarrowPhaseQuery_a5d9ab53431ed38e7d143d5cab9df08cb}{Cast\+Shape}} (const \mbox{\hyperlink{structRShapeCast}{RShape\+Cast}} \&in\+Shape\+Cast, const \mbox{\hyperlink{classShapeCastSettings}{Shape\+Cast\+Settings}} \&in\+Shape\+Cast\+Settings, \mbox{\hyperlink{classVec3}{RVec3\+Arg}} in\+Base\+Offset, \mbox{\hyperlink{classCollisionCollector}{Cast\+Shape\+Collector}} \&io\+Collector, const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&in\+Broad\+Phase\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&in\+Object\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&in\+Body\+Filter=\{ \}, const \mbox{\hyperlink{classShapeFilter}{Shape\+Filter}} \&in\+Shape\+Filter=\{ \}) const
\item 
\Hypertarget{classNarrowPhaseQuery_a9cb6ed9faecacb191cb15088e6c0de1e}\label{classNarrowPhaseQuery_a9cb6ed9faecacb191cb15088e6c0de1e} 
void {\bfseries Collect\+Transformed\+Shapes} (const \mbox{\hyperlink{classAABox}{AABox}} \&in\+Box, \mbox{\hyperlink{classCollisionCollector}{Transformed\+Shape\+Collector}} \&io\+Collector, const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&in\+Broad\+Phase\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&in\+Object\+Layer\+Filter=\{ \}, const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&in\+Body\+Filter=\{ \}, const \mbox{\hyperlink{classShapeFilter}{Shape\+Filter}} \&in\+Shape\+Filter=\{ \}) const
\begin{DoxyCompactList}\small\item\em Collect all leaf transformed shapes that fall inside world space box in\+Box. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classNonCopyable}{Non\+Copyable}}}
\begin{DoxyCompactItemize}
\item 
{\bfseries Non\+Copyable} (const \mbox{\hyperlink{classNonCopyable}{Non\+Copyable}} \&)=delete
\item 
void {\bfseries operator=} (const \mbox{\hyperlink{classNonCopyable}{Non\+Copyable}} \&)=delete
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class that provides an interface for doing precise collision detection against the broad and then the narrow phase. Unlike a \doxylink{classBroadPhaseQuery}{Broad\+Phase\+Query}, the \doxylink{classNarrowPhaseQuery}{Narrow\+Phase\+Query} will test against shapes and will return collision information against triangles, spheres etc. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classNarrowPhaseQuery_a6ef59f16467096fbb0ab9f476e15c8f3}\label{classNarrowPhaseQuery_a6ef59f16467096fbb0ab9f476e15c8f3} 
\index{NarrowPhaseQuery@{NarrowPhaseQuery}!CastRay@{CastRay}}
\index{CastRay@{CastRay}!NarrowPhaseQuery@{NarrowPhaseQuery}}
\doxysubsubsection{\texorpdfstring{CastRay()}{CastRay()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Narrow\+Phase\+Query\+::\+Cast\+Ray (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structRRayCast}{RRay\+Cast}} \&}]{in\+Ray,  }\item[{const \mbox{\hyperlink{classRayCastSettings}{Ray\+Cast\+Settings}} \&}]{in\+Ray\+Cast\+Settings,  }\item[{\mbox{\hyperlink{classCollisionCollector}{Cast\+Ray\+Collector}} \&}]{io\+Collector,  }\item[{const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&}]{in\+Broad\+Phase\+Layer\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&}]{in\+Object\+Layer\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&}]{in\+Body\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classShapeFilter}{Shape\+Filter}} \&}]{in\+Shape\+Filter = {\ttfamily \{~\}} }\end{DoxyParamCaption}) const}

Cast a ray, allows collecting multiple hits. Note that this version is more flexible but also slightly slower than the Cast\+Ray function that returns only a single hit. If you want the surface normal of the hit use \doxylink{classBody_a12422310c7aa9ec72e2376d08fbee6b5}{Body\+::\+Get\+World\+Space\+Surface\+Normal}(collected sub shape ID, in\+Ray.\+Get\+Point\+On\+Ray(collected fraction)) on body with collected body ID. \Hypertarget{classNarrowPhaseQuery_a57dbce38dfc79303abacb33d0373ba46}\label{classNarrowPhaseQuery_a57dbce38dfc79303abacb33d0373ba46} 
\index{NarrowPhaseQuery@{NarrowPhaseQuery}!CastRay@{CastRay}}
\index{CastRay@{CastRay}!NarrowPhaseQuery@{NarrowPhaseQuery}}
\doxysubsubsection{\texorpdfstring{CastRay()}{CastRay()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily bool Narrow\+Phase\+Query\+::\+Cast\+Ray (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structRRayCast}{RRay\+Cast}} \&}]{in\+Ray,  }\item[{\mbox{\hyperlink{classRayCastResult}{Ray\+Cast\+Result}} \&}]{io\+Hit,  }\item[{const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&}]{in\+Broad\+Phase\+Layer\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&}]{in\+Object\+Layer\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&}]{in\+Body\+Filter = {\ttfamily \{~\}} }\end{DoxyParamCaption}) const}

Cast a ray and find the closest hit. Returns true if it finds a hit. Hits further than io\+Hit.\+m\+Fraction will not be considered and in this case io\+Hit will remain unmodified (and the function will return false). Convex objects will be treated as solid (meaning if the ray starts inside, you\textquotesingle{}ll get a hit fraction of 0) and back face hits against triangles are returned. If you want the surface normal of the hit use \doxylink{classBody_a12422310c7aa9ec72e2376d08fbee6b5}{Body\+::\+Get\+World\+Space\+Surface\+Normal}(io\+Hit.\+m\+Sub\+Shape\+ID2, in\+Ray.\+Get\+Point\+On\+Ray(io\+Hit.\+m\+Fraction)) on body with ID io\+Hit.\+m\+Body\+ID. \Hypertarget{classNarrowPhaseQuery_a5d9ab53431ed38e7d143d5cab9df08cb}\label{classNarrowPhaseQuery_a5d9ab53431ed38e7d143d5cab9df08cb} 
\index{NarrowPhaseQuery@{NarrowPhaseQuery}!CastShape@{CastShape}}
\index{CastShape@{CastShape}!NarrowPhaseQuery@{NarrowPhaseQuery}}
\doxysubsubsection{\texorpdfstring{CastShape()}{CastShape()}}
{\footnotesize\ttfamily void Narrow\+Phase\+Query\+::\+Cast\+Shape (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structRShapeCast}{RShape\+Cast}} \&}]{in\+Shape\+Cast,  }\item[{const \mbox{\hyperlink{classShapeCastSettings}{Shape\+Cast\+Settings}} \&}]{in\+Shape\+Cast\+Settings,  }\item[{\mbox{\hyperlink{classVec3}{RVec3\+Arg}}}]{in\+Base\+Offset,  }\item[{\mbox{\hyperlink{classCollisionCollector}{Cast\+Shape\+Collector}} \&}]{io\+Collector,  }\item[{const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&}]{in\+Broad\+Phase\+Layer\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&}]{in\+Object\+Layer\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&}]{in\+Body\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classShapeFilter}{Shape\+Filter}} \&}]{in\+Shape\+Filter = {\ttfamily \{~\}} }\end{DoxyParamCaption}) const}

Cast a shape and report any hits to io\+Collector 
\begin{DoxyParams}{Parameters}
{\em in\+Shape\+Cast} & The shape cast and its position and direction \\
\hline
{\em in\+Shape\+Cast\+Settings} & Settings for the shape cast \\
\hline
{\em in\+Base\+Offset} & All hit results will be returned relative to this offset, can be zero to get results in world position, but when you\textquotesingle{}re testing far from the origin you get better precision by picking a position that\textquotesingle{}s closer e.\+g. in\+Shape\+Cast.\+m\+Center\+Of\+Mass\+Start.\+Get\+Translation() since floats are most accurate near the origin \\
\hline
{\em io\+Collector} & Collector that receives the hits \\
\hline
{\em in\+Broad\+Phase\+Layer\+Filter} & Filter that filters at broadphase level \\
\hline
{\em in\+Object\+Layer\+Filter} & Filter that filters at layer level \\
\hline
{\em in\+Body\+Filter} & Filter that filters at body level \\
\hline
{\em in\+Shape\+Filter} & Filter that filters at shape level \\
\hline
\end{DoxyParams}
\Hypertarget{classNarrowPhaseQuery_afcfabe1320517d1bdc956cded95f0f8a}\label{classNarrowPhaseQuery_afcfabe1320517d1bdc956cded95f0f8a} 
\index{NarrowPhaseQuery@{NarrowPhaseQuery}!CollidePoint@{CollidePoint}}
\index{CollidePoint@{CollidePoint}!NarrowPhaseQuery@{NarrowPhaseQuery}}
\doxysubsubsection{\texorpdfstring{CollidePoint()}{CollidePoint()}}
{\footnotesize\ttfamily void Narrow\+Phase\+Query\+::\+Collide\+Point (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classVec3}{RVec3\+Arg}}}]{in\+Point,  }\item[{\mbox{\hyperlink{classCollisionCollector}{Collide\+Point\+Collector}} \&}]{io\+Collector,  }\item[{const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&}]{in\+Broad\+Phase\+Layer\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&}]{in\+Object\+Layer\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&}]{in\+Body\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classShapeFilter}{Shape\+Filter}} \&}]{in\+Shape\+Filter = {\ttfamily \{~\}} }\end{DoxyParamCaption}) const}

Check if in\+Point is inside any shapes. For this tests all shapes are treated as if they were solid. For a mesh shape, this test will only provide sensible information if the mesh is a closed manifold. For each shape that collides, io\+Collector will receive a hit \Hypertarget{classNarrowPhaseQuery_a6874ff06a6884c2706a1bbf8ed2590a8}\label{classNarrowPhaseQuery_a6874ff06a6884c2706a1bbf8ed2590a8} 
\index{NarrowPhaseQuery@{NarrowPhaseQuery}!CollideShape@{CollideShape}}
\index{CollideShape@{CollideShape}!NarrowPhaseQuery@{NarrowPhaseQuery}}
\doxysubsubsection{\texorpdfstring{CollideShape()}{CollideShape()}}
{\footnotesize\ttfamily void Narrow\+Phase\+Query\+::\+Collide\+Shape (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classShape}{Shape}} \texorpdfstring{$\ast$}{*}}]{in\+Shape,  }\item[{\mbox{\hyperlink{classVec3}{Vec3\+Arg}}}]{in\+Shape\+Scale,  }\item[{\mbox{\hyperlink{classMat44}{RMat44\+Arg}}}]{in\+Center\+Of\+Mass\+Transform,  }\item[{const \mbox{\hyperlink{classCollideShapeSettings}{Collide\+Shape\+Settings}} \&}]{in\+Collide\+Shape\+Settings,  }\item[{\mbox{\hyperlink{classVec3}{RVec3\+Arg}}}]{in\+Base\+Offset,  }\item[{\mbox{\hyperlink{classCollisionCollector}{Collide\+Shape\+Collector}} \&}]{io\+Collector,  }\item[{const \mbox{\hyperlink{classBroadPhaseLayerFilter}{Broad\+Phase\+Layer\+Filter}} \&}]{in\+Broad\+Phase\+Layer\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classObjectLayerFilter}{Object\+Layer\+Filter}} \&}]{in\+Object\+Layer\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classBodyFilter}{Body\+Filter}} \&}]{in\+Body\+Filter = {\ttfamily \{~\}},  }\item[{const \mbox{\hyperlink{classShapeFilter}{Shape\+Filter}} \&}]{in\+Shape\+Filter = {\ttfamily \{~\}} }\end{DoxyParamCaption}) const}

Collide a shape with the system 
\begin{DoxyParams}{Parameters}
{\em in\+Shape} & \doxylink{classShape}{Shape} to test \\
\hline
{\em in\+Shape\+Scale} & Scale in local space of shape \\
\hline
{\em in\+Center\+Of\+Mass\+Transform} & Center of mass transform for the shape \\
\hline
{\em in\+Collide\+Shape\+Settings} & Settings \\
\hline
{\em in\+Base\+Offset} & All hit results will be returned relative to this offset, can be zero to get results in world position, but when you\textquotesingle{}re testing far from the origin you get better precision by picking a position that\textquotesingle{}s closer e.\+g. in\+Center\+Of\+Mass\+Transform.\+Get\+Translation() since floats are most accurate near the origin \\
\hline
{\em io\+Collector} & Collector that receives the hits \\
\hline
{\em in\+Broad\+Phase\+Layer\+Filter} & Filter that filters at broadphase level \\
\hline
{\em in\+Object\+Layer\+Filter} & Filter that filters at layer level \\
\hline
{\em in\+Body\+Filter} & Filter that filters at body level \\
\hline
{\em in\+Shape\+Filter} & Filter that filters at shape level \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
includes/jolt/\+Physics/\+Collision/Narrow\+Phase\+Query.\+h\end{DoxyCompactItemize}
