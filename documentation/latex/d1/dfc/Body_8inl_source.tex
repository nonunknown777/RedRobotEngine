\doxysection{Body.\+inl}
\hypertarget{Body_8inl_source}{}\label{Body_8inl_source}\index{includes/jolt/Physics/Body/Body.inl@{includes/jolt/Physics/Body/Body.inl}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Jolt\ Physics\ Library\ (https://github.com/jrouwe/JoltPhysics)}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ SPDX-\/FileCopyrightText:\ 2021\ Jorrit\ Rouwe}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ MIT}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ JPH\_NAMESPACE\_BEGIN}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \mbox{\hyperlink{classMat44}{RMat44}}\ \mbox{\hyperlink{classBody_a4bab5d07f84d5a9d38119a1923298b5c}{Body::GetWorldTransform}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00010\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00011\ \ \ \ \ JPH\_ASSERT(BodyAccess::sCheckRights(BodyAccess::sPositionAccess,\ BodyAccess::EAccess::Read));}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMat44_aba5427f45393b40263d52ec614cfa985}{RMat44::sRotationTranslation}}(mRotation,\ mPosition).\mbox{\hyperlink{classMat44_a16f19b423139db52503bb8d6526d947f}{PreTranslated}}(-\/mShape-\/>\mbox{\hyperlink{classShape_a7e34b0626a40c31db0b2a761922adb1a}{GetCenterOfMass}}());}
\DoxyCodeLine{00014\ \}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \mbox{\hyperlink{classMat44}{RMat44}}\ \mbox{\hyperlink{classBody_a9431bfa66a018714074fe149c7a65ac5}{Body::GetCenterOfMassTransform}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00017\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00018\ \ \ \ \ JPH\_ASSERT(BodyAccess::sCheckRights(BodyAccess::sPositionAccess,\ BodyAccess::EAccess::Read));}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMat44_aba5427f45393b40263d52ec614cfa985}{RMat44::sRotationTranslation}}(mRotation,\ mPosition);}
\DoxyCodeLine{00021\ \}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \mbox{\hyperlink{classMat44}{RMat44}}\ \mbox{\hyperlink{classBody_a9c317394889f2064a20693935036eeb3}{Body::GetInverseCenterOfMassTransform}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00024\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00025\ \ \ \ \ JPH\_ASSERT(BodyAccess::sCheckRights(BodyAccess::sPositionAccess,\ BodyAccess::EAccess::Read));}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classMat44_ac8be820a7eeb44bf570abb8dc01f4c59}{RMat44::sInverseRotationTranslation}}(mRotation,\ mPosition);}
\DoxyCodeLine{00028\ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{inline}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ sIsValidSensorBodyPair(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inSensor,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inOther)}
\DoxyCodeLine{00031\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{comment}{//\ If\ the\ sensor\ is\ not\ an\ actual\ sensor\ then\ this\ is\ not\ a\ valid\ pair}}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordflow}{if}\ (!inSensor.\mbox{\hyperlink{classBody_a251e1c9d8c9c7e40ddabc73420ac9ab1}{IsSensor}}())}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordflow}{if}\ (inSensor.\mbox{\hyperlink{classBody_a167881dee46c42df59de52f567602ec9}{SensorDetectsStatic}}())}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !inOther.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}();\ \textcolor{comment}{//\ If\ the\ other\ body\ is\ dynamic,\ the\ pair\ will\ be\ handled\ when\ the\ bodies\ are\ swapped,\ otherwise\ we'll\ detect\ the\ collision\ twice}}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ inOther.\mbox{\hyperlink{classBody_ab49045bc1738e110dea9cbc020528338}{IsKinematic}}();\ \textcolor{comment}{//\ Only\ kinematic\ bodies\ are\ valid}}
\DoxyCodeLine{00040\ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classBody_a68c64581b2698ec41f1bbb50913bb48d}{Body::sFindCollidingPairsCanCollide}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2)}
\DoxyCodeLine{00043\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{comment}{//\ First\ body\ should\ never\ be\ a\ soft\ body}}
\DoxyCodeLine{00045\ \ \ \ \ JPH\_ASSERT(!inBody1.\mbox{\hyperlink{classBody_a454781f1340576ad7f752b51dd8a179d}{IsSoftBody}}());}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//\ One\ of\ these\ conditions\ must\ be\ true}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{comment}{//\ -\/\ One\ of\ the\ bodies\ must\ be\ dynamic\ to\ collide}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{comment}{//\ -\/\ A\ sensor\ can\ collide\ with\ non-\/dynamic\ bodies}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{if}\ ((!inBody1.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}()\ \&\&\ !inBody2.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}())}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \&\&\ !sIsValidSensorBodyPair(inBody1,\ inBody2)}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \&\&\ !sIsValidSensorBodyPair(inBody2,\ inBody1))}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ Check\ that\ body\ 1\ is\ active}}
\DoxyCodeLine{00056\ \ \ \ \ uint32\ body1\_index\_in\_active\_bodies\ =\ inBody1.\mbox{\hyperlink{classBody_a61c94ac7d927ff8e5b3c980fc11af5a1}{GetIndexInActiveBodiesInternal}}();}
\DoxyCodeLine{00057\ \ \ \ \ JPH\_ASSERT(!inBody1.\mbox{\hyperlink{classBody_a83748a3d5a5b0a5b0242ba91875b8e13}{IsStatic}}()\ \&\&\ body1\_index\_in\_active\_bodies\ !=\ \mbox{\hyperlink{classBody_a636e301ffa9150e9df74895863394ee4}{Body::cInactiveIndex}},\ \textcolor{stringliteral}{"{}This\ function\ assumes\ that\ Body\ 1\ is\ active"{}});}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{//\ If\ the\ pair\ A,\ B\ collides\ we\ need\ to\ ensure\ that\ the\ pair\ B,\ A\ does\ not\ collide\ or\ else\ we\ will\ handle\ the\ collision\ twice.}}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ If\ A\ is\ the\ same\ body\ as\ B\ we\ don't\ want\ to\ collide\ (1)}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ If\ A\ is\ dynamic\ and\ B\ is\ static\ we\ should\ collide\ (2)}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//\ If\ A\ is\ dynamic\ /\ kinematic\ and\ B\ is\ dynamic\ /\ kinematic\ we\ should\ only\ collide\ if\ (kinematic\ vs\ kinematic\ is\ ruled\ out\ by\ the\ if\ above)}}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{comment}{//\ \ -\/\ A\ is\ active\ and\ B\ is\ not\ yet\ active\ (3)}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ \ -\/\ A\ is\ active\ and\ B\ will\ become\ active\ during\ this\ simulation\ step\ (4)}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{comment}{//\ \ -\/\ A\ is\ active\ and\ B\ is\ active,\ we\ require\ a\ condition\ that\ makes\ A,\ B\ collide\ and\ B,\ A\ not\ (5)}}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{comment}{//\ In\ order\ to\ implement\ this\ we\ use\ the\ index\ in\ the\ active\ body\ list\ and\ make\ use\ of\ the\ fact\ that}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ a\ body\ not\ in\ the\ active\ list\ has\ Body.Index\ =\ 0xffffffff\ which\ is\ the\ highest\ possible\ value\ for\ an\ uint32.}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ Because\ we\ know\ that\ A\ is\ active\ we\ know\ that\ A.Index\ !=\ 0xffffffff:}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ (1)\ Because\ A.Index\ !=\ 0xffffffff,\ if\ A.Index\ =\ B.Index\ then\ A\ =\ B,\ so\ to\ collide\ A.Index\ !=\ B.Index}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ (2)\ A.Index\ !=\ 0xffffffff,\ B.Index\ =\ 0xffffffff\ (because\ it's\ static\ and\ cannot\ be\ in\ the\ active\ list),\ so\ to\ collide\ A.Index\ !=\ B.Index}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ (3)\ A.Index\ !=\ 0xffffffff,\ B.Index\ =\ 0xffffffff\ (because\ it's\ not\ yet\ active),\ so\ to\ collide\ A.Index\ !=\ B.Index}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ (4)\ A.Index\ !=\ 0xffffffff,\ B.Index\ =\ 0xffffffff\ currently.\ But\ it\ can\ activate\ during\ the\ Broad/NarrowPhase\ step\ at\ which\ point\ it}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ will\ be\ added\ to\ the\ end\ of\ the\ active\ list\ which\ will\ make\ B.Index\ >\ A.Index\ (this\ holds\ only\ true\ when\ we\ don't\ deactivate}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ bodies\ during\ the\ Broad/NarrowPhase\ step),\ so\ to\ collide\ A.Index\ <\ B.Index.}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ (5)\ As\ tie\ breaker\ we\ can\ use\ the\ same\ condition\ A.Index\ <\ B.Index\ to\ collide,\ this\ means\ that\ if\ A,\ B\ collides\ then\ B,\ A\ won't}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{static\_assert}(\mbox{\hyperlink{classBody_a636e301ffa9150e9df74895863394ee4}{Body::cInactiveIndex}}\ ==\ 0xffffffff,\ \textcolor{stringliteral}{"{}The\ algorithm\ below\ uses\ this\ value"{}});}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordflow}{if}\ (!inBody2.\mbox{\hyperlink{classBody_a454781f1340576ad7f752b51dd8a179d}{IsSoftBody}}()\ \&\&\ body1\_index\_in\_active\_bodies\ >=\ inBody2.\mbox{\hyperlink{classBody_a61c94ac7d927ff8e5b3c980fc11af5a1}{GetIndexInActiveBodiesInternal}}())}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00081\ \ \ \ \ JPH\_ASSERT(inBody1.\mbox{\hyperlink{classBody_ab76a68b10378fdc8eb6572b995a0d7d7}{GetID}}()\ !=\ inBody2.\mbox{\hyperlink{classBody_ab76a68b10378fdc8eb6572b995a0d7d7}{GetID}}(),\ \textcolor{stringliteral}{"{}Read\ the\ comment\ above,\ A\ and\ B\ are\ the\ same\ body\ which\ should\ not\ be\ possible!"{}});}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{//\ Bodies\ in\ the\ same\ group\ don't\ collide}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordflow}{if}\ (!inBody1.\mbox{\hyperlink{classBody_a5865492b92c7c2e321c6916e80f5b7cb}{GetCollisionGroup}}().\mbox{\hyperlink{classCollisionGroup_aa7e60aa0b9f6e5563ab4ca690c8e2b56}{CanCollide}}(inBody2.\mbox{\hyperlink{classBody_a5865492b92c7c2e321c6916e80f5b7cb}{GetCollisionGroup}}()))}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00088\ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBody_a3385650a73d75c7d9c16d13ea2d5519f}{Body::AddRotationStep}}(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inAngularVelocityTimesDeltaTime)}
\DoxyCodeLine{00091\ \{}
\DoxyCodeLine{00092\ \ \ \ \ JPH\_ASSERT(\mbox{\hyperlink{classBody_a8365154663e94343e1045893ee3b4c16}{IsRigidBody}}());}
\DoxyCodeLine{00093\ \ \ \ \ JPH\_ASSERT(BodyAccess::sCheckRights(BodyAccess::sPositionAccess,\ BodyAccess::EAccess::ReadWrite));}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{comment}{//\ This\ used\ to\ use\ the\ equation:\ d/dt\ R(t)\ =\ 1/2\ *\ w(t)\ *\ R(t)\ so\ that\ R(t\ +\ dt)\ =\ R(t)\ +\ 1/2\ *\ w(t)\ *\ R(t)\ *\ dt}}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{//\ See:\ Appendix\ B\ of\ An\ Introduction\ to\ Physically\ Based\ Modeling:\ Rigid\ Body\ Simulation\ II-\/Nonpenetration\ Constraints}}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{comment}{//\ URL:\ https://www.cs.cmu.edu/\string~baraff/sigcourse/notesd2.pdf}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{comment}{//\ But\ this\ is\ a\ first\ order\ approximation\ and\ does\ not\ work\ well\ for\ kinematic\ ragdolls\ that\ are\ driven\ to\ a\ new}}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{comment}{//\ pose\ if\ the\ poses\ differ\ enough.\ So\ now\ we\ split\ w(t)\ *\ dt\ into\ an\ axis\ and\ angle\ part\ and\ create\ a\ quaternion\ with\ it.}}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ Note\ that\ the\ resulting\ quaternion\ is\ normalized\ since\ otherwise\ numerical\ drift\ will\ eventually\ make\ the\ rotation\ non-\/normalized.}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{float}\ len\ =\ inAngularVelocityTimesDeltaTime.\mbox{\hyperlink{classVec3_a38a9efffc3f9413f3dd702abc73eb9a2}{Length}}();}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ >\ 1.0e-\/6f)}
\DoxyCodeLine{00103\ \ \ \ \ \{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ mRotation\ =\ (\mbox{\hyperlink{classQuat_a3ac594bf7be610138e90735ae99ff8e9}{Quat::sRotation}}(inAngularVelocityTimesDeltaTime\ /\ len,\ len)\ *\ mRotation).Normalized();}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ JPH\_ASSERT(!mRotation.\mbox{\hyperlink{classQuat_a62b95b1c1d36ecbd6f9732ca4789a7bf}{IsNaN}}());}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \textcolor{keywordtype}{void}\ Body::SubRotationStep(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inAngularVelocityTimesDeltaTime)}
\DoxyCodeLine{00110\ \{}
\DoxyCodeLine{00111\ \ \ \ \ JPH\_ASSERT(\mbox{\hyperlink{classBody_a8365154663e94343e1045893ee3b4c16}{IsRigidBody}}());}
\DoxyCodeLine{00112\ \ \ \ \ JPH\_ASSERT(BodyAccess::sCheckRights(BodyAccess::sPositionAccess,\ BodyAccess::EAccess::ReadWrite));}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{comment}{//\ See\ comment\ at\ Body::AddRotationStep}}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordtype}{float}\ len\ =\ inAngularVelocityTimesDeltaTime.\mbox{\hyperlink{classVec3_a38a9efffc3f9413f3dd702abc73eb9a2}{Length}}();}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ >\ 1.0e-\/6f)}
\DoxyCodeLine{00117\ \ \ \ \ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ mRotation\ =\ (\mbox{\hyperlink{classQuat_a3ac594bf7be610138e90735ae99ff8e9}{Quat::sRotation}}(inAngularVelocityTimesDeltaTime\ /\ len,\ -\/len)\ *\ mRotation).Normalized();}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ JPH\_ASSERT(!mRotation.\mbox{\hyperlink{classQuat_a62b95b1c1d36ecbd6f9732ca4789a7bf}{IsNaN}}());}
\DoxyCodeLine{00120\ \ \ \ \ \}}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \mbox{\hyperlink{classVec3}{Vec3}}\ \mbox{\hyperlink{classBody_a12422310c7aa9ec72e2376d08fbee6b5}{Body::GetWorldSpaceSurfaceNormal}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeID}{SubShapeID}}\ \&inSubShapeID,\ \mbox{\hyperlink{classVec3}{RVec3Arg}}\ inPosition)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00124\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{classMat44}{RMat44}}\ inv\_com\ =\ \mbox{\hyperlink{classBody_a9c317394889f2064a20693935036eeb3}{GetInverseCenterOfMassTransform}}();}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{return}\ inv\_com.\mbox{\hyperlink{classMat44_a3ed66bc4c5e8e010657bd5bb109f1406}{Multiply3x3Transposed}}(mShape-\/>\mbox{\hyperlink{classShape_adc7c6aeed1cde2ae1be099a4a5a4bd0c}{GetSurfaceNormal}}(inSubShapeID,\ \mbox{\hyperlink{classVec3}{Vec3}}(inv\_com\ *\ inPosition))).\mbox{\hyperlink{classVec3_a0f7559f2691ad67826f42ca19916b7a9}{Normalized}}();}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \mbox{\hyperlink{classMat44}{Mat44}}\ \mbox{\hyperlink{classBody_a731f2a92e9e215ff87efc831999e0e6e}{Body::GetInverseInertia}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00130\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00131\ \ \ \ \ JPH\_ASSERT(\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}());}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classBody_a0d39987255227c4221fcea66cb1fc041}{GetMotionProperties}}()-\/>\mbox{\hyperlink{classMotionProperties_ab95f2b1c9b6bd9b6082f8cee8a7e1858}{GetInverseInertiaForRotation}}(\mbox{\hyperlink{classMat44_ac3109f2d950061c0b4de57e76a132634}{Mat44::sRotation}}(mRotation));}
\DoxyCodeLine{00134\ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBody_add8352d484a2805f114400159151185b}{Body::AddForce}}(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inForce,\ \mbox{\hyperlink{classVec3}{RVec3Arg}}\ inPosition)}
\DoxyCodeLine{00137\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \mbox{\hyperlink{classBody_add8352d484a2805f114400159151185b}{AddForce}}(inForce);}
\DoxyCodeLine{00139\ \ \ \ \ \mbox{\hyperlink{classBody_aec30d437f934327d261e8ebdc23a2c8c}{AddTorque}}(\mbox{\hyperlink{classVec3}{Vec3}}(inPosition\ -\/\ mPosition).Cross(inForce));}
\DoxyCodeLine{00140\ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBody_af4e42e6ae915ca4fcaee1c988eeba0f7}{Body::AddImpulse}}(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inImpulse)}
\DoxyCodeLine{00143\ \{}
\DoxyCodeLine{00144\ \ \ \ \ JPH\_ASSERT(\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}());}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{classBody_a5e1e46dac04eaf5fbaed87d6d781480d}{SetLinearVelocityClamped}}(mMotionProperties-\/>\mbox{\hyperlink{classMotionProperties_a6478c1ccabfc23ee9ce98faa0643c080}{GetLinearVelocity}}()\ +\ inImpulse\ *\ mMotionProperties-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}());}
\DoxyCodeLine{00147\ \}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBody_af4e42e6ae915ca4fcaee1c988eeba0f7}{Body::AddImpulse}}(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inImpulse,\ \mbox{\hyperlink{classVec3}{RVec3Arg}}\ inPosition)}
\DoxyCodeLine{00150\ \{}
\DoxyCodeLine{00151\ \ \ \ \ JPH\_ASSERT(\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}());}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ \ \ \mbox{\hyperlink{classBody_a5e1e46dac04eaf5fbaed87d6d781480d}{SetLinearVelocityClamped}}(mMotionProperties-\/>\mbox{\hyperlink{classMotionProperties_a6478c1ccabfc23ee9ce98faa0643c080}{GetLinearVelocity}}()\ +\ inImpulse\ *\ mMotionProperties-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}());}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ \mbox{\hyperlink{classBody_a9033b203f8511c35dca0dfc8ca1c25ca}{SetAngularVelocityClamped}}(mMotionProperties-\/>\mbox{\hyperlink{classMotionProperties_a66348339a05a43b730e1591273aace18}{GetAngularVelocity}}()\ +\ mMotionProperties-\/>\mbox{\hyperlink{classMotionProperties_aa8a73ea7940a316151262ed9a28c4fbb}{MultiplyWorldSpaceInverseInertiaByVector}}(mRotation,\ \mbox{\hyperlink{classVec3}{Vec3}}(inPosition\ -\/\ mPosition).Cross(inImpulse)));}
\DoxyCodeLine{00156\ \}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBody_aa797042eec783ed27333f529b66221a3}{Body::AddAngularImpulse}}(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inAngularImpulse)}
\DoxyCodeLine{00159\ \{}
\DoxyCodeLine{00160\ \ \ \ \ JPH\_ASSERT(\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}());}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \mbox{\hyperlink{classBody_a9033b203f8511c35dca0dfc8ca1c25ca}{SetAngularVelocityClamped}}(mMotionProperties-\/>\mbox{\hyperlink{classMotionProperties_a66348339a05a43b730e1591273aace18}{GetAngularVelocity}}()\ +\ mMotionProperties-\/>\mbox{\hyperlink{classMotionProperties_aa8a73ea7940a316151262ed9a28c4fbb}{MultiplyWorldSpaceInverseInertiaByVector}}(mRotation,\ inAngularImpulse));}
\DoxyCodeLine{00163\ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \textcolor{keywordtype}{void}\ Body::GetSleepTestPoints(\mbox{\hyperlink{classVec3}{RVec3}}\ *outPoints)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00166\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00167\ \ \ \ \ JPH\_ASSERT(BodyAccess::sCheckRights(BodyAccess::sPositionAccess,\ BodyAccess::EAccess::Read));}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{comment}{//\ Center\ of\ mass\ is\ the\ first\ position}}
\DoxyCodeLine{00170\ \ \ \ \ outPoints[0]\ =\ mPosition;}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{comment}{//\ The\ second\ and\ third\ position\ are\ on\ the\ largest\ axis\ of\ the\ bounding\ box}}
\DoxyCodeLine{00173\ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ extent\ =\ mShape-\/>\mbox{\hyperlink{classShape_a30ea165596e01df087f6e4980ed6b0cb}{GetLocalBounds}}().\mbox{\hyperlink{classAABox_a094a8548424826014024349fd7b96766}{GetExtent}}();}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordtype}{int}\ lowest\_component\ =\ extent.\mbox{\hyperlink{classVec3_a502453ae3005d5b84a221adf80721f92}{GetLowestComponentIndex}}();}
\DoxyCodeLine{00175\ \ \ \ \ \mbox{\hyperlink{classMat44}{Mat44}}\ rotation\ =\ \mbox{\hyperlink{classMat44_ac3109f2d950061c0b4de57e76a132634}{Mat44::sRotation}}(mRotation);}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordflow}{switch}\ (lowest\_component)}
\DoxyCodeLine{00177\ \ \ \ \ \{}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ outPoints[1]\ =\ mPosition\ +\ extent.GetY()\ *\ rotation.GetColumn3(1);}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ outPoints[2]\ =\ mPosition\ +\ extent.GetZ()\ *\ rotation.GetColumn3(2);}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ outPoints[1]\ =\ mPosition\ +\ extent.\mbox{\hyperlink{classVec3_a284e29f161ae7709a934f402bd2a848c}{GetX}}()\ *\ rotation.GetColumn3(0);}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ outPoints[2]\ =\ mPosition\ +\ extent.GetZ()\ *\ rotation.GetColumn3(2);}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ outPoints[1]\ =\ mPosition\ +\ extent.\mbox{\hyperlink{classVec3_a284e29f161ae7709a934f402bd2a848c}{GetX}}()\ *\ rotation.GetColumn3(0);}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ outPoints[2]\ =\ mPosition\ +\ extent.GetY()\ *\ rotation.GetColumn3(1);}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ JPH\_ASSERT(\textcolor{keyword}{false});}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00196\ \ \ \ \ \}}
\DoxyCodeLine{00197\ \}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classBody_a95efc4cbe40bfab41c74b2add880fa04}{Body::ResetSleepTimer}}()}
\DoxyCodeLine{00200\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ points[3];}
\DoxyCodeLine{00202\ \ \ \ \ GetSleepTestPoints(points);}
\DoxyCodeLine{00203\ \ \ \ \ mMotionProperties-\/>\mbox{\hyperlink{classMotionProperties_aad3b333b7af3e3b39be95edf9b69d133}{ResetSleepTestSpheres}}(points);}
\DoxyCodeLine{00204\ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ JPH\_NAMESPACE\_END}

\end{DoxyCode}
