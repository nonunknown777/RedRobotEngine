\doxysection{Ray\+AABox8.\+h}
\hypertarget{RayAABox8_8h_source}{}\label{RayAABox8_8h_source}\index{includes/jolt/Geometry/RayAABox8.h@{includes/jolt/Geometry/RayAABox8.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Jolt\ Physics\ Library\ (https://github.com/jrouwe/JoltPhysics)}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ SPDX-\/FileCopyrightText:\ 2021\ Jorrit\ Rouwe}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ MIT}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <Jolt/Math/Vec8.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <Jolt/Geometry/RayAABox.h>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ JPH\_NAMESPACE\_BEGIN}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00014\ JPH\_INLINE\ \mbox{\hyperlink{classVec8}{Vec8}}\ RayAABox8(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inOrigin,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classRayInvDirection}{RayInvDirection}}\ \&inInvDirection,\ \mbox{\hyperlink{classVec8}{Vec8Arg}}\ inBoundsMinX,\ \mbox{\hyperlink{classVec8}{Vec8Arg}}\ inBoundsMinY,\ \mbox{\hyperlink{classVec8}{Vec8Arg}}\ inBoundsMinZ,\ \mbox{\hyperlink{classVec8}{Vec8Arg}}\ inBoundsMaxX,\ \mbox{\hyperlink{classVec8}{Vec8Arg}}\ inBoundsMaxY,\ \mbox{\hyperlink{classVec8}{Vec8Arg}}\ inBoundsMaxZ)}
\DoxyCodeLine{00015\ \{}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{comment}{//\ Constants}}
\DoxyCodeLine{00017\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ flt\_min\ =\ \mbox{\hyperlink{classVec8_affc8f77dd2b5411c7b27e8f037c2dcee}{Vec8::sReplicate}}(-\/FLT\_MAX);}
\DoxyCodeLine{00018\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ flt\_max\ =\ \mbox{\hyperlink{classVec8_affc8f77dd2b5411c7b27e8f037c2dcee}{Vec8::sReplicate}}(FLT\_MAX);}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{//\ Origin}}
\DoxyCodeLine{00021\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ originx\ =\ \mbox{\hyperlink{classVec8_a33fb5192697f9c095b075025a067c4f4}{Vec8::sSplatX}}(\mbox{\hyperlink{classVec4}{Vec4}}(inOrigin));}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ originy\ =\ \mbox{\hyperlink{classVec8_a6204d9f1086b05b6e5a6932337b12c80}{Vec8::sSplatY}}(\mbox{\hyperlink{classVec4}{Vec4}}(inOrigin));}
\DoxyCodeLine{00023\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ originz\ =\ \mbox{\hyperlink{classVec8_ade8178e79b24927bb220857640b09bc0}{Vec8::sSplatZ}}(\mbox{\hyperlink{classVec4}{Vec4}}(inOrigin));}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{comment}{//\ Parallel}}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{classUVec8}{UVec8}}\ parallelx\ =\ \mbox{\hyperlink{classUVec8_a8feae856c89191c68f06b805203df53f}{UVec8::sSplatX}}(inInvDirection.\mbox{\hyperlink{classRayInvDirection_a0188d384cbde315c79e1986a67efd7ce}{mIsParallel}});}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{classUVec8}{UVec8}}\ parallely\ =\ \mbox{\hyperlink{classUVec8_a7f27a397508f57859f2e8c87c4be3d3b}{UVec8::sSplatY}}(inInvDirection.\mbox{\hyperlink{classRayInvDirection_a0188d384cbde315c79e1986a67efd7ce}{mIsParallel}});}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{classUVec8}{UVec8}}\ parallelz\ =\ \mbox{\hyperlink{classUVec8_a284219a34c2eef183e1b66bfe96ae186}{UVec8::sSplatZ}}(inInvDirection.\mbox{\hyperlink{classRayInvDirection_a0188d384cbde315c79e1986a67efd7ce}{mIsParallel}});}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{comment}{//\ Inverse\ direction}}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ invdirx\ =\ \mbox{\hyperlink{classVec8_a33fb5192697f9c095b075025a067c4f4}{Vec8::sSplatX}}(\mbox{\hyperlink{classVec4}{Vec4}}(inInvDirection.\mbox{\hyperlink{classRayInvDirection_a093897689117556a3a61eaaf15b543c2}{mInvDirection}}));}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ invdiry\ =\ \mbox{\hyperlink{classVec8_a6204d9f1086b05b6e5a6932337b12c80}{Vec8::sSplatY}}(\mbox{\hyperlink{classVec4}{Vec4}}(inInvDirection.\mbox{\hyperlink{classRayInvDirection_a093897689117556a3a61eaaf15b543c2}{mInvDirection}}));}
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ invdirz\ =\ \mbox{\hyperlink{classVec8_ade8178e79b24927bb220857640b09bc0}{Vec8::sSplatZ}}(\mbox{\hyperlink{classVec4}{Vec4}}(inInvDirection.\mbox{\hyperlink{classRayInvDirection_a093897689117556a3a61eaaf15b543c2}{mInvDirection}}));}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{comment}{//\ Test\ against\ all\ three\ axii\ simultaneously.}}
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t1x\ =\ (inBoundsMinX\ -\/\ originx)\ *\ invdirx;}
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t1y\ =\ (inBoundsMinY\ -\/\ originy)\ *\ invdiry;}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t1z\ =\ (inBoundsMinZ\ -\/\ originz)\ *\ invdirz;}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t2x\ =\ (inBoundsMaxX\ -\/\ originx)\ *\ invdirx;}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t2y\ =\ (inBoundsMaxY\ -\/\ originy)\ *\ invdiry;}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t2z\ =\ (inBoundsMaxZ\ -\/\ originz)\ *\ invdirz;}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//\ Compute\ the\ max\ of\ min(t1,t2)\ and\ the\ min\ of\ max(t1,t2)\ ensuring\ we\ don't}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{comment}{//\ use\ the\ results\ from\ any\ directions\ parallel\ to\ the\ slab.}}
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t\_minx\ =\ \mbox{\hyperlink{classVec8_ace631572dfd1ef87806ef62714d3fd89}{Vec8::sSelect}}(\mbox{\hyperlink{classVec8_ad98f554b3a8aa0bbaccbf6a73e5f6509}{Vec8::sMin}}(t1x,\ t2x),\ flt\_min,\ parallelx);}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t\_miny\ =\ \mbox{\hyperlink{classVec8_ace631572dfd1ef87806ef62714d3fd89}{Vec8::sSelect}}(\mbox{\hyperlink{classVec8_ad98f554b3a8aa0bbaccbf6a73e5f6509}{Vec8::sMin}}(t1y,\ t2y),\ flt\_min,\ parallely);}
\DoxyCodeLine{00047\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t\_minz\ =\ \mbox{\hyperlink{classVec8_ace631572dfd1ef87806ef62714d3fd89}{Vec8::sSelect}}(\mbox{\hyperlink{classVec8_ad98f554b3a8aa0bbaccbf6a73e5f6509}{Vec8::sMin}}(t1z,\ t2z),\ flt\_min,\ parallelz);}
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t\_maxx\ =\ \mbox{\hyperlink{classVec8_ace631572dfd1ef87806ef62714d3fd89}{Vec8::sSelect}}(\mbox{\hyperlink{classVec8_a688b26c034b1554a636581deaa721c08}{Vec8::sMax}}(t1x,\ t2x),\ flt\_max,\ parallelx);}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t\_maxy\ =\ \mbox{\hyperlink{classVec8_ace631572dfd1ef87806ef62714d3fd89}{Vec8::sSelect}}(\mbox{\hyperlink{classVec8_a688b26c034b1554a636581deaa721c08}{Vec8::sMax}}(t1y,\ t2y),\ flt\_max,\ parallely);}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t\_maxz\ =\ \mbox{\hyperlink{classVec8_ace631572dfd1ef87806ef62714d3fd89}{Vec8::sSelect}}(\mbox{\hyperlink{classVec8_a688b26c034b1554a636581deaa721c08}{Vec8::sMax}}(t1z,\ t2z),\ flt\_max,\ parallelz);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{comment}{//\ t\_min.xyz\ =\ maximum(t\_min.x,\ t\_min.y,\ t\_min.z);}}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t\_min\ =\ \mbox{\hyperlink{classVec8_a688b26c034b1554a636581deaa721c08}{Vec8::sMax}}(\mbox{\hyperlink{classVec8_a688b26c034b1554a636581deaa721c08}{Vec8::sMax}}(t\_minx,\ t\_miny),\ t\_minz);}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ t\_max.xyz\ =\ minimum(t\_max.x,\ t\_max.y,\ t\_max.z);}}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classVec8}{Vec8}}\ t\_max\ =\ \mbox{\hyperlink{classVec8_ad98f554b3a8aa0bbaccbf6a73e5f6509}{Vec8::sMin}}(\mbox{\hyperlink{classVec8_ad98f554b3a8aa0bbaccbf6a73e5f6509}{Vec8::sMin}}(t\_maxx,\ t\_maxy),\ t\_maxz);}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{comment}{//\ if\ (t\_min\ >\ t\_max)\ return\ FLT\_MAX;}}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{classUVec8}{UVec8}}\ no\_intersection\ =\ \mbox{\hyperlink{classVec8_aa38a759ebef47cb63db5adc0f569d1c0}{Vec8::sGreater}}(t\_min,\ t\_max);}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ if\ (t\_max\ <\ 0.0f)\ return\ FLT\_MAX;}}
\DoxyCodeLine{00062\ \ \ \ \ no\_intersection\ =\ \mbox{\hyperlink{classUVec8_abaa2dd18e4ff3fee6465bb322733e7e6}{UVec8::sOr}}(no\_intersection,\ \mbox{\hyperlink{classVec8_a239c0570785757c04ada2de8164df6f9}{Vec8::sLess}}(t\_max,\ \mbox{\hyperlink{classVec8_abb275faf149d6f691487dcd3055a0898}{Vec8::sZero}}()));}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ if\ bounds\ are\ invalid\ return\ FLOAT\_MAX;}}
\DoxyCodeLine{00065\ \ \ \ \ \mbox{\hyperlink{classUVec8}{UVec8}}\ bounds\_invalid\ =\ \mbox{\hyperlink{classUVec8_abaa2dd18e4ff3fee6465bb322733e7e6}{UVec8::sOr}}(\mbox{\hyperlink{classUVec8_abaa2dd18e4ff3fee6465bb322733e7e6}{UVec8::sOr}}(\mbox{\hyperlink{classVec8_aa38a759ebef47cb63db5adc0f569d1c0}{Vec8::sGreater}}(inBoundsMinX,\ inBoundsMaxX),\ \mbox{\hyperlink{classVec8_aa38a759ebef47cb63db5adc0f569d1c0}{Vec8::sGreater}}(inBoundsMinY,\ inBoundsMaxY)),\ \mbox{\hyperlink{classVec8_aa38a759ebef47cb63db5adc0f569d1c0}{Vec8::sGreater}}(inBoundsMinZ,\ inBoundsMaxZ));}
\DoxyCodeLine{00066\ \ \ \ \ no\_intersection\ =\ \mbox{\hyperlink{classUVec8_abaa2dd18e4ff3fee6465bb322733e7e6}{UVec8::sOr}}(no\_intersection,\ bounds\_invalid);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ if\ (inInvDirection.mIsParallel\ \&\&\ !(Min\ <=\ inOrigin\ \&\&\ inOrigin\ <=\ Max))\ return\ FLT\_MAX;\ else\ return\ t\_min;}}
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{classUVec8}{UVec8}}\ no\_parallel\_overlapx\ =\ \mbox{\hyperlink{classUVec8_a50253d7ab7872642a1cbe8c200759432}{UVec8::sAnd}}(parallelx,\ \mbox{\hyperlink{classUVec8_abaa2dd18e4ff3fee6465bb322733e7e6}{UVec8::sOr}}(\mbox{\hyperlink{classVec8_a239c0570785757c04ada2de8164df6f9}{Vec8::sLess}}(originx,\ inBoundsMinX),\ \mbox{\hyperlink{classVec8_aa38a759ebef47cb63db5adc0f569d1c0}{Vec8::sGreater}}(originx,\ inBoundsMaxX)));}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{classUVec8}{UVec8}}\ no\_parallel\_overlapy\ =\ \mbox{\hyperlink{classUVec8_a50253d7ab7872642a1cbe8c200759432}{UVec8::sAnd}}(parallely,\ \mbox{\hyperlink{classUVec8_abaa2dd18e4ff3fee6465bb322733e7e6}{UVec8::sOr}}(\mbox{\hyperlink{classVec8_a239c0570785757c04ada2de8164df6f9}{Vec8::sLess}}(originy,\ inBoundsMinY),\ \mbox{\hyperlink{classVec8_aa38a759ebef47cb63db5adc0f569d1c0}{Vec8::sGreater}}(originy,\ inBoundsMaxY)));}
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{classUVec8}{UVec8}}\ no\_parallel\_overlapz\ =\ \mbox{\hyperlink{classUVec8_a50253d7ab7872642a1cbe8c200759432}{UVec8::sAnd}}(parallelz,\ \mbox{\hyperlink{classUVec8_abaa2dd18e4ff3fee6465bb322733e7e6}{UVec8::sOr}}(\mbox{\hyperlink{classVec8_a239c0570785757c04ada2de8164df6f9}{Vec8::sLess}}(originz,\ inBoundsMinZ),\ \mbox{\hyperlink{classVec8_aa38a759ebef47cb63db5adc0f569d1c0}{Vec8::sGreater}}(originz,\ inBoundsMaxZ)));}
\DoxyCodeLine{00072\ \ \ \ \ no\_intersection\ =\ \mbox{\hyperlink{classUVec8_abaa2dd18e4ff3fee6465bb322733e7e6}{UVec8::sOr}}(no\_intersection,\ \mbox{\hyperlink{classUVec8_abaa2dd18e4ff3fee6465bb322733e7e6}{UVec8::sOr}}(\mbox{\hyperlink{classUVec8_abaa2dd18e4ff3fee6465bb322733e7e6}{UVec8::sOr}}(no\_parallel\_overlapx,\ no\_parallel\_overlapy),\ no\_parallel\_overlapz));}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classVec8_ace631572dfd1ef87806ef62714d3fd89}{Vec8::sSelect}}(t\_min,\ flt\_max,\ no\_intersection);}
\DoxyCodeLine{00074\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ JPH\_NAMESPACE\_END}

\end{DoxyCode}
