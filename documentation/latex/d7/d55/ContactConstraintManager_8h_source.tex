\doxysection{Contact\+Constraint\+Manager.\+h}
\hypertarget{ContactConstraintManager_8h_source}{}\label{ContactConstraintManager_8h_source}\index{includes/jolt/Physics/Constraints/ContactConstraintManager.h@{includes/jolt/Physics/Constraints/ContactConstraintManager.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Jolt\ Physics\ Library\ (https://github.com/jrouwe/JoltPhysics)}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ SPDX-\/FileCopyrightText:\ 2021\ Jorrit\ Rouwe}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ MIT}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <Jolt/Core/StaticArray.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <Jolt/Core/LockFreeHashMap.h>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/EPhysicsUpdateError.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Body/BodyPair.h>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Collision/Shape/SubShapeIDPair.h>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Collision/ManifoldBetweenTwoFaces.h>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Constraints/ConstraintPart/AxisConstraintPart.h>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Constraints/ConstraintPart/DualAxisConstraintPart.h>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <Jolt/Core/HashCombine.h>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <Jolt/Core/NonCopyable.h>}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ JPH\_SUPPRESS\_WARNINGS\_STD\_BEGIN}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00020\ JPH\_SUPPRESS\_WARNINGS\_STD\_END}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ JPH\_NAMESPACE\_BEGIN}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structPhysicsSettings}{PhysicsSettings}};}
\DoxyCodeLine{00025\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPhysicsUpdateContext}{PhysicsUpdateContext}};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{class\ }JPH\_EXPORT\ \mbox{\hyperlink{classContactConstraintManager}{ContactConstraintManager}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classNonCopyable}{NonCopyable}}}
\DoxyCodeLine{00028\ \{}
\DoxyCodeLine{00029\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00030\ \ \ \ \ JPH\_OVERRIDE\_NEW\_DELETE}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{explicit}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a2a8c670a72926f354448dbbf557bfe52}{ContactConstraintManager}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structPhysicsSettings}{PhysicsSettings}}\ \&inPhysicsSettings);}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager}{\string~ContactConstraintManager}}();}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a8225433cfdf9f63fa149fdac25e0a263}{Init}}(uint\ inMaxBodyPairs,\ uint\ inMaxContactConstraints);}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_acf262d3235f4eea01cd2aa8a9a3bfe83}{SetContactListener}}(\mbox{\hyperlink{classContactListener}{ContactListener}}\ *inListener)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ mContactListener\ =\ inListener;\ \}}
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{classContactListener}{ContactListener}}\ *\ \ \ \ \ \ \ \ \ \ \ \ GetContactListener()\textcolor{keyword}{\ const\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{\ \textcolor{keywordflow}{return}\ mContactListener;\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classContactConstraintManager_ad0b40a0f57d994f32b069744541fce56}{CombineFunction}}\ =\ float\ (*)(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeID}{SubShapeID}}\ \&inSubShapeID1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeID}{SubShapeID}}\ \&inSubShapeID2);}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_aae82d70c097d2c5a514faebd73ee4873}{SetCombineFriction}}(\mbox{\hyperlink{classContactConstraintManager_ad0b40a0f57d994f32b069744541fce56}{CombineFunction}}\ inCombineFriction)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ mCombineFriction\ =\ inCombineFriction;\ \}}
\DoxyCodeLine{00053\ \ \ \ \ CombineFunction\ \ \ \ \ \ \ \ \ \ \ \ \ GetCombineFriction()\textcolor{keyword}{\ const\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{\ \textcolor{keywordflow}{return}\ mCombineFriction;\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_ae324c787f7d2ab43ed3adb13d3e7f24e}{SetCombineRestitution}}(\mbox{\hyperlink{classContactConstraintManager_ad0b40a0f57d994f32b069744541fce56}{CombineFunction}}\ inCombineRestitution)\ \ \ \ \ \ \ \ \ \{\ mCombineRestitution\ =\ inCombineRestitution;\ \}}
\DoxyCodeLine{00058\ \ \ \ \ CombineFunction\ \ \ \ \ \ \ \ \ \ \ \ \ GetCombineRestitution()\textcolor{keyword}{\ const\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{\ \textcolor{keywordflow}{return}\ mCombineRestitution;\ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00061\ \ \ \ \ uint32\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a50938b07679f8a97fff61e98a209c87c}{GetMaxConstraints}}()\textcolor{keyword}{\ const\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{\ \textcolor{keywordflow}{return}\ mMaxConstraints;\ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keyword}{inline}\ ValidateResult\ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a4abd47f225871f02cd3a0c964106439d}{ValidateContactPoint}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \mbox{\hyperlink{classVec3}{RVec3Arg}}\ inBaseOffset,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classCollideShapeResult}{CollideShapeResult}}\ \&inCollisionResult)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00065\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (mContactListener\ ==\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ValidateResult::AcceptAllContactsForThisBodyPair;}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ mContactListener-\/>OnContactValidate(inBody1,\ inBody2,\ inBaseOffset,\ inCollisionResult);}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a56fbdeb8c26a568919d431973830111a}{PrepareConstraintBuffer}}(\mbox{\hyperlink{classPhysicsUpdateContext}{PhysicsUpdateContext}}\ *inContext);}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ MaxContactPoints\ =\ 4;}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classContactConstraintManager_1_1ContactAllocator}{ContactAllocator}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classLFHMAllocatorContext}{LFHMAllocatorContext}}}
\DoxyCodeLine{00080\ \ \ \ \ \{}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classLFHMAllocatorContext_a4937e72fe7c08c45687b9deb3c3dba32}{LFHMAllocatorContext::LFHMAllocatorContext}};}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ uint\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mNumBodyPairs\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ uint\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mNumManifolds\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ EPhysicsUpdateError\ \ \ \ \ mErrors\ =\ EPhysicsUpdateError::None;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00087\ \ \ \ \ \};}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00090\ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_1_1ContactAllocator}{ContactAllocator}}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_ae52944ca4945e6255a0f31794cf2aed5}{GetContactAllocator}}()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ \textcolor{keywordflow}{return}\ mCache[mCacheWriteIdx].GetContactAllocator();\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_ac438b9748b641a504658e700f0e43305}{GetContactsFromCache}}(\mbox{\hyperlink{classContactConstraintManager_1_1ContactAllocator}{ContactAllocator}}\ \&ioContactAllocator,\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keywordtype}{bool}\ \&outPairHandled,\ \textcolor{keywordtype}{bool}\ \&outConstraintCreated);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classContactConstraintManager_a5d7bb30c442d466ba19b92f8b5ffb754}{BodyPairHandle}}\ =\ \textcolor{keywordtype}{void}\ *;}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00102\ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a5d7bb30c442d466ba19b92f8b5ffb754}{BodyPairHandle}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_aaa6427e8042739b370e9145d5efc8644}{AddBodyPair}}(\mbox{\hyperlink{classContactConstraintManager_1_1ContactAllocator}{ContactAllocator}}\ \&ioContactAllocator,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2);}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_ad54fa2fc8b0cbc1cd6cb5c5846e781be}{AddContactConstraint}}(\mbox{\hyperlink{classContactConstraintManager_1_1ContactAllocator}{ContactAllocator}}\ \&ioContactAllocator,\ \mbox{\hyperlink{classContactConstraintManager_a5d7bb30c442d466ba19b92f8b5ffb754}{BodyPairHandle}}\ inBodyPair,\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classContactManifold}{ContactManifold}}\ \&inManifold);}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a3b9cf92154e49319463950b66e692f56}{FinalizeContactCacheAndCallContactPointRemovedCallbacks}}(uint\ inExpectedNumBodyPairs,\ uint\ inExpectedNumManifolds);}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a46532b93dfd2edb0b45be8e5af4a7111}{WereBodiesInContact}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBodyID}{BodyID}}\ \&inBody1ID,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBodyID}{BodyID}}\ \&inBody2ID)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00158\ \ \ \ \ uint32\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_aad540014a518a8f5942842e1a347447f}{GetNumConstraints}}()\textcolor{keyword}{\ const\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{\ \textcolor{keywordflow}{return}\ min<uint32>(mNumConstraints,\ mMaxConstraints);\ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_af45077f4de2c4ec57ebecf450e9b88f0}{SortContacts}}(uint32\ *inConstraintIdxBegin,\ uint32\ *inConstraintIdxEnd)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a81dea14ac1bd33f74a07085690095403}{GetAffectedBodies}}(uint32\ inConstraintIdx,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ *\&outBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ *\&outBody2)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00165\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ ContactConstraint\ \&constraint\ =\ mConstraints[inConstraintIdx];}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ outBody1\ =\ constraint.mBody1;}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ outBody2\ =\ constraint.mBody2;}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ MotionPropertiesCallback>}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_ad6622dfe6d7cdd1b109cac47ea1adae7}{WarmStartVelocityConstraints}}(\textcolor{keyword}{const}\ uint32\ *inConstraintIdxBegin,\ \textcolor{keyword}{const}\ uint32\ *inConstraintIdxEnd,\ \textcolor{keywordtype}{float}\ inWarmStartImpulseRatio,\ MotionPropertiesCallback\ \&ioCallback);}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a6be90138088b291b35baed7974887729}{SolveVelocityConstraints}}(\textcolor{keyword}{const}\ uint32\ *inConstraintIdxBegin,\ \textcolor{keyword}{const}\ uint32\ *inConstraintIdxEnd);}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_ac825a74176ec59d9e2995e67fc8d43c1}{StoreAppliedImpulses}}(\textcolor{keyword}{const}\ uint32\ *inConstraintIdxBegin,\ \textcolor{keyword}{const}\ uint32\ *inConstraintIdxEnd)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a45d8cb39a9e2a3644149661f4e01d2bd}{SolvePositionConstraints}}(\textcolor{keyword}{const}\ uint32\ *inConstraintIdxBegin,\ \textcolor{keyword}{const}\ uint32\ *inConstraintIdxEnd);}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a3ede12b173e9c63f9421176573661b27}{RecycleConstraintBuffer}}();}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a08550dcab7e85e7f82fcc0c7658baa32}{FinishConstraintBuffer}}();}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a95c132f19384bb01d869331e9faf3757}{OnCCDContactAdded}}(\mbox{\hyperlink{classContactConstraintManager_1_1ContactAllocator}{ContactAllocator}}\ \&ioContactAllocator,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classContactManifold}{ContactManifold}}\ \&inManifold,\ \mbox{\hyperlink{classContactSettings}{ContactSettings}}\ \&outSettings);}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \textcolor{preprocessor}{\#ifdef\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{comment}{//\ Drawing\ properties}}
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sDrawContactPoint;}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sDrawSupportingFaces;}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sDrawContactPointReduction;}
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sDrawContactManifolds;}
\DoxyCodeLine{00248\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a09b5daefc89dca1489be3afa077cfcc0}{SaveState}}(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classStateRecorderFilter}{StateRecorderFilter}}\ *inFilter)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classContactConstraintManager_a2bc5cc8b8d36cf641dc4217fed0e63f6}{RestoreState}}(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream);}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keyword}{class\ }CachedContactPoint}
\DoxyCodeLine{00259\ \ \ \ \ \{}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SaveState(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ RestoreState(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream);}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mPosition1;}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mPosition2;}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mNonPenetrationLambda;}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVector}{Vector<2>}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ mFrictionLambda;}
\DoxyCodeLine{00273\ \ \ \ \ \};}
\DoxyCodeLine{00274\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(CachedContactPoint)\ ==\ 36,\ \textcolor{stringliteral}{"{}Unexpected\ size"{}});}
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{alignof}(CachedContactPoint)\ ==\ 4,\ \textcolor{stringliteral}{"{}Assuming\ 4\ byte\ aligned"{}});}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keyword}{class\ }CachedManifold}
\DoxyCodeLine{00280\ \ \ \ \ \{}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ \ \ sGetRequiredExtraSize(\textcolor{keywordtype}{int}\ inNumContactPoints)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ \textcolor{keywordflow}{return}\ max(0,\ inNumContactPoints\ -\/\ 1)\ *\ \textcolor{keyword}{sizeof}(CachedContactPoint);\ \}}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ \ \ sGetRequiredTotalSize(\textcolor{keywordtype}{int}\ inNumContactPoints)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{sizeof}(CachedManifold)\ +\ sGetRequiredExtraSize(inNumContactPoints);\ \}}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SaveState(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ RestoreState(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream);}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ uint32\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mNextWithSameBodyPair;}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mContactNormal;}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum\ class}\ EFlags\ :\ uint16}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ ContactPersisted\ \ \ \ =\ 1,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ CCDContact\ \ \ \ \ \ \ \ \ \ =\ 2\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{keyword}{mutable}\ atomic<uint16>\ \ mFlags\ \{\ 0\ \};}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ uint16\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mNumContactPoints;}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ CachedContactPoint\ \ \ \ \ \ mContactPoints[1];}
\DoxyCodeLine{00314\ \ \ \ \ \};}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(CachedManifold)\ ==\ 56,\ \textcolor{stringliteral}{"{}This\ structure\ is\ expect\ to\ not\ contain\ any\ waste\ due\ to\ alignment"{}});}
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{alignof}(CachedManifold)\ ==\ 4,\ \textcolor{stringliteral}{"{}Assuming\ 4\ byte\ aligned"{}});}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keyword}{using\ }ManifoldMap\ =\ \mbox{\hyperlink{classLockFreeHashMap}{LockFreeHashMap<SubShapeIDPair,\ CachedManifold>}};}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keyword}{using\ }MKeyValue\ =\ ManifoldMap::KeyValue;}
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keyword}{using\ }MKVAndCreated\ =\ pair<MKeyValue\ *,\ bool>;}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keyword}{class\ }CachedBodyPair}
\DoxyCodeLine{00326\ \ \ \ \ \{}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SaveState(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ RestoreState(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream);}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mDeltaPosition;}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mDeltaRotation;}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ uint32\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mFirstCachedManifold;}
\DoxyCodeLine{00342\ \ \ \ \ \};}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(CachedBodyPair)\ ==\ 28,\ \textcolor{stringliteral}{"{}Unexpected\ size"{}});}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{alignof}(CachedBodyPair)\ ==\ 4,\ \textcolor{stringliteral}{"{}Assuming\ 4\ byte\ aligned"{}});}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keyword}{using\ }BodyPairMap\ =\ \mbox{\hyperlink{classLockFreeHashMap}{LockFreeHashMap<BodyPair,\ CachedBodyPair>}};}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keyword}{using\ }BPKeyValue\ =\ BodyPairMap::KeyValue;}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keyword}{class\ }ManifoldCache}
\DoxyCodeLine{00353\ \ \ \ \ \{}
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Init(uint\ inMaxBodyPairs,\ uint\ inMaxContactConstraints,\ uint\ inCachedManifoldsSize);}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Clear();}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Prepare(uint\ inExpectedNumBodyPairs,\ uint\ inExpectedNumManifolds);}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ ContactAllocator\ \ \ \ \ \ \ \ GetContactAllocator()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ \textcolor{keywordflow}{return}\ ContactAllocator(mAllocator,\ cAllocatorBlockSize);\ \}}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MKeyValue\ *\ \ \ \ \ \ \ Find(\textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDPair}{SubShapeIDPair}}\ \&inKey,\ uint64\ inKeyHash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ MKeyValue\ *\ \ \ \ \ \ \ \ \ \ \ \ \ Create(ContactAllocator\ \&ioContactAllocator,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDPair}{SubShapeIDPair}}\ \&inKey,\ uint64\ inKeyHash,\ \textcolor{keywordtype}{int}\ inNumContactPoints);}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ MKVAndCreated\ \ \ \ \ \ \ \ \ \ \ FindOrCreate(ContactAllocator\ \&ioContactAllocator,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDPair}{SubShapeIDPair}}\ \&inKey,\ uint64\ inKeyHash,\ \textcolor{keywordtype}{int}\ inNumContactPoints);}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ uint32\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ToHandle(\textcolor{keyword}{const}\ MKeyValue\ *inKeyValue)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MKeyValue\ *\ \ \ \ \ \ \ FromHandle(uint32\ inHandle)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ BPKeyValue\ *\ \ \ \ \ \ Find(\textcolor{keyword}{const}\ \mbox{\hyperlink{structBodyPair}{BodyPair}}\ \&inKey,\ uint64\ inKeyHash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ BPKeyValue\ *\ \ \ \ \ \ \ \ \ \ \ \ Create(ContactAllocator\ \&ioContactAllocator,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structBodyPair}{BodyPair}}\ \&inKey,\ uint64\ inKeyHash);}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetAllBodyPairsSorted(Array<const\ BPKeyValue\ *>\ \&outAll)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetAllManifoldsSorted(\textcolor{keyword}{const}\ CachedBodyPair\ \&inBodyPair,\ Array<const\ MKeyValue\ *>\ \&outAll)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetAllCCDManifoldsSorted(Array<const\ MKeyValue\ *>\ \&outAll)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ContactPointRemovedCallbacks(\mbox{\hyperlink{classContactListener}{ContactListener}}\ *inListener);}
\DoxyCodeLine{00382\ }
\DoxyCodeLine{00383\ \textcolor{preprocessor}{\#ifdef\ JPH\_ENABLE\_ASSERTS}}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ uint\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetNumManifolds()\textcolor{keyword}{\ const\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{\ \textcolor{keywordflow}{return}\ mCachedManifolds.GetNumKeyValues();\ \}}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ uint\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetNumBodyPairs()\textcolor{keyword}{\ const\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{\ \textcolor{keywordflow}{return}\ mCachedBodyPairs.GetNumKeyValues();\ \}}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Finalize();}
\DoxyCodeLine{00392\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SaveState(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classStateRecorderFilter}{StateRecorderFilter}}\ *inFilter)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ RestoreState(\textcolor{keyword}{const}\ ManifoldCache\ \&inReadCache,\ \mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream);}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint32\ cAllocatorBlockSize\ =\ 4096;}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classLFHMAllocator}{LFHMAllocator}}\ \ \ \ \ \ \ \ \ \ mAllocator;}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ ManifoldMap\ \ \ \ \ \ \ \ \ \ \ \ \ mCachedManifolds\ \{\ mAllocator\ \};}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ BodyPairMap\ \ \ \ \ \ \ \ \ \ \ \ \ mCachedBodyPairs\ \{\ mAllocator\ \};}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \textcolor{preprocessor}{\#ifdef\ JPH\_ENABLE\_ASSERTS}}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mIsFinalized\ =\ \textcolor{keyword}{false};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00413\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00414\ \ \ \ \ \};}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \ \ ManifoldCache\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mCache[2];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mCacheWriteIdx\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keyword}{class\ }WorldContactPoint}
\DoxyCodeLine{00421\ \ \ \ \ \{}
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CalculateNonPenetrationConstraintProperties(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keywordtype}{float}\ inInvMass1,\ \textcolor{keywordtype}{float}\ inInvInertiaScale1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \textcolor{keywordtype}{float}\ inInvInertiaScale2,\ \mbox{\hyperlink{classVec3}{RVec3Arg}}\ inWorldSpacePosition1,\ \mbox{\hyperlink{classVec3}{RVec3Arg}}\ inWorldSpacePosition2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceNormal);}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ JPH\_INLINE\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ TemplatedCalculateFrictionAndNonPenetrationConstraintProperties(\textcolor{keywordtype}{float}\ inDeltaTime,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keywordtype}{float}\ inInvM1,\ \textcolor{keywordtype}{float}\ inInvM2,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inInvI1,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inInvI2,\ \mbox{\hyperlink{classVec3}{RVec3Arg}}\ inWorldSpacePosition1,\ \mbox{\hyperlink{classVec3}{RVec3Arg}}\ inWorldSpacePosition2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceNormal,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceTangent1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceTangent2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classContactSettings}{ContactSettings}}\ \&inSettings,\ \textcolor{keywordtype}{float}\ inMinVelocityForRestitution);}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart}{AxisConstraintPart}}\ \ \ \ \ \ \ \ mNonPenetrationConstraint;}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart}{AxisConstraintPart}}\ \ \ \ \ \ \ \ mFrictionConstraint1;}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart}{AxisConstraintPart}}\ \ \ \ \ \ \ \ mFrictionConstraint2;}
\DoxyCodeLine{00433\ }
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ CachedContactPoint\ *\ \ \ \ mContactPoint;}
\DoxyCodeLine{00436\ \ \ \ \ \};}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \textcolor{keyword}{using\ }WorldContactPoints\ =\ \mbox{\hyperlink{classStaticArray}{StaticArray<WorldContactPoint,\ MaxContactPoints>}};}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00441\ \ \ \ \ \textcolor{keyword}{class\ }ContactConstraint}
\DoxyCodeLine{00442\ \ \ \ \ \{}
\DoxyCodeLine{00443\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00444\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Draw(\mbox{\hyperlink{classDebugRenderer}{DebugRenderer}}\ *inRenderer,\ \mbox{\hyperlink{classColor}{ColorArg}}\ inManifoldColor)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00447\ \textcolor{preprocessor}{\ \ \ \ \#endif\ }\textcolor{comment}{//\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ JPH\_INLINE\ \mbox{\hyperlink{classVec3}{Vec3}}\ \ \ \ \ \ \ \ \ GetWorldSpaceNormal()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00451\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classVec3_aea30fe731618ffa249ecdcba2c66ab4e}{Vec3::sLoadFloat3Unsafe}}(mWorldSpaceNormal);}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ JPH\_INLINE\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ GetTangents(\mbox{\hyperlink{classVec3}{Vec3}}\ \&outTangent1,\ \mbox{\hyperlink{classVec3}{Vec3}}\ \&outTangent2)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00457\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ ws\_normal\ =\ GetWorldSpaceNormal();}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ outTangent1\ =\ ws\_normal.\mbox{\hyperlink{classVec3_a24a96972fdbe04ae9a3e340fd4c39b81}{GetNormalizedPerpendicular}}();}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ outTangent2\ =\ ws\_normal.\mbox{\hyperlink{classVec3_a224811af391ccfd1e05282eda22d1de8}{Cross}}(outTangent1);}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00462\ }
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classBody}{Body}}\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mBody1;}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classBody}{Body}}\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mBody2;}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ uint64\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mSortKey;}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mWorldSpaceNormal;}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mCombinedFriction;}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mInvMass1;}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mInvInertiaScale1;}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mInvMass2;}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mInvInertiaScale2;}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ WorldContactPoints\ \ \ \ \ \ mContactPoints;}
\DoxyCodeLine{00473\ \ \ \ \ \};}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00476\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00477\ \ \ \ \ JPH\_INLINE\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ TemplatedCalculateFrictionAndNonPenetrationConstraintProperties(ContactConstraint\ \&ioConstraint,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classContactSettings}{ContactSettings}}\ \&inSettings,\ \textcolor{keywordtype}{float}\ inDeltaTime,\ \mbox{\hyperlink{classMat44}{RMat44Arg}}\ inTransformBody1,\ \mbox{\hyperlink{classMat44}{RMat44Arg}}\ inTransformBody2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2);}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00480\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CalculateFrictionAndNonPenetrationConstraintProperties(ContactConstraint\ \&ioConstraint,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classContactSettings}{ContactSettings}}\ \&inSettings,\ \textcolor{keywordtype}{float}\ inDeltaTime,\ \mbox{\hyperlink{classMat44}{RMat44Arg}}\ inTransformBody1,\ \mbox{\hyperlink{classMat44}{RMat44Arg}}\ inTransformBody2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2);}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00483\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00484\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TemplatedAddContactConstraint(ContactAllocator\ \&ioContactAllocator,\ BodyPairHandle\ inBodyPairHandle,\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classContactManifold}{ContactManifold}}\ \&inManifold);}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00487\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00488\ \ \ \ \ JPH\_INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ sWarmStartConstraint(ContactConstraint\ \&ioConstraint,\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties1,\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties2,\ \textcolor{keywordtype}{float}\ inWarmStartImpulseRatio);}
\DoxyCodeLine{00489\ }
\DoxyCodeLine{00491\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00492\ \ \ \ \ JPH\_INLINE\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ sSolveVelocityConstraint(ContactConstraint\ \&ioConstraint,\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties1,\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties2);}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00495\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structPhysicsSettings}{PhysicsSettings}}\ \&\ \ \ \ \ \ mPhysicsSettings;}
\DoxyCodeLine{00496\ }
\DoxyCodeLine{00498\ \ \ \ \ \mbox{\hyperlink{classContactListener}{ContactListener}}\ *\ \ \ \ \ \ \ \ \ \ \ \ mContactListener\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00501\ \ \ \ \ CombineFunction\ \ \ \ \ \ \ \ \ \ \ \ \ mCombineFriction\ =\ [](\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeID}{SubShapeID}}\ \&,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeID}{SubShapeID}}\ \&)\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{group__FixedMath_ga7a9d7e9855b45a3b4103632a47ccd6f4}{sqrt}}(inBody1.\mbox{\hyperlink{classBody_abb35a0778672e9f3622d8cfa93b428b3}{GetFriction}}()\ *\ inBody2.GetFriction());\ \};}
\DoxyCodeLine{00502\ \ \ \ \ CombineFunction\ \ \ \ \ \ \ \ \ \ \ \ \ mCombineRestitution\ =\ [](\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeID}{SubShapeID}}\ \&,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeID}{SubShapeID}}\ \&)\ \{\ \textcolor{keywordflow}{return}\ max(inBody1.\mbox{\hyperlink{classBody_a5657cc63a5fd9ee1e4a8408ac51affcc}{GetRestitution}}(),\ inBody2.GetRestitution());\ \};}
\DoxyCodeLine{00503\ }
\DoxyCodeLine{00505\ \ \ \ \ ContactConstraint\ *\ \ \ \ \ \ \ \ \ mConstraints\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00506\ \ \ \ \ uint32\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mMaxConstraints\ =\ 0;}
\DoxyCodeLine{00507\ \ \ \ \ atomic<uint32>\ \ \ \ \ \ \ \ \ \ \ \ \ \ mNumConstraints\ \{\ 0\ \};}
\DoxyCodeLine{00508\ }
\DoxyCodeLine{00510\ \ \ \ \ \mbox{\hyperlink{classPhysicsUpdateContext}{PhysicsUpdateContext}}\ *\ \ \ \ \ \ mUpdateContext;}
\DoxyCodeLine{00511\ \};}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ JPH\_NAMESPACE\_END}

\end{DoxyCode}
