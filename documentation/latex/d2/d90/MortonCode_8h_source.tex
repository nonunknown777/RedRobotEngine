\doxysection{Morton\+Code.\+h}
\hypertarget{MortonCode_8h_source}{}\label{MortonCode_8h_source}\index{includes/jolt/Geometry/MortonCode.h@{includes/jolt/Geometry/MortonCode.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Jolt\ Physics\ Library\ (https://github.com/jrouwe/JoltPhysics)}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ SPDX-\/FileCopyrightText:\ 2021\ Jorrit\ Rouwe}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ MIT}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <Jolt/Geometry/AABox.h>}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ JPH\_NAMESPACE\_BEGIN}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classMortonCode}{MortonCode}}}
\DoxyCodeLine{00012\ \{}
\DoxyCodeLine{00013\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keyword}{static}\ uint32\ \mbox{\hyperlink{classMortonCode_a84095b33bd99957d29c492f9e8a2f2c4}{sExpandBits}}(\textcolor{keywordtype}{float}\ inV)}
\DoxyCodeLine{00017\ \ \ \ \ \{}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ JPH\_ASSERT(inV\ >=\ 0.0f\ \&\&\ inV\ <=\ 1.0f);}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ uint32\ v\ =\ uint32(inV\ *\ 1023.0f\ +\ 0.5f);}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ JPH\_ASSERT(v\ <\ 1024);}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ v\ =\ (v\ *\ 0x00010001u)\ \&\ 0xFF0000FFu;}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ v\ =\ (v\ *\ 0x00000101u)\ \&\ 0x0F00F00Fu;}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ v\ =\ (v\ *\ 0x00000011u)\ \&\ 0xC30C30C3u;}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ v\ =\ (v\ *\ 0x00000005u)\ \&\ 0x49249249u;}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ v;}
\DoxyCodeLine{00026\ \ \ \ \ \}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{static}\ uint32\ \mbox{\hyperlink{classMortonCode_ac960ce088e48d87bb6957434cbf56115}{sGetMortonCode}}(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inVector,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classAABox}{AABox}}\ \&inVectorBounds)}
\DoxyCodeLine{00030\ \ \ \ \ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Convert\ to\ 10\ bit\ fixed\ point}}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ scaled\ =\ (inVector\ -\/\ inVectorBounds.\mbox{\hyperlink{classAABox_a4082e61b6401d675d89d6b4944fd7911}{mMin}})\ /\ inVectorBounds.\mbox{\hyperlink{classAABox_a376b8319c2ac3e843b1dfac1b8288e94}{GetSize}}();}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ uint\ x\ =\ \mbox{\hyperlink{classMortonCode_a84095b33bd99957d29c492f9e8a2f2c4}{sExpandBits}}(scaled.\mbox{\hyperlink{classVec3_a284e29f161ae7709a934f402bd2a848c}{GetX}}());}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ uint\ y\ =\ \mbox{\hyperlink{classMortonCode_a84095b33bd99957d29c492f9e8a2f2c4}{sExpandBits}}(scaled.GetY());}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ uint\ z\ =\ \mbox{\hyperlink{classMortonCode_a84095b33bd99957d29c492f9e8a2f2c4}{sExpandBits}}(scaled.GetZ());}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (x\ <<\ 2)\ +\ (y\ <<\ 1)\ +\ z;}
\DoxyCodeLine{00037\ \ \ \ \ \}}
\DoxyCodeLine{00038\ \};}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ JPH\_NAMESPACE\_END}

\end{DoxyCode}
