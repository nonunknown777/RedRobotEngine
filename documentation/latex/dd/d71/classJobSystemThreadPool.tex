\doxysection{Job\+System\+Thread\+Pool Class Reference}
\hypertarget{classJobSystemThreadPool}{}\label{classJobSystemThreadPool}\index{JobSystemThreadPool@{JobSystemThreadPool}}


{\ttfamily \#include $<$Job\+System\+Thread\+Pool.\+h$>$}



Inheritance diagram for Job\+System\+Thread\+Pool\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{dd/de8/classJobSystemThreadPool__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Job\+System\+Thread\+Pool\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=550pt]{d0/d83/classJobSystemThreadPool__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
JPH\+\_\+\+OVERRIDE\+\_\+\+NEW\+\_\+\+DELETE \mbox{\hyperlink{classJobSystemThreadPool_a646665a28d2b4fd168ed3f283efc67c0}{Job\+System\+Thread\+Pool}} (uint in\+Max\+Jobs, uint in\+Max\+Barriers, int in\+Num\+Threads=-\/1)
\item 
void \mbox{\hyperlink{classJobSystemThreadPool_a4dc159b1f4b99e398cc5d27262c555f1}{Init}} (uint in\+Max\+Jobs, uint in\+Max\+Barriers, int in\+Num\+Threads=-\/1)
\item 
virtual int \mbox{\hyperlink{classJobSystemThreadPool_ad9d1ead2ffc5ab1ec9aa6e06948c98ac}{Get\+Max\+Concurrency}} () const override
\begin{DoxyCompactList}\small\item\em Get maximum number of concurrently executing jobs. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classJobSystem_1_1JobHandle}{Job\+Handle}} \mbox{\hyperlink{classJobSystemThreadPool_aaca24192ded59a7ade7e655a495f9d48}{Create\+Job}} (const char \texorpdfstring{$\ast$}{*}in\+Name, \mbox{\hyperlink{classColor}{Color\+Arg}} in\+Color, const \mbox{\hyperlink{classJobSystem_ae31ef61a509934f03d4705aec19c61f5}{Job\+Function}} \&in\+Job\+Function, uint32 in\+Num\+Dependencies=0) override
\item 
\Hypertarget{classJobSystemThreadPool_a4b7f3271d9bd98562563d4dfcaa40c9d}\label{classJobSystemThreadPool_a4b7f3271d9bd98562563d4dfcaa40c9d} 
void {\bfseries Set\+Num\+Threads} (int in\+Num\+Threads)
\begin{DoxyCompactList}\small\item\em Change the max concurrency after initialization. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classJobSystemWithBarrier}{Job\+System\+With\+Barrier}}}
\begin{DoxyCompactItemize}
\item 
JPH\+\_\+\+OVERRIDE\+\_\+\+NEW\+\_\+\+DELETE \mbox{\hyperlink{classJobSystemWithBarrier_a19bfc546ae2d683fc25ae489574ae209}{Job\+System\+With\+Barrier}} (uint in\+Max\+Barriers)
\item 
void \mbox{\hyperlink{classJobSystemWithBarrier_a07c53b2eecf2984531affd3867815214}{Init}} (uint in\+Max\+Barriers)
\item 
virtual \mbox{\hyperlink{classJobSystem_1_1Barrier}{Barrier}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classJobSystemWithBarrier_aca991a2fb322f5d76a5ab8bd1056eba4}{Create\+Barrier}} () override
\begin{DoxyCompactList}\small\item\em Create a new barrier, used to wait on jobs. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classJobSystemWithBarrier_ac79c4e42c23342f1ce2efe4abdc4303f}{Destroy\+Barrier}} (\mbox{\hyperlink{classJobSystem_1_1Barrier}{Barrier}} \texorpdfstring{$\ast$}{*}in\+Barrier) override
\begin{DoxyCompactList}\small\item\em Destroy a barrier when it is no longer used. The barrier should be empty at this point. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classJobSystemWithBarrier_a6a23958171f0eb1f0ccfc080cfe95256}{Wait\+For\+Jobs}} (\mbox{\hyperlink{classJobSystem_1_1Barrier}{Barrier}} \texorpdfstring{$\ast$}{*}in\+Barrier) override
\begin{DoxyCompactList}\small\item\em Wait for a set of jobs to be finished, note that only 1 thread can be waiting on a barrier at a time. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classJobSystem}{Job\+System}}}
\begin{DoxyCompactItemize}
\item 
virtual {\bfseries \texorpdfstring{$\sim$}{\string~}\+Job\+System} ()=default
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classNonCopyable}{Non\+Copyable}}}
\begin{DoxyCompactItemize}
\item 
{\bfseries Non\+Copyable} (const \mbox{\hyperlink{classNonCopyable}{Non\+Copyable}} \&)=delete
\item 
void {\bfseries operator=} (const \mbox{\hyperlink{classNonCopyable}{Non\+Copyable}} \&)=delete
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \mbox{\hyperlink{classJobSystemThreadPool_ae5a196fc16e3dd738c81eef74b3027c4}{Queue\+Job}} (\mbox{\hyperlink{classJobSystem_1_1Job}{Job}} \texorpdfstring{$\ast$}{*}in\+Job) override
\begin{DoxyCompactList}\small\item\em Adds a job to the job queue. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classJobSystemThreadPool_a95cc3e8610b53bce87730404f44c7e96}{Queue\+Jobs}} (\mbox{\hyperlink{classJobSystem_1_1Job}{Job}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}in\+Jobs, uint in\+Num\+Jobs) override
\begin{DoxyCompactList}\small\item\em Adds a number of jobs at once to the job queue. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classJobSystemThreadPool_ad9ae9ac8231c2098b99837b76e4155f9}{Free\+Job}} (\mbox{\hyperlink{classJobSystem_1_1Job}{Job}} \texorpdfstring{$\ast$}{*}in\+Job) override
\begin{DoxyCompactList}\small\item\em Frees a job. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Public Types inherited from \mbox{\hyperlink{classJobSystem}{Job\+System}}}
\begin{DoxyCompactItemize}
\item 
using {\bfseries Job\+Function} = function$<$ void()$>$
\begin{DoxyCompactList}\small\item\em Main function of the job. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implementation of a \doxylink{classJobSystem}{Job\+System} using a thread pool

Note that this is considered an example implementation. It is expected that when you integrate the physics engine into your own project that you\textquotesingle{}ll provide your own implementation of the \doxylink{classJobSystem}{Job\+System} built on top of whatever job system your project uses. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classJobSystemThreadPool_a646665a28d2b4fd168ed3f283efc67c0}\label{classJobSystemThreadPool_a646665a28d2b4fd168ed3f283efc67c0} 
\index{JobSystemThreadPool@{JobSystemThreadPool}!JobSystemThreadPool@{JobSystemThreadPool}}
\index{JobSystemThreadPool@{JobSystemThreadPool}!JobSystemThreadPool@{JobSystemThreadPool}}
\doxysubsubsection{\texorpdfstring{JobSystemThreadPool()}{JobSystemThreadPool()}}
{\footnotesize\ttfamily JPH\+\_\+\+OVERRIDE\+\_\+\+NEW\+\_\+\+DELETE Job\+System\+Thread\+Pool\+::\+Job\+System\+Thread\+Pool (\begin{DoxyParamCaption}\item[{uint}]{in\+Max\+Jobs,  }\item[{uint}]{in\+Max\+Barriers,  }\item[{int}]{in\+Num\+Threads = {\ttfamily -\/1} }\end{DoxyParamCaption})}

Creates a thread pool. \begin{DoxySeeAlso}{See also}
\doxylink{classJobSystemThreadPool_a4dc159b1f4b99e398cc5d27262c555f1}{Job\+System\+Thread\+Pool\+::\+Init} 
\end{DoxySeeAlso}


\doxysubsection{Member Function Documentation}
\Hypertarget{classJobSystemThreadPool_aaca24192ded59a7ade7e655a495f9d48}\label{classJobSystemThreadPool_aaca24192ded59a7ade7e655a495f9d48} 
\index{JobSystemThreadPool@{JobSystemThreadPool}!CreateJob@{CreateJob}}
\index{CreateJob@{CreateJob}!JobSystemThreadPool@{JobSystemThreadPool}}
\doxysubsubsection{\texorpdfstring{CreateJob()}{CreateJob()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{classJobSystem_1_1JobHandle}{Job\+Handle}} Job\+System\+Thread\+Pool\+::\+Create\+Job (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{in\+Name,  }\item[{\mbox{\hyperlink{classColor}{Color\+Arg}}}]{in\+Color,  }\item[{const \mbox{\hyperlink{classJobSystem_ae31ef61a509934f03d4705aec19c61f5}{Job\+Function}} \&}]{in\+Job\+Function,  }\item[{uint32}]{in\+Num\+Dependencies = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Create a new job, the job is started immediately if in\+Num\+Dependencies == 0 otherwise it starts when Remove\+Dependency causes the dependency counter to reach 0. 

Implements \mbox{\hyperlink{classJobSystem_a0766c8acd5ed9ef0e6baf1c2b8f3c38b}{Job\+System}}.

\Hypertarget{classJobSystemThreadPool_ad9ae9ac8231c2098b99837b76e4155f9}\label{classJobSystemThreadPool_ad9ae9ac8231c2098b99837b76e4155f9} 
\index{JobSystemThreadPool@{JobSystemThreadPool}!FreeJob@{FreeJob}}
\index{FreeJob@{FreeJob}!JobSystemThreadPool@{JobSystemThreadPool}}
\doxysubsubsection{\texorpdfstring{FreeJob()}{FreeJob()}}
{\footnotesize\ttfamily virtual void Job\+System\+Thread\+Pool\+::\+Free\+Job (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classJobSystem_1_1Job}{Job}} \texorpdfstring{$\ast$}{*}}]{in\+Job }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Frees a job. 



Implements \mbox{\hyperlink{classJobSystem_aa74329d956a01e3f2f219ea22bdc5097}{Job\+System}}.

\Hypertarget{classJobSystemThreadPool_ad9d1ead2ffc5ab1ec9aa6e06948c98ac}\label{classJobSystemThreadPool_ad9d1ead2ffc5ab1ec9aa6e06948c98ac} 
\index{JobSystemThreadPool@{JobSystemThreadPool}!GetMaxConcurrency@{GetMaxConcurrency}}
\index{GetMaxConcurrency@{GetMaxConcurrency}!JobSystemThreadPool@{JobSystemThreadPool}}
\doxysubsubsection{\texorpdfstring{GetMaxConcurrency()}{GetMaxConcurrency()}}
{\footnotesize\ttfamily virtual int Job\+System\+Thread\+Pool\+::\+Get\+Max\+Concurrency (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Get maximum number of concurrently executing jobs. 



Implements \mbox{\hyperlink{classJobSystem_a5953ad34be5c47e7896b87ac7409b7d7}{Job\+System}}.

\Hypertarget{classJobSystemThreadPool_a4dc159b1f4b99e398cc5d27262c555f1}\label{classJobSystemThreadPool_a4dc159b1f4b99e398cc5d27262c555f1} 
\index{JobSystemThreadPool@{JobSystemThreadPool}!Init@{Init}}
\index{Init@{Init}!JobSystemThreadPool@{JobSystemThreadPool}}
\doxysubsubsection{\texorpdfstring{Init()}{Init()}}
{\footnotesize\ttfamily void Job\+System\+Thread\+Pool\+::\+Init (\begin{DoxyParamCaption}\item[{uint}]{in\+Max\+Jobs,  }\item[{uint}]{in\+Max\+Barriers,  }\item[{int}]{in\+Num\+Threads = {\ttfamily -\/1} }\end{DoxyParamCaption})}

Initialize the thread pool 
\begin{DoxyParams}{Parameters}
{\em in\+Max\+Jobs} & Max number of jobs that can be allocated at any time \\
\hline
{\em in\+Max\+Barriers} & Max number of barriers that can be allocated at any time \\
\hline
{\em in\+Num\+Threads} & Number of threads to start (the number of concurrent jobs is 1 more because the main thread will also run jobs while waiting for a barrier to complete). Use -\/1 to autodetect the amount of CPU\textquotesingle{}s. \\
\hline
\end{DoxyParams}
\Hypertarget{classJobSystemThreadPool_ae5a196fc16e3dd738c81eef74b3027c4}\label{classJobSystemThreadPool_ae5a196fc16e3dd738c81eef74b3027c4} 
\index{JobSystemThreadPool@{JobSystemThreadPool}!QueueJob@{QueueJob}}
\index{QueueJob@{QueueJob}!JobSystemThreadPool@{JobSystemThreadPool}}
\doxysubsubsection{\texorpdfstring{QueueJob()}{QueueJob()}}
{\footnotesize\ttfamily virtual void Job\+System\+Thread\+Pool\+::\+Queue\+Job (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classJobSystem_1_1Job}{Job}} \texorpdfstring{$\ast$}{*}}]{in\+Job }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Adds a job to the job queue. 



Implements \mbox{\hyperlink{classJobSystem_ae6bae9c5725c2009c8e9a2d79f60cb40}{Job\+System}}.

\Hypertarget{classJobSystemThreadPool_a95cc3e8610b53bce87730404f44c7e96}\label{classJobSystemThreadPool_a95cc3e8610b53bce87730404f44c7e96} 
\index{JobSystemThreadPool@{JobSystemThreadPool}!QueueJobs@{QueueJobs}}
\index{QueueJobs@{QueueJobs}!JobSystemThreadPool@{JobSystemThreadPool}}
\doxysubsubsection{\texorpdfstring{QueueJobs()}{QueueJobs()}}
{\footnotesize\ttfamily virtual void Job\+System\+Thread\+Pool\+::\+Queue\+Jobs (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classJobSystem_1_1Job}{Job}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{in\+Jobs,  }\item[{uint}]{in\+Num\+Jobs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Adds a number of jobs at once to the job queue. 



Implements \mbox{\hyperlink{classJobSystem_a5820eef46d040e6ae17e51a828201118}{Job\+System}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
includes/jolt/\+Core/Job\+System\+Thread\+Pool.\+h\end{DoxyCompactItemize}
