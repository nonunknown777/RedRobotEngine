\doxysection{Collision\+Dispatch.\+h}
\hypertarget{CollisionDispatch_8h_source}{}\label{CollisionDispatch_8h_source}\index{includes/jolt/Physics/Collision/CollisionDispatch.h@{includes/jolt/Physics/Collision/CollisionDispatch.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Jolt\ Physics\ Library\ (https://github.com/jrouwe/JoltPhysics)}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ SPDX-\/FileCopyrightText:\ 2021\ Jorrit\ Rouwe}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ MIT}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Collision/Shape/Shape.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Collision/Shape/SubShapeID.h>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Collision/ShapeCast.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Collision/ShapeFilter.h>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Collision/NarrowPhaseStats.h>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ JPH\_NAMESPACE\_BEGIN}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classCollideShapeSettings}{CollideShapeSettings}};}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00018\ \textcolor{keyword}{class\ }JPH\_EXPORT\ \mbox{\hyperlink{classCollisionDispatch}{CollisionDispatch}}}
\DoxyCodeLine{00019\ \{}
\DoxyCodeLine{00020\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \mbox{\hyperlink{classCollisionDispatch_a29634d08db5d24ce7c0d5c44b547c075}{sCollideShapeVsShape}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classShape}{Shape}}\ *inShape1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShape}{Shape}}\ *inShape2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inScale1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inScale2,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inCenterOfMassTransform1,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inCenterOfMassTransform2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classCollideShapeSettings}{CollideShapeSettings}}\ \&inCollideShapeSettings,\ \mbox{\hyperlink{classCollisionCollector}{CollideShapeCollector}}\ \&ioCollector,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeFilter}{ShapeFilter}}\ \&inShapeFilter\ =\ \{\ \})}
\DoxyCodeLine{00034\ \ \ \ \ \{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ JPH\_IF\_TRACK\_NARROWPHASE\_STATS(TrackNarrowPhaseStat\ track(NarrowPhaseStat::sCollideShape[(\textcolor{keywordtype}{int})inShape1-\/>GetSubType()][(\textcolor{keywordtype}{int})inShape2-\/>GetSubType()]);)}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Only\ test\ shape\ if\ it\ passes\ the\ shape\ filter}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inShapeFilter.ShouldCollide(inShape1,\ inSubShapeIDCreator1.GetID(),\ inShape2,\ inSubShapeIDCreator2.GetID()))}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ sCollideShape[(\textcolor{keywordtype}{int})inShape1-\/>GetSubType()][(int)inShape2-\/>GetSubType()](inShape1,\ inShape2,\ inScale1,\ inScale2,\ inCenterOfMassTransform1,\ inCenterOfMassTransform2,\ inSubShapeIDCreator1,\ inSubShapeIDCreator2,\ inCollideShapeSettings,\ ioCollector,\ inShapeFilter);}
\DoxyCodeLine{00040\ \ \ \ \ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \mbox{\hyperlink{classCollisionDispatch_a684c783f79569805d64cd436800b1d2a}{sCastShapeVsShapeLocalSpace}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structShapeCast}{ShapeCast}}\ \&inShapeCastLocal,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeCastSettings}{ShapeCastSettings}}\ \&inShapeCastSettings,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShape}{Shape}}\ *inShape,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inScale,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeFilter}{ShapeFilter}}\ \&inShapeFilter,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inCenterOfMassTransform2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator2,\ \mbox{\hyperlink{classCollisionCollector}{CastShapeCollector}}\ \&ioCollector)}
\DoxyCodeLine{00054\ \ \ \ \ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ JPH\_IF\_TRACK\_NARROWPHASE\_STATS(TrackNarrowPhaseStat\ track(NarrowPhaseStat::sCastShape[(\textcolor{keywordtype}{int})inShapeCastLocal.\mbox{\hyperlink{structShapeCastT_a68df269e004434dd4c2dec18e29b1f8d}{mShape}}-\/>GetSubType()][(\textcolor{keywordtype}{int})inShape-\/>GetSubType()]);)}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Only\ test\ shape\ if\ it\ passes\ the\ shape\ filter}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inShapeFilter.\mbox{\hyperlink{classShapeFilter_a34e0af56ee8eff11096ed8926e87f2c5}{ShouldCollide}}(inShapeCastLocal.\mbox{\hyperlink{structShapeCastT_a68df269e004434dd4c2dec18e29b1f8d}{mShape}},\ inSubShapeIDCreator1.GetID(),\ inShape,\ inSubShapeIDCreator2.GetID()))}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ sCastShape[(\textcolor{keywordtype}{int})inShapeCastLocal.\mbox{\hyperlink{structShapeCastT_a68df269e004434dd4c2dec18e29b1f8d}{mShape}}-\/>GetSubType()][(int)inShape-\/>GetSubType()](inShapeCastLocal,\ inShapeCastSettings,\ inShape,\ inScale,\ inShapeFilter,\ inCenterOfMassTransform2,\ inSubShapeIDCreator1,\ inSubShapeIDCreator2,\ ioCollector);}
\DoxyCodeLine{00060\ \ \ \ \ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \mbox{\hyperlink{classCollisionDispatch_a50ed5fc6de2aa13d6f48ab29f6cf0b7f}{sCastShapeVsShapeWorldSpace}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structShapeCast}{ShapeCast}}\ \&inShapeCastWorld,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeCastSettings}{ShapeCastSettings}}\ \&inShapeCastSettings,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShape}{Shape}}\ *inShape,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inScale,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeFilter}{ShapeFilter}}\ \&inShapeFilter,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inCenterOfMassTransform2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator2,\ \mbox{\hyperlink{classCollisionCollector}{CastShapeCollector}}\ \&ioCollector)}
\DoxyCodeLine{00066\ \ \ \ \ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structShapeCast}{ShapeCast}}\ local\_shape\_cast\ =\ inShapeCastWorld.\mbox{\hyperlink{structShapeCastT_ab07dbf4278d79895fb480781d24db2f3}{PostTransformed}}(inCenterOfMassTransform2.\mbox{\hyperlink{classMat44_af962ad0ed20cb6112f8249cb9573c233}{InversedRotationTranslation}}());}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ sCastShapeVsShapeLocalSpace(local\_shape\_cast,\ inShapeCastSettings,\ inShape,\ inScale,\ inShapeFilter,\ inCenterOfMassTransform2,\ inSubShapeIDCreator1,\ inSubShapeIDCreator2,\ ioCollector);}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classCollisionDispatch_ad1a72bfcb8688f4eaf881aad847c2319}{CollideShape}}\ =\ void\ (*)(\textcolor{keyword}{const}\ \mbox{\hyperlink{classShape}{Shape}}\ *inShape1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShape}{Shape}}\ *inShape2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inScale1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inScale2,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inCenterOfMassTransform1,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inCenterOfMassTransform2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classCollideShapeSettings}{CollideShapeSettings}}\ \&inCollideShapeSettings,\ \mbox{\hyperlink{classCollisionCollector}{CollideShapeCollector}}\ \&ioCollector,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeFilter}{ShapeFilter}}\ \&inShapeFilter);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classCollisionDispatch_a9b0ecb3f10cdac7c5cf648cb2fa0b8e8}{CastShape}}\ =\ void\ (*)(\textcolor{keyword}{const}\ \mbox{\hyperlink{structShapeCast}{ShapeCast}}\ \&inShapeCast,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeCastSettings}{ShapeCastSettings}}\ \&inShapeCastSettings,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShape}{Shape}}\ *inShape,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inScale,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeFilter}{ShapeFilter}}\ \&inShapeFilter,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inCenterOfMassTransform2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator2,\ \mbox{\hyperlink{classCollisionCollector}{CastShapeCollector}}\ \&ioCollector);}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classCollisionDispatch_a7e20a4c171571a66b1f45ba963dc8777}{sInit}}();}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classCollisionDispatch_a20d56fd7360a0b72be7803eef2d616ed}{sRegisterCollideShape}}(EShapeSubType\ inType1,\ EShapeSubType\ inType2,\ \mbox{\hyperlink{classCollisionDispatch_ad1a72bfcb8688f4eaf881aad847c2319}{CollideShape}}\ inFunction)\ \ \ \{\ sCollideShape[(int)inType1][(\textcolor{keywordtype}{int})inType2]\ =\ inFunction;\ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classCollisionDispatch_a211b05424a9e6e7bff777af77edad6be}{sRegisterCastShape}}(EShapeSubType\ inType1,\ EShapeSubType\ inType2,\ \mbox{\hyperlink{classCollisionDispatch_a9b0ecb3f10cdac7c5cf648cb2fa0b8e8}{CastShape}}\ inFunction)\ \ \ \ \ \ \ \ \ \ \ \{\ sCastShape[(int)inType1][(\textcolor{keywordtype}{int})inType2]\ =\ inFunction;\ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classCollisionDispatch_a7b25cea2f3ba4541b78d5932fe490c91}{sReversedCollideShape}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classShape}{Shape}}\ *inShape1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShape}{Shape}}\ *inShape2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inScale1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inScale2,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inCenterOfMassTransform1,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inCenterOfMassTransform2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classCollideShapeSettings}{CollideShapeSettings}}\ \&inCollideShapeSettings,\ \mbox{\hyperlink{classCollisionCollector}{CollideShapeCollector}}\ \&ioCollector,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeFilter}{ShapeFilter}}\ \&inShapeFilter);}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classCollisionDispatch_a2f394c2678ee42c69b1c5b256c4b34ae}{sReversedCastShape}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structShapeCast}{ShapeCast}}\ \&inShapeCast,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeCastSettings}{ShapeCastSettings}}\ \&inShapeCastSettings,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShape}{Shape}}\ *inShape,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inScale,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classShapeFilter}{ShapeFilter}}\ \&inShapeFilter,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inCenterOfMassTransform2,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSubShapeIDCreator}{SubShapeIDCreator}}\ \&inSubShapeIDCreator2,\ \mbox{\hyperlink{classCollisionCollector}{CastShapeCollector}}\ \&ioCollector);}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classCollisionDispatch_ad1a72bfcb8688f4eaf881aad847c2319}{CollideShape}}\ \ \ \ \ sCollideShape[NumSubShapeTypes][NumSubShapeTypes];}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classCollisionDispatch_a9b0ecb3f10cdac7c5cf648cb2fa0b8e8}{CastShape}}\ \ \ \ \ \ \ sCastShape[NumSubShapeTypes][NumSubShapeTypes];}
\DoxyCodeLine{00095\ \};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ JPH\_NAMESPACE\_END}

\end{DoxyCode}
