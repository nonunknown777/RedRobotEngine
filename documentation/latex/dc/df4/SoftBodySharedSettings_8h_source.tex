\doxysection{Soft\+Body\+Shared\+Settings.\+h}
\hypertarget{SoftBodySharedSettings_8h_source}{}\label{SoftBodySharedSettings_8h_source}\index{includes/jolt/Physics/SoftBody/SoftBodySharedSettings.h@{includes/jolt/Physics/SoftBody/SoftBodySharedSettings.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Jolt\ Physics\ Library\ (https://github.com/jrouwe/JoltPhysics)}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ SPDX-\/FileCopyrightText:\ 2023\ Jorrit\ Rouwe}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ MIT}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <Jolt/Core/Reference.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Collision/PhysicsMaterial.h>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <Jolt/Core/StreamUtils.h>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ JPH\_NAMESPACE\_BEGIN}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{class\ }JPH\_EXPORT\ \mbox{\hyperlink{classSoftBodySharedSettings}{SoftBodySharedSettings}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classRefTarget}{RefTarget}}<SoftBodySharedSettings>}
\DoxyCodeLine{00016\ \{}
\DoxyCodeLine{00017\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00018\ \ \ \ \ JPH\_DECLARE\_SERIALIZABLE\_NON\_VIRTUAL(JPH\_EXPORT,\ \mbox{\hyperlink{classSoftBodySharedSettings}{SoftBodySharedSettings}})}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ }
\DoxyCodeLine{00021\ \ \ \ \ void\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CalculateEdgeLengths();}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CalculateVolumeConstraintVolumes();}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00027\ \ \ \ \ class\ \mbox{\hyperlink{classSoftBodySharedSettings_1_1OptimizationResults}{OptimizationResults}}}
\DoxyCodeLine{00028\ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ Array<uint>\ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_1_1OptimizationResults_ac418fc1840c4b8339e09092d52924af1}{mEdgeRemap}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00031\ \ \ \ \ \};}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_ac449c2bf234bdf947aa9454adc728964}{Optimize}}(\mbox{\hyperlink{classSoftBodySharedSettings_1_1OptimizationResults}{OptimizationResults}}\ \&outResults);}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_a4dbaa7142dca56c869a395bc88022cd7}{Optimize}}()\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ \mbox{\hyperlink{classSoftBodySharedSettings_1_1OptimizationResults}{OptimizationResults}}\ results;\ \mbox{\hyperlink{classSoftBodySharedSettings_a4dbaa7142dca56c869a395bc88022cd7}{Optimize}}(results);\ \}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_a237a177ff6a49cc11207c196220f321b}{SaveBinaryState}}(\mbox{\hyperlink{classStreamOut}{StreamOut}}\ \&inStream)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_a2f196979f67ababeaf2ab8fe85c3243c}{RestoreBinaryState}}(\mbox{\hyperlink{classStreamIn}{StreamIn}}\ \&inStream);}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{using\ }SharedSettingsToIDMap\ =\ StreamUtils::ObjectToIDMap<SoftBodySharedSettings>;}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{using\ }IDToSharedSettingsMap\ =\ StreamUtils::IDToObjectMap<SoftBodySharedSettings>;}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{using\ }MaterialToIDMap\ =\ StreamUtils::ObjectToIDMap<PhysicsMaterial>;}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{using\ }IDToMaterialMap\ =\ StreamUtils::IDToObjectMap<PhysicsMaterial>;}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_a04cd0a82ccf0f88cf350f08dc04721db}{SaveWithMaterials}}(\mbox{\hyperlink{classStreamOut}{StreamOut}}\ \&inStream,\ SharedSettingsToIDMap\ \&ioSettingsMap,\ MaterialToIDMap\ \&ioMaterialMap)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classResult}{SettingsResult}}\ =\ \mbox{\hyperlink{classResult}{Result<Ref<SoftBodySharedSettings>}}>;}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classResult}{SettingsResult}}\ \mbox{\hyperlink{classSoftBodySharedSettings_a9fc3b6d0abdcc822e02597327e70a97d}{sRestoreWithMaterials}}(\mbox{\hyperlink{classStreamIn}{StreamIn}}\ \&inStream,\ IDToSharedSettingsMap\ \&ioSettingsMap,\ IDToMaterialMap\ \&ioMaterialMap);}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{struct\ }JPH\_EXPORT\ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Vertex}{Vertex}}}
\DoxyCodeLine{00060\ \ \ \ \ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ JPH\_DECLARE\_SERIALIZABLE\_NON\_VIRTUAL(JPH\_EXPORT,\ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Vertex}{Vertex}})}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Vertex}{Vertex}}()\ =\ default;}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Vertex}{Vertex}}(const\ \mbox{\hyperlink{classFloat3}{Float3}}\ \&inPosition,\ const\ \mbox{\hyperlink{classFloat3}{Float3}}\ \&inVelocity\ =\ \mbox{\hyperlink{classFloat3}{Float3}}(0,\ 0,\ 0),\ \textcolor{keywordtype}{float}\ inInvMass\ =\ 1.0f)\ :\ mPosition(inPosition),\ mVelocity(inVelocity),\ mInvMass(inInvMass)\ \{\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ mPosition\ \{\ 0,\ 0,\ 0\ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ mVelocity\ \{\ 0,\ 0,\ 0\ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ mInvMass\ =\ 1.0f;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00070\ \ \ \ \ \};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{struct\ }JPH\_EXPORT\ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Face}{Face}}}
\DoxyCodeLine{00074\ \ \ \ \ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ JPH\_DECLARE\_SERIALIZABLE\_NON\_VIRTUAL(JPH\_EXPORT,\ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Face}{Face}})}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Face}{Face}}()\ =\ default;}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Face}{Face}}(uint32\ inVertex1,\ uint32\ inVertex2,\ uint32\ inVertex3,\ uint32\ inMaterialIndex\ =\ 0)\ :\ mVertex\ \{\ inVertex1,\ inVertex2,\ inVertex3\ \},\ mMaterialIndex(inMaterialIndex)\ \{\ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Face_ae962b7b0a75c52698410e6dfd8aba428}{IsDegenerate}}()\textcolor{keyword}{\ const\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{\ \textcolor{keywordflow}{return}\ mVertex[0]\ ==\ mVertex[1]\ ||\ mVertex[0]\ ==\ mVertex[2]\ ||\ mVertex[1]\ ==\ mVertex[2];\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ uint32\ \ \ \ \ \ \ \ \ \ mVertex[3];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ uint32\ \ \ \ \ \ \ \ \ \ mMaterialIndex\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00086\ \ \ \ \ \};}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{struct\ }JPH\_EXPORT\ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Edge}{Edge}}}
\DoxyCodeLine{00090\ \ \ \ \ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ JPH\_DECLARE\_SERIALIZABLE\_NON\_VIRTUAL(JPH\_EXPORT,\ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Edge}{Edge}})}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Edge}{Edge}}()\ =\ default;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Edge}{Edge}}(uint32\ inVertex1,\ uint32\ inVertex2,\ \textcolor{keywordtype}{float}\ inCompliance\ =\ 0.0f)\ :\ mVertex\ \{\ inVertex1,\ inVertex2\ \},\ mCompliance(inCompliance)\ \{\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ uint32\ \ \ \ \ \ \ \ \ \ mVertex[2];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ mRestLength\ =\ 1.0f;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ mCompliance\ =\ 0.0f;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00100\ \ \ \ \ \};}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keyword}{struct\ }JPH\_EXPORT\ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Volume}{Volume}}}
\DoxyCodeLine{00104\ \ \ \ \ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ JPH\_DECLARE\_SERIALIZABLE\_NON\_VIRTUAL(JPH\_EXPORT,\ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Volume}{Volume}})}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Volume}{Volume}}()\ =\ default;}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Volume}{Volume}}(uint32\ inVertex1,\ uint32\ inVertex2,\ uint32\ inVertex3,\ uint32\ inVertex4,\ \textcolor{keywordtype}{float}\ inCompliance\ =\ 0.0f)\ :\ mVertex\ \{\ inVertex1,\ inVertex2,\ inVertex3,\ inVertex4\ \},\ mCompliance(inCompliance)\ \{\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ uint32\ \ \ \ \ \ \ \ \ \ mVertex[4];\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ mSixRestVolume\ =\ 1.0f;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ mCompliance\ =\ 0.0f;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00114\ \ \ \ \ \};}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_ad408fb4eb7803dbba02dc8b669822fd2}{AddFace}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structSoftBodySharedSettings_1_1Face}{Face}}\ \&inFace)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{\ JPH\_ASSERT(!inFace.\mbox{\hyperlink{structSoftBodySharedSettings_1_1Face_ae962b7b0a75c52698410e6dfd8aba428}{IsDegenerate}}());\ mFaces.push\_back(inFace);\ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00120\ \ \ \ \ uint\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_a8d9da4045f1c850f1de05c89e010b30e}{GetEdgeGroupSize}}(uint\ inGroupIdx)\textcolor{keyword}{\ const\ \ \ \ \ }\{\ \textcolor{keywordflow}{return}\ inGroupIdx\ ==\ 0?\ mEdgeGroupEndIndices[0]\ :\ mEdgeGroupEndIndices[inGroupIdx]\ -\/\ mEdgeGroupEndIndices[inGroupIdx\ -\/\ 1];\ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ Array<Vertex>\ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_a0bd7da7039e73883ca75053b37a3c872}{mVertices}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00123\ \ \ \ \ Array<Face>\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_a80e68641c026a174fe3839d841901f43}{mFaces}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00124\ \ \ \ \ Array<Edge>\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_aac3d26e90a9bceedf9f030b2ae9ae1e6}{mEdgeConstraints}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00125\ \ \ \ \ Array<uint>\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_adea2e58a62ac451c4b387d81e167d01c}{mEdgeGroupEndIndices}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00126\ \ \ \ \ Array<Volume>\ \ \ \ \ \ \ \mbox{\hyperlink{classSoftBodySharedSettings_a900de005e0c55c3000fa154a019e6e9b}{mVolumeConstraints}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00127\ \ \ \ \ PhysicsMaterialList\ mMaterials\ \{\ \mbox{\hyperlink{classPhysicsMaterial_af53a233202a9b9e828cc7dcc346cf28f}{PhysicsMaterial::sDefault}}\ \};\ \ }
\DoxyCodeLine{00128\ \};}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ JPH\_NAMESPACE\_END}

\end{DoxyCode}
