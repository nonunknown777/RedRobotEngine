\doxysection{Axis\+Constraint\+Part.\+h}
\hypertarget{AxisConstraintPart_8h_source}{}\label{AxisConstraintPart_8h_source}\index{includes/jolt/Physics/Constraints/ConstraintPart/AxisConstraintPart.h@{includes/jolt/Physics/Constraints/ConstraintPart/AxisConstraintPart.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Jolt\ Physics\ Library\ (https://github.com/jrouwe/JoltPhysics)}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ SPDX-\/FileCopyrightText:\ 2021\ Jorrit\ Rouwe}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ MIT}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Body/Body.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Constraints/ConstraintPart/SpringPart.h>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Constraints/SpringSettings.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/StateRecorder.h>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/DeterminismLog.h>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ JPH\_NAMESPACE\_BEGIN}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classAxisConstraintPart}{AxisConstraintPart}}}
\DoxyCodeLine{00043\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00046\ \ \ \ \ JPH\_INLINE\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ ApplyVelocityStep(\mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties1,\ \textcolor{keywordtype}{float}\ inInvMass1,\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties2,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inLambda)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00047\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Apply\ impulse\ if\ delta\ is\ not\ zero}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inLambda\ !=\ 0.0f)}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ velocity\ change\ due\ to\ constraint}}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Impulse:}}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ P\ =\ J\string^T\ lambda}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Euler\ velocity\ integration:}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ v'\ =\ v\ +\ M\string^-\/1\ P}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type1\ ==\ EMotionType::Dynamic)}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioMotionProperties1-\/>SubLinearVelocityStep((inLambda\ *\ inInvMass1)\ *\ inWorldSpaceAxis);}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioMotionProperties1-\/>SubAngularVelocityStep(inLambda\ *\ \mbox{\hyperlink{classVec3_aea30fe731618ffa249ecdcba2c66ab4e}{Vec3::sLoadFloat3Unsafe}}(mInvI1\_R1PlusUxAxis));}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type2\ ==\ EMotionType::Dynamic)}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioMotionProperties2-\/>AddLinearVelocityStep((inLambda\ *\ inInvMass2)\ *\ inWorldSpaceAxis);}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioMotionProperties2-\/>AddAngularVelocityStep(inLambda\ *\ \mbox{\hyperlink{classVec3_aea30fe731618ffa249ecdcba2c66ab4e}{Vec3::sLoadFloat3Unsafe}}(mInvI2\_R2xAxis));}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00076\ \ \ \ \ JPH\_INLINE\ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ TemplatedCalculateInverseEffectiveMass(\textcolor{keywordtype}{float}\ inInvMass1,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inInvI1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR1PlusU,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inInvI2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis)}
\DoxyCodeLine{00077\ \ \ \ \ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ JPH\_ASSERT(inWorldSpaceAxis.\mbox{\hyperlink{classVec3_a2f10743d69960eaac721399e4ede190a}{IsNormalized}}(1.0e-\/5f));}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ properties\ used\ below}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ r1\_plus\_u\_x\_axis;}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type1\ !=\ EMotionType::Static)}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ r1\_plus\_u\_x\_axis\ =\ inR1PlusU.\mbox{\hyperlink{classVec3_a224811af391ccfd1e05282eda22d1de8}{Cross}}(inWorldSpaceAxis);}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ r1\_plus\_u\_x\_axis.\mbox{\hyperlink{classVec3_ab22c62c48d2de13947c0cd3413018364}{StoreFloat3}}(\&mR1PlusUxAxis);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#ifdef\ \_DEBUG}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3_aee68177ac267822e1823a9a0f7525014}{Vec3::sNaN}}().\mbox{\hyperlink{classVec3_ab22c62c48d2de13947c0cd3413018364}{StoreFloat3}}(\&mR1PlusUxAxis);}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ r2\_x\_axis;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type2\ !=\ EMotionType::Static)}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ r2\_x\_axis\ =\ inR2.\mbox{\hyperlink{classVec3_a224811af391ccfd1e05282eda22d1de8}{Cross}}(inWorldSpaceAxis);}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ r2\_x\_axis.\mbox{\hyperlink{classVec3_ab22c62c48d2de13947c0cd3413018364}{StoreFloat3}}(\&mR2xAxis);}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#ifdef\ \_DEBUG}}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3_aee68177ac267822e1823a9a0f7525014}{Vec3::sNaN}}().\mbox{\hyperlink{classVec3_ab22c62c48d2de13947c0cd3413018364}{StoreFloat3}}(\&mR2xAxis);}
\DoxyCodeLine{00104\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ inverse\ effective\ mass:\ K\ =\ J\ M\string^-\/1\ J\string^T}}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ inv\_effective\_mass;}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type1\ ==\ EMotionType::Dynamic)}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ invi1\_r1\_plus\_u\_x\_axis\ =\ inInvI1.\mbox{\hyperlink{classMat44_ab599aaeab3e4b832f7f4097816650b14}{Multiply3x3}}(r1\_plus\_u\_x\_axis);}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ invi1\_r1\_plus\_u\_x\_axis.\mbox{\hyperlink{classVec3_ab22c62c48d2de13947c0cd3413018364}{StoreFloat3}}(\&mInvI1\_R1PlusUxAxis);}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ inv\_effective\_mass\ =\ inInvMass1\ +\ invi1\_r1\_plus\_u\_x\_axis.\mbox{\hyperlink{classVec3_a0e078ff09f69e669db71a2b0e37939ff}{Dot}}(r1\_plus\_u\_x\_axis);}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ (void)r1\_plus\_u\_x\_axis;\ \textcolor{comment}{//\ Fix\ compiler\ warning:\ Not\ using\ this\ (it's\ not\ calculated\ either)}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_IF\_DEBUG(\mbox{\hyperlink{classVec3_aee68177ac267822e1823a9a0f7525014}{Vec3::sNaN}}().StoreFloat3(\&mInvI1\_R1PlusUxAxis);)}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ inv\_effective\_mass\ =\ 0.0f;}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type2\ ==\ EMotionType::Dynamic)}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ invi2\_r2\_x\_axis\ =\ inInvI2.\mbox{\hyperlink{classMat44_ab599aaeab3e4b832f7f4097816650b14}{Multiply3x3}}(r2\_x\_axis);}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ invi2\_r2\_x\_axis.\mbox{\hyperlink{classVec3_ab22c62c48d2de13947c0cd3413018364}{StoreFloat3}}(\&mInvI2\_R2xAxis);}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ inv\_effective\_mass\ +=\ inInvMass2\ +\ invi2\_r2\_x\_axis.\mbox{\hyperlink{classVec3_a0e078ff09f69e669db71a2b0e37939ff}{Dot}}(r2\_x\_axis);}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ (void)r2\_x\_axis;\ \textcolor{comment}{//\ Fix\ compiler\ warning:\ Not\ using\ this\ (it's\ not\ calculated\ either)}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_IF\_DEBUG(\mbox{\hyperlink{classVec3_aee68177ac267822e1823a9a0f7525014}{Vec3::sNaN}}().StoreFloat3(\&mInvI2\_R2xAxis);)}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ inv\_effective\_mass;}
\DoxyCodeLine{00136\ \ \ \ \ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00139\ \ \ \ \ JPH\_INLINE\ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ CalculateInverseEffectiveMass(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR1PlusU,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis)}
\DoxyCodeLine{00140\ \ \ \ \ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Dispatch\ to\ the\ correct\ templated\ form}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (inBody1.\mbox{\hyperlink{classBody_a146a4745ed28c3d9b06abe02ee3d3490}{GetMotionType}}())}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Dynamic:}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *mp1\ =\ inBody1.\mbox{\hyperlink{classBody_abe012219037c12313c7ef1116ee74865}{GetMotionPropertiesUnchecked}}();}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ inv\_m1\ =\ mp1-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}();}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMat44}{Mat44}}\ inv\_i1\ =\ inBody1.\mbox{\hyperlink{classBody_a731f2a92e9e215ff87efc831999e0e6e}{GetInverseInertia}}();}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (inBody2.\mbox{\hyperlink{classBody_a146a4745ed28c3d9b06abe02ee3d3490}{GetMotionType}}())}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Dynamic:}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedCalculateInverseEffectiveMass<EMotionType::Dynamic,\ EMotionType::Dynamic>(inv\_m1,\ inv\_i1,\ inR1PlusU,\ inBody2.\mbox{\hyperlink{classBody_abe012219037c12313c7ef1116ee74865}{GetMotionPropertiesUnchecked}}()-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ inBody2.\mbox{\hyperlink{classBody_a731f2a92e9e215ff87efc831999e0e6e}{GetInverseInertia}}(),\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Kinematic:}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedCalculateInverseEffectiveMass<EMotionType::Dynamic,\ EMotionType::Kinematic>(inv\_m1,\ inv\_i1,\ inR1PlusU,\ 0\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ \mbox{\hyperlink{classMat44}{Mat44}}()\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Static:}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedCalculateInverseEffectiveMass<EMotionType::Dynamic,\ EMotionType::Static>(inv\_m1,\ inv\_i1,\ inR1PlusU,\ 0\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ \mbox{\hyperlink{classMat44}{Mat44}}()\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Kinematic:}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(inBody2.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}());}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedCalculateInverseEffectiveMass<EMotionType::Kinematic,\ EMotionType::Dynamic>(0\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ \mbox{\hyperlink{classMat44}{Mat44}}()\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ inR1PlusU,\ inBody2.\mbox{\hyperlink{classBody_abe012219037c12313c7ef1116ee74865}{GetMotionPropertiesUnchecked}}()-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ inBody2.\mbox{\hyperlink{classBody_a731f2a92e9e215ff87efc831999e0e6e}{GetInverseInertia}}(),\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Static:}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(inBody2.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}());}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedCalculateInverseEffectiveMass<EMotionType::Static,\ EMotionType::Dynamic>(0\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ \mbox{\hyperlink{classMat44}{Mat44}}()\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ inR1PlusU,\ inBody2.\mbox{\hyperlink{classBody_abe012219037c12313c7ef1116ee74865}{GetMotionPropertiesUnchecked}}()-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ inBody2.\mbox{\hyperlink{classBody_a731f2a92e9e215ff87efc831999e0e6e}{GetInverseInertia}}(),\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ JPH\_ASSERT(\textcolor{keyword}{false});}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0.0f;}
\DoxyCodeLine{00180\ \ \ \ \ \}}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00183\ \ \ \ \ JPH\_INLINE\ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ CalculateInverseEffectiveMassWithMassOverride(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keywordtype}{float}\ inInvMass1,\ \textcolor{keywordtype}{float}\ inInvInertiaScale1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR1PlusU,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \textcolor{keywordtype}{float}\ inInvInertiaScale2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis)}
\DoxyCodeLine{00184\ \ \ \ \ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Dispatch\ to\ the\ correct\ templated\ form}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (inBody1.\mbox{\hyperlink{classBody_a146a4745ed28c3d9b06abe02ee3d3490}{GetMotionType}}())}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Dynamic:}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMat44}{Mat44}}\ inv\_i1\ =\ inInvInertiaScale1\ *\ inBody1.\mbox{\hyperlink{classBody_a731f2a92e9e215ff87efc831999e0e6e}{GetInverseInertia}}();}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (inBody2.\mbox{\hyperlink{classBody_a146a4745ed28c3d9b06abe02ee3d3490}{GetMotionType}}())}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Dynamic:}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedCalculateInverseEffectiveMass<EMotionType::Dynamic,\ EMotionType::Dynamic>(inInvMass1,\ inv\_i1,\ inR1PlusU,\ inInvMass2,\ inInvInertiaScale2\ *\ inBody2.\mbox{\hyperlink{classBody_a731f2a92e9e215ff87efc831999e0e6e}{GetInverseInertia}}(),\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Kinematic:}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedCalculateInverseEffectiveMass<EMotionType::Dynamic,\ EMotionType::Kinematic>(inInvMass1,\ inv\_i1,\ inR1PlusU,\ 0\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ \mbox{\hyperlink{classMat44}{Mat44}}()\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Static:}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedCalculateInverseEffectiveMass<EMotionType::Dynamic,\ EMotionType::Static>(inInvMass1,\ inv\_i1,\ inR1PlusU,\ 0\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ \mbox{\hyperlink{classMat44}{Mat44}}()\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Kinematic:}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(inBody2.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}());}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedCalculateInverseEffectiveMass<EMotionType::Kinematic,\ EMotionType::Dynamic>(0\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ \mbox{\hyperlink{classMat44}{Mat44}}()\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ inR1PlusU,\ inInvMass2,\ inInvInertiaScale2\ *\ inBody2.\mbox{\hyperlink{classBody_a731f2a92e9e215ff87efc831999e0e6e}{GetInverseInertia}}(),\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Static:}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(inBody2.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}());}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedCalculateInverseEffectiveMass<EMotionType::Static,\ EMotionType::Dynamic>(0\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ \mbox{\hyperlink{classMat44}{Mat44}}()\ \textcolor{comment}{/*\ Will\ not\ be\ used\ */},\ inR1PlusU,\ inInvMass2,\ inInvInertiaScale2\ *\ inBody2.\mbox{\hyperlink{classBody_a731f2a92e9e215ff87efc831999e0e6e}{GetInverseInertia}}(),\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ JPH\_ASSERT(\textcolor{keyword}{false});}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0.0f;}
\DoxyCodeLine{00222\ \ \ \ \ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00227\ \ \ \ \ JPH\_INLINE\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a5a8bc2c7a35f60b63e233ed13db1749b}{TemplatedCalculateConstraintProperties}}(\textcolor{keywordtype}{float}\ inInvMass1,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inInvI1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR1PlusU,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \mbox{\hyperlink{classMat44}{Mat44Arg}}\ inInvI2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inBias\ =\ 0.0f)}
\DoxyCodeLine{00228\ \ \ \ \ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ mEffectiveMass\ =\ 1.0f\ /\ TemplatedCalculateInverseEffectiveMass<Type1,\ Type2>(inInvMass1,\ inInvI1,\ inR1PlusU,\ inInvMass2,\ inInvI2,\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ mSpringPart.\mbox{\hyperlink{classSpringPart_a75d1d4a45e975a5b9b0ad99525c9f52f}{CalculateSpringPropertiesWithBias}}(inBias);}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ JPH\_DET\_LOG(\textcolor{stringliteral}{"{}TemplatedCalculateConstraintProperties:\ invM1:\ "{}}\ <<\ inInvMass1\ <<\ \textcolor{stringliteral}{"{}\ invI1:\ "{}}\ <<\ inInvI1\ <<\ \textcolor{stringliteral}{"{}\ r1PlusU:\ "{}}\ <<\ inR1PlusU\ <<\ \textcolor{stringliteral}{"{}\ invM2:\ "{}}\ <<\ inInvMass2\ <<\ \textcolor{stringliteral}{"{}\ invI2:\ "{}}\ <<\ inInvI2\ <<\ \textcolor{stringliteral}{"{}\ r2:\ "{}}\ <<\ inR2\ <<\ \textcolor{stringliteral}{"{}\ bias:\ "{}}\ <<\ inBias\ <<\ \textcolor{stringliteral}{"{}\ r1PlusUxAxis:\ "{}}\ <<\ mR1PlusUxAxis\ <<\ \textcolor{stringliteral}{"{}\ r2xAxis:\ "{}}\ <<\ mR2xAxis\ <<\ \textcolor{stringliteral}{"{}\ invI1\_R1PlusUxAxis:\ "{}}\ <<\ mInvI1\_R1PlusUxAxis\ <<\ \textcolor{stringliteral}{"{}\ invI2\_R2xAxis:\ "{}}\ <<\ mInvI2\_R2xAxis\ <<\ \textcolor{stringliteral}{"{}\ effectiveMass:\ "{}}\ <<\ mEffectiveMass\ <<\ \textcolor{stringliteral}{"{}\ totalLambda:\ "{}}\ <<\ mTotalLambda);}
\DoxyCodeLine{00234\ \ \ \ \ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_aeff890db41d91de6fddb9a2872d9e146}{CalculateConstraintProperties}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR1PlusU,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inBias\ =\ 0.0f)}
\DoxyCodeLine{00244\ \ \ \ \ \{}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ inv\_effective\_mass\ =\ CalculateInverseEffectiveMass(inBody1,\ inR1PlusU,\ inBody2,\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inv\_effective\_mass\ ==\ 0.0f)}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a6b2103009bf467876c92689dc3fec29d}{Deactivate}}();}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ mEffectiveMass\ =\ 1.0f\ /\ inv\_effective\_mass;}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ mSpringPart.\mbox{\hyperlink{classSpringPart_a75d1d4a45e975a5b9b0ad99525c9f52f}{CalculateSpringPropertiesWithBias}}(inBias);}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00254\ \ \ \ \ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a747c6cfe29af60b2e718af65f8066712}{CalculateConstraintPropertiesWithMassOverride}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \textcolor{keywordtype}{float}\ inInvMass1,\ \textcolor{keywordtype}{float}\ inInvInertiaScale1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR1PlusU,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \textcolor{keywordtype}{float}\ inInvInertiaScale2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inBias\ =\ 0.0f)}
\DoxyCodeLine{00268\ \ \ \ \ \{}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ inv\_effective\_mass\ =\ CalculateInverseEffectiveMassWithMassOverride(inBody1,\ inInvMass1,\ inInvInertiaScale1,\ inR1PlusU,\ inBody2,\ inInvMass2,\ inInvInertiaScale2,\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inv\_effective\_mass\ ==\ 0.0f)}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a6b2103009bf467876c92689dc3fec29d}{Deactivate}}();}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ mEffectiveMass\ =\ 1.0f\ /\ inv\_effective\_mass;}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ mSpringPart.\mbox{\hyperlink{classSpringPart_a75d1d4a45e975a5b9b0ad99525c9f52f}{CalculateSpringPropertiesWithBias}}(inBias);}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00278\ \ \ \ \ \}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a5b0fcca001a8673716a9e6acaaf030a4}{CalculateConstraintPropertiesWithFrequencyAndDamping}}(\textcolor{keywordtype}{float}\ inDeltaTime,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR1PlusU,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inBias,\ \textcolor{keywordtype}{float}\ inC,\ \textcolor{keywordtype}{float}\ inFrequency,\ \textcolor{keywordtype}{float}\ inDamping)}
\DoxyCodeLine{00292\ \ \ \ \ \{}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ inv\_effective\_mass\ =\ CalculateInverseEffectiveMass(inBody1,\ inR1PlusU,\ inBody2,\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inv\_effective\_mass\ ==\ 0.0f)}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a6b2103009bf467876c92689dc3fec29d}{Deactivate}}();}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ mSpringPart.\mbox{\hyperlink{classSpringPart_a0414048df549022dee152c2b18b31126}{CalculateSpringPropertiesWithFrequencyAndDamping}}(inDeltaTime,\ inv\_effective\_mass,\ inBias,\ inC,\ inFrequency,\ inDamping,\ mEffectiveMass);}
\DoxyCodeLine{00299\ \ \ \ \ \}}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00312\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_ae8c4a8375c2a6f88e2adf1398743bed3}{CalculateConstraintPropertiesWithStiffnessAndDamping}}(\textcolor{keywordtype}{float}\ inDeltaTime,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR1PlusU,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inBias,\ \textcolor{keywordtype}{float}\ inC,\ \textcolor{keywordtype}{float}\ inStiffness,\ \textcolor{keywordtype}{float}\ inDamping)}
\DoxyCodeLine{00313\ \ \ \ \ \{}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ inv\_effective\_mass\ =\ CalculateInverseEffectiveMass(inBody1,\ inR1PlusU,\ inBody2,\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inv\_effective\_mass\ ==\ 0.0f)}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a6b2103009bf467876c92689dc3fec29d}{Deactivate}}();}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ mSpringPart.\mbox{\hyperlink{classSpringPart_a318ab5426c6b10a8ceebd3258144d20a}{CalculateSpringPropertiesWithStiffnessAndDamping}}(inDeltaTime,\ inv\_effective\_mass,\ inBias,\ inC,\ inStiffness,\ inDamping,\ mEffectiveMass);}
\DoxyCodeLine{00320\ \ \ \ \ \}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a0fa7dab4d8e1aa0b78e38ba24d926a9b}{CalculateConstraintPropertiesWithSettings}}(\textcolor{keywordtype}{float}\ inDeltaTime,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR1PlusU,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classBody}{Body}}\ \&inBody2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inR2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inBias,\ \textcolor{keywordtype}{float}\ inC,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classSpringSettings}{SpringSettings}}\ \&inSpringSettings)}
\DoxyCodeLine{00324\ \ \ \ \ \{}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ inv\_effective\_mass\ =\ CalculateInverseEffectiveMass(inBody1,\ inR1PlusU,\ inBody2,\ inR2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inv\_effective\_mass\ ==\ 0.0f)}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a6b2103009bf467876c92689dc3fec29d}{Deactivate}}();}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (inSpringSettings.\mbox{\hyperlink{classSpringSettings_a7d27c541e7d25d9da0c263ec99ea528a}{mMode}}\ ==\ ESpringMode::FrequencyAndDamping)}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ mSpringPart.\mbox{\hyperlink{classSpringPart_a0414048df549022dee152c2b18b31126}{CalculateSpringPropertiesWithFrequencyAndDamping}}(inDeltaTime,\ inv\_effective\_mass,\ inBias,\ inC,\ inSpringSettings.\mbox{\hyperlink{classSpringSettings_acea8e3f5767edbfaffa01417733b5dc0}{mFrequency}},\ inSpringSettings.\mbox{\hyperlink{classSpringSettings_a72165bbe14974afb17df18e88f6d205e}{mDamping}},\ mEffectiveMass);}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ mSpringPart.\mbox{\hyperlink{classSpringPart_a318ab5426c6b10a8ceebd3258144d20a}{CalculateSpringPropertiesWithStiffnessAndDamping}}(inDeltaTime,\ inv\_effective\_mass,\ inBias,\ inC,\ inSpringSettings.\mbox{\hyperlink{classSpringSettings_a688815c0e85518f1ac42f1d077415472}{mStiffness}},\ inSpringSettings.\mbox{\hyperlink{classSpringSettings_a72165bbe14974afb17df18e88f6d205e}{mDamping}},\ mEffectiveMass);}
\DoxyCodeLine{00333\ \ \ \ \ \}}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a6b2103009bf467876c92689dc3fec29d}{Deactivate}}()}
\DoxyCodeLine{00337\ \ \ \ \ \{}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ mEffectiveMass\ =\ 0.0f;}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ mTotalLambda\ =\ 0.0f;}
\DoxyCodeLine{00340\ \ \ \ \ \}}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a20095a523dff24e09134b315841f1fcb}{IsActive}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00344\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ mEffectiveMass\ !=\ 0.0f;}
\DoxyCodeLine{00346\ \ \ \ \ \}}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_adb5b5d041b1261d227b2d657a93cabd9}{TemplatedWarmStart}}(\mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties1,\ \textcolor{keywordtype}{float}\ inInvMass1,\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties2,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inWarmStartImpulseRatio)}
\DoxyCodeLine{00351\ \ \ \ \ \{}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ mTotalLambda\ *=\ inWarmStartImpulseRatio;}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ ApplyVelocityStep<Type1,\ Type2>(ioMotionProperties1,\ inInvMass1,\ ioMotionProperties2,\ inInvMass2,\ inWorldSpaceAxis,\ mTotalLambda);}
\DoxyCodeLine{00355\ \ \ \ \ \}}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00362\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a60befc8c7707dd567b633ecd7b870446}{WarmStart}}(\mbox{\hyperlink{classBody}{Body}}\ \&ioBody1,\ \mbox{\hyperlink{classBody}{Body}}\ \&ioBody2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inWarmStartImpulseRatio)}
\DoxyCodeLine{00363\ \ \ \ \ \{}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ EMotionType\ motion\_type1\ =\ ioBody1.\mbox{\hyperlink{classBody_a146a4745ed28c3d9b06abe02ee3d3490}{GetMotionType}}();}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *motion\_properties1\ =\ ioBody1.\mbox{\hyperlink{classBody_abe012219037c12313c7ef1116ee74865}{GetMotionPropertiesUnchecked}}();}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ EMotionType\ motion\_type2\ =\ ioBody2.\mbox{\hyperlink{classBody_a146a4745ed28c3d9b06abe02ee3d3490}{GetMotionType}}();}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *motion\_properties2\ =\ ioBody2.\mbox{\hyperlink{classBody_abe012219037c12313c7ef1116ee74865}{GetMotionPropertiesUnchecked}}();}
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Dispatch\ to\ the\ correct\ templated\ form}}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note:\ Warm\ starting\ doesn't\ differentiate\ between\ kinematic/static\ bodies\ so\ we\ handle\ both\ as\ static\ bodies}}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (motion\_type1\ ==\ EMotionType::Dynamic)}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (motion\_type2\ ==\ EMotionType::Dynamic)}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TemplatedWarmStart<EMotionType::Dynamic,\ EMotionType::Dynamic>(motion\_properties1,\ motion\_properties1-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ motion\_properties2,\ motion\_properties2-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ inWorldSpaceAxis,\ inWarmStartImpulseRatio);}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TemplatedWarmStart<EMotionType::Dynamic,\ EMotionType::Static>(motion\_properties1,\ motion\_properties1-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ motion\_properties2,\ 0.0f\ \textcolor{comment}{/*\ Unused\ */},\ inWorldSpaceAxis,\ inWarmStartImpulseRatio);}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(motion\_type2\ ==\ EMotionType::Dynamic);}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ TemplatedWarmStart<EMotionType::Static,\ EMotionType::Dynamic>(motion\_properties1,\ 0.0f\ \textcolor{comment}{/*\ Unused\ */},\ motion\_properties2,\ motion\_properties2-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ inWorldSpaceAxis,\ inWarmStartImpulseRatio);}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00384\ \ \ \ \ \}}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00388\ \ \ \ \ JPH\_INLINE\ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a9f2617fd84fcdd5a77f4502c6e327143}{TemplatedSolveVelocityConstraintGetTotalLambda}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00389\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ jacobian\ multiplied\ by\ linear\ velocity}}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ jv;}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type1\ !=\ EMotionType::Static\ \&\&\ Type2\ !=\ EMotionType::Static)}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ jv\ =\ inWorldSpaceAxis.\mbox{\hyperlink{classVec3_a0e078ff09f69e669db71a2b0e37939ff}{Dot}}(ioMotionProperties1-\/>\mbox{\hyperlink{classMotionProperties_a6478c1ccabfc23ee9ce98faa0643c080}{GetLinearVelocity}}()\ -\/\ ioMotionProperties2-\/>\mbox{\hyperlink{classMotionProperties_a6478c1ccabfc23ee9ce98faa0643c080}{GetLinearVelocity}}());}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type1\ !=\ EMotionType::Static)}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ jv\ =\ inWorldSpaceAxis.\mbox{\hyperlink{classVec3_a0e078ff09f69e669db71a2b0e37939ff}{Dot}}(ioMotionProperties1-\/>\mbox{\hyperlink{classMotionProperties_a6478c1ccabfc23ee9ce98faa0643c080}{GetLinearVelocity}}());}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type2\ !=\ EMotionType::Static)}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ jv\ =\ inWorldSpaceAxis.\mbox{\hyperlink{classVec3_a0e078ff09f69e669db71a2b0e37939ff}{Dot}}(-\/ioMotionProperties2-\/>\mbox{\hyperlink{classMotionProperties_a6478c1ccabfc23ee9ce98faa0643c080}{GetLinearVelocity}}());}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(\textcolor{keyword}{false});\ \textcolor{comment}{//\ Static\ vs\ static\ is\ nonsensical!}}
\DoxyCodeLine{00400\ }
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ jacobian\ multiplied\ by\ angular\ velocity}}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type1\ !=\ EMotionType::Static)}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ jv\ +=\ \mbox{\hyperlink{classVec3_aea30fe731618ffa249ecdcba2c66ab4e}{Vec3::sLoadFloat3Unsafe}}(mR1PlusUxAxis).\mbox{\hyperlink{classVec3_a0e078ff09f69e669db71a2b0e37939ff}{Dot}}(ioMotionProperties1-\/>\mbox{\hyperlink{classMotionProperties_a66348339a05a43b730e1591273aace18}{GetAngularVelocity}}());}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (Type2\ !=\ EMotionType::Static)}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ jv\ -\/=\ \mbox{\hyperlink{classVec3_aea30fe731618ffa249ecdcba2c66ab4e}{Vec3::sLoadFloat3Unsafe}}(mR2xAxis).\mbox{\hyperlink{classVec3_a0e078ff09f69e669db71a2b0e37939ff}{Dot}}(ioMotionProperties2-\/>\mbox{\hyperlink{classMotionProperties_a66348339a05a43b730e1591273aace18}{GetAngularVelocity}}());}
\DoxyCodeLine{00406\ }
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Lagrange\ multiplier\ is:}}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ lambda\ =\ -\/K\string^-\/1\ (J\ v\ +\ b)}}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ lambda\ =\ mEffectiveMass\ *\ (jv\ -\/\ mSpringPart.\mbox{\hyperlink{classSpringPart_a42a39d96e15ae84419256c35067e12ad}{GetBias}}(mTotalLambda));}
\DoxyCodeLine{00411\ }
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Return\ the\ total\ accumulated\ lambda}}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ mTotalLambda\ +\ lambda;}
\DoxyCodeLine{00414\ \ \ \ \ \}}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00418\ \ \ \ \ JPH\_INLINE\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_aaf10ea43c5acaac802523b68dfbaf51d}{TemplatedSolveVelocityConstraintApplyLambda}}(\mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties1,\ \textcolor{keywordtype}{float}\ inInvMass1,\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties2,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inTotalLambda)}
\DoxyCodeLine{00419\ \ \ \ \ \{}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ delta\_lambda\ =\ inTotalLambda\ -\/\ mTotalLambda;\ \textcolor{comment}{//\ Calculate\ change\ in\ lambda}}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ mTotalLambda\ =\ inTotalLambda;\ \textcolor{comment}{//\ Store\ accumulated\ impulse}}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ApplyVelocityStep<Type1,\ Type2>(ioMotionProperties1,\ inInvMass1,\ ioMotionProperties2,\ inInvMass2,\ inWorldSpaceAxis,\ delta\_lambda);}
\DoxyCodeLine{00424\ \ \ \ \ \}}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keyword}{template}\ <EMotionType\ Type1,\ EMotionType\ Type2>}
\DoxyCodeLine{00428\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a24593248d2181c548e9621817beab264}{TemplatedSolveVelocityConstraint}}(\mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties1,\ \textcolor{keywordtype}{float}\ inInvMass1,\ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *ioMotionProperties2,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inMinLambda,\ \textcolor{keywordtype}{float}\ inMaxLambda)}
\DoxyCodeLine{00429\ \ \ \ \ \{}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ total\_lambda\ =\ TemplatedSolveVelocityConstraintGetTotalLambda<Type1,\ Type2>(ioMotionProperties1,\ ioMotionProperties2,\ inWorldSpaceAxis);}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Clamp\ impulse\ to\ specified\ range}}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ total\_lambda\ =\ Clamp(total\_lambda,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraintApplyLambda<Type1,\ Type2>(ioMotionProperties1,\ inInvMass1,\ ioMotionProperties2,\ inInvMass2,\ inWorldSpaceAxis,\ total\_lambda);}
\DoxyCodeLine{00436\ \ \ \ \ \}}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00444\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a0f72dffd609be0cba29f2619c5a2c63a}{SolveVelocityConstraint}}(\mbox{\hyperlink{classBody}{Body}}\ \&ioBody1,\ \mbox{\hyperlink{classBody}{Body}}\ \&ioBody2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inMinLambda,\ \textcolor{keywordtype}{float}\ inMaxLambda)}
\DoxyCodeLine{00445\ \ \ \ \ \{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ EMotionType\ motion\_type1\ =\ ioBody1.\mbox{\hyperlink{classBody_a146a4745ed28c3d9b06abe02ee3d3490}{GetMotionType}}();}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *motion\_properties1\ =\ ioBody1.\mbox{\hyperlink{classBody_abe012219037c12313c7ef1116ee74865}{GetMotionPropertiesUnchecked}}();}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ EMotionType\ motion\_type2\ =\ ioBody2.\mbox{\hyperlink{classBody_a146a4745ed28c3d9b06abe02ee3d3490}{GetMotionType}}();}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *motion\_properties2\ =\ ioBody2.\mbox{\hyperlink{classBody_abe012219037c12313c7ef1116ee74865}{GetMotionPropertiesUnchecked}}();}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Dispatch\ to\ the\ correct\ templated\ form}}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (motion\_type1)}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Dynamic:}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (motion\_type2)}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Dynamic:}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraint<EMotionType::Dynamic,\ EMotionType::Dynamic>(motion\_properties1,\ motion\_properties1-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ motion\_properties2,\ motion\_properties2-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ inWorldSpaceAxis,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Kinematic:}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraint<EMotionType::Dynamic,\ EMotionType::Kinematic>(motion\_properties1,\ motion\_properties1-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ motion\_properties2,\ 0.0f\ \textcolor{comment}{/*\ Unused\ */},\ inWorldSpaceAxis,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Static:}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraint<EMotionType::Dynamic,\ EMotionType::Static>(motion\_properties1,\ motion\_properties1-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ motion\_properties2,\ 0.0f\ \textcolor{comment}{/*\ Unused\ */},\ inWorldSpaceAxis,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(\textcolor{keyword}{false});}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00472\ }
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Kinematic:}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(motion\_type2\ ==\ EMotionType::Dynamic);}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraint<EMotionType::Kinematic,\ EMotionType::Dynamic>(motion\_properties1,\ 0.0f\ \textcolor{comment}{/*\ Unused\ */},\ motion\_properties2,\ motion\_properties2-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ inWorldSpaceAxis,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Static:}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(motion\_type2\ ==\ EMotionType::Dynamic);}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraint<EMotionType::Static,\ EMotionType::Dynamic>(motion\_properties1,\ 0.0f\ \textcolor{comment}{/*\ Unused\ */},\ motion\_properties2,\ motion\_properties2-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}(),\ inWorldSpaceAxis,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(\textcolor{keyword}{false});}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00487\ \ \ \ \ \}}
\DoxyCodeLine{00488\ }
\DoxyCodeLine{00497\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_aac25bbc0f7371f640c6e2af6a94c5cfc}{SolveVelocityConstraintWithMassOverride}}(\mbox{\hyperlink{classBody}{Body}}\ \&ioBody1,\ \textcolor{keywordtype}{float}\ inInvMass1,\ \mbox{\hyperlink{classBody}{Body}}\ \&ioBody2,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inMinLambda,\ \textcolor{keywordtype}{float}\ inMaxLambda)}
\DoxyCodeLine{00498\ \ \ \ \ \{}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ EMotionType\ motion\_type1\ =\ ioBody1.\mbox{\hyperlink{classBody_a146a4745ed28c3d9b06abe02ee3d3490}{GetMotionType}}();}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *motion\_properties1\ =\ ioBody1.\mbox{\hyperlink{classBody_abe012219037c12313c7ef1116ee74865}{GetMotionPropertiesUnchecked}}();}
\DoxyCodeLine{00501\ }
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ EMotionType\ motion\_type2\ =\ ioBody2.\mbox{\hyperlink{classBody_a146a4745ed28c3d9b06abe02ee3d3490}{GetMotionType}}();}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMotionProperties}{MotionProperties}}\ *motion\_properties2\ =\ ioBody2.\mbox{\hyperlink{classBody_abe012219037c12313c7ef1116ee74865}{GetMotionPropertiesUnchecked}}();}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Dispatch\ to\ the\ correct\ templated\ form}}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (motion\_type1)}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Dynamic:}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (motion\_type2)}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Dynamic:}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraint<EMotionType::Dynamic,\ EMotionType::Dynamic>(motion\_properties1,\ inInvMass1,\ motion\_properties2,\ inInvMass2,\ inWorldSpaceAxis,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Kinematic:}
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraint<EMotionType::Dynamic,\ EMotionType::Kinematic>(motion\_properties1,\ inInvMass1,\ motion\_properties2,\ 0.0f\ \textcolor{comment}{/*\ Unused\ */},\ inWorldSpaceAxis,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00516\ }
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Static:}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraint<EMotionType::Dynamic,\ EMotionType::Static>(motion\_properties1,\ inInvMass1,\ motion\_properties2,\ 0.0f\ \textcolor{comment}{/*\ Unused\ */},\ inWorldSpaceAxis,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00519\ }
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(\textcolor{keyword}{false});}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Kinematic:}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(motion\_type2\ ==\ EMotionType::Dynamic);}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraint<EMotionType::Kinematic,\ EMotionType::Dynamic>(motion\_properties1,\ 0.0f\ \textcolor{comment}{/*\ Unused\ */},\ motion\_properties2,\ inInvMass2,\ inWorldSpaceAxis,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ EMotionType::Static:}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(motion\_type2\ ==\ EMotionType::Dynamic);}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ TemplatedSolveVelocityConstraint<EMotionType::Static,\ EMotionType::Dynamic>(motion\_properties1,\ 0.0f\ \textcolor{comment}{/*\ Unused\ */},\ motion\_properties2,\ inInvMass2,\ inWorldSpaceAxis,\ inMinLambda,\ inMaxLambda);}
\DoxyCodeLine{00533\ }
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(\textcolor{keyword}{false});}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00538\ }
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00540\ \ \ \ \ \}}
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a12a0588911733208e89fa65de7e2b2fc}{SolvePositionConstraint}}(\mbox{\hyperlink{classBody}{Body}}\ \&ioBody1,\ \mbox{\hyperlink{classBody}{Body}}\ \&ioBody2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inC,\ \textcolor{keywordtype}{float}\ inBaumgarte)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00549\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Only\ apply\ position\ constraint\ when\ the\ constraint\ is\ hard,\ otherwise\ the\ velocity\ bias\ will\ fix\ the\ constraint}}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inC\ !=\ 0.0f\ \&\&\ !mSpringPart.\mbox{\hyperlink{classSpringPart_a9dbe7d09f4a6aaf7f5edd106fb6fe335}{IsActive}}())}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ lagrange\ multiplier\ (lambda)\ for\ Baumgarte\ stabilization:}}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ lambda\ =\ -\/K\string^-\/1\ *\ beta\ /\ dt\ *\ C}}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ should\ divide\ by\ inDeltaTime,\ but\ we\ should\ multiply\ by\ inDeltaTime\ in\ the\ Euler\ step\ below\ so\ they're\ cancelled\ out}}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ lambda\ =\ -\/mEffectiveMass\ *\ inBaumgarte\ *\ inC;}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Directly\ integrate\ velocity\ change\ for\ one\ time\ step}}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Euler\ velocity\ integration:}}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ dv\ =\ M\string^-\/1\ P}}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Impulse:}}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ P\ =\ J\string^T\ lambda}}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Euler\ position\ integration:}}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ x'\ =\ x\ +\ dv\ *\ dt}}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note\ we\ don't\ accumulate\ velocities\ for\ the\ stabilization.\ This\ is\ using\ the\ approach\ described\ in\ 'Modeling\ and}}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Solving\ Constraints'\ by\ Erin\ Catto\ presented\ at\ GDC\ 2007.\ On\ slide\ 78\ it\ is\ suggested\ to\ split\ up\ the\ Baumgarte}}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ stabilization\ for\ positional\ drift\ so\ that\ it\ does\ not\ actually\ add\ to\ the\ momentum.\ We\ combine\ an\ Euler\ velocity}}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ integrate\ +\ a\ position\ integrate\ and\ then\ discard\ the\ velocity\ change.}}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ioBody1.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}())}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioBody1.SubPositionStep((lambda\ *\ ioBody1.\mbox{\hyperlink{classBody_a0d39987255227c4221fcea66cb1fc041}{GetMotionProperties}}()-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}())\ *\ inWorldSpaceAxis);}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioBody1.SubRotationStep(lambda\ *\ \mbox{\hyperlink{classVec3_aea30fe731618ffa249ecdcba2c66ab4e}{Vec3::sLoadFloat3Unsafe}}(mInvI1\_R1PlusUxAxis));}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ioBody2.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}())}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioBody2.\mbox{\hyperlink{classBody_af98f831df76bd7e54eeb92d79fa3c8cd}{AddPositionStep}}((lambda\ *\ ioBody2.\mbox{\hyperlink{classBody_a0d39987255227c4221fcea66cb1fc041}{GetMotionProperties}}()-\/>\mbox{\hyperlink{classMotionProperties_a8a959bd2f7d8eb581d999e3b01920aa8}{GetInverseMass}}())\ *\ inWorldSpaceAxis);}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioBody2.\mbox{\hyperlink{classBody_a3385650a73d75c7d9c16d13ea2d5519f}{AddRotationStep}}(lambda\ *\ \mbox{\hyperlink{classVec3_aea30fe731618ffa249ecdcba2c66ab4e}{Vec3::sLoadFloat3Unsafe}}(mInvI2\_R2xAxis));}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00587\ }
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00589\ \ \ \ \ \}}
\DoxyCodeLine{00590\ }
\DoxyCodeLine{00599\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a981dad22bd1333ed2147264f3285c112}{SolvePositionConstraintWithMassOverride}}(\mbox{\hyperlink{classBody}{Body}}\ \&ioBody1,\ \textcolor{keywordtype}{float}\ inInvMass1,\ \mbox{\hyperlink{classBody}{Body}}\ \&ioBody2,\ \textcolor{keywordtype}{float}\ inInvMass2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inWorldSpaceAxis,\ \textcolor{keywordtype}{float}\ inC,\ \textcolor{keywordtype}{float}\ inBaumgarte)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00600\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Only\ apply\ position\ constraint\ when\ the\ constraint\ is\ hard,\ otherwise\ the\ velocity\ bias\ will\ fix\ the\ constraint}}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inC\ !=\ 0.0f\ \&\&\ !mSpringPart.\mbox{\hyperlink{classSpringPart_a9dbe7d09f4a6aaf7f5edd106fb6fe335}{IsActive}}())}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ lagrange\ multiplier\ (lambda)\ for\ Baumgarte\ stabilization:}}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ lambda\ =\ -\/K\string^-\/1\ *\ beta\ /\ dt\ *\ C}}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ should\ divide\ by\ inDeltaTime,\ but\ we\ should\ multiply\ by\ inDeltaTime\ in\ the\ Euler\ step\ below\ so\ they're\ cancelled\ out}}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ lambda\ =\ -\/mEffectiveMass\ *\ inBaumgarte\ *\ inC;}
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Directly\ integrate\ velocity\ change\ for\ one\ time\ step}}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Euler\ velocity\ integration:}}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ dv\ =\ M\string^-\/1\ P}}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Impulse:}}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ P\ =\ J\string^T\ lambda}}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Euler\ position\ integration:}}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ x'\ =\ x\ +\ dv\ *\ dt}}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note\ we\ don't\ accumulate\ velocities\ for\ the\ stabilization.\ This\ is\ using\ the\ approach\ described\ in\ 'Modeling\ and}}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Solving\ Constraints'\ by\ Erin\ Catto\ presented\ at\ GDC\ 2007.\ On\ slide\ 78\ it\ is\ suggested\ to\ split\ up\ the\ Baumgarte}}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ stabilization\ for\ positional\ drift\ so\ that\ it\ does\ not\ actually\ add\ to\ the\ momentum.\ We\ combine\ an\ Euler\ velocity}}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ integrate\ +\ a\ position\ integrate\ and\ then\ discard\ the\ velocity\ change.}}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ioBody1.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}())}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioBody1.SubPositionStep((lambda\ *\ inInvMass1)\ *\ inWorldSpaceAxis);}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioBody1.SubRotationStep(lambda\ *\ \mbox{\hyperlink{classVec3_aea30fe731618ffa249ecdcba2c66ab4e}{Vec3::sLoadFloat3Unsafe}}(mInvI1\_R1PlusUxAxis));}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ioBody2.\mbox{\hyperlink{classBody_a1b21c30907c8c9ce30c176a054057bef}{IsDynamic}}())}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioBody2.\mbox{\hyperlink{classBody_af98f831df76bd7e54eeb92d79fa3c8cd}{AddPositionStep}}((lambda\ *\ inInvMass2)\ *\ inWorldSpaceAxis);}
\DoxyCodeLine{00634\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ioBody2.\mbox{\hyperlink{classBody_a3385650a73d75c7d9c16d13ea2d5519f}{AddRotationStep}}(lambda\ *\ \mbox{\hyperlink{classVec3_aea30fe731618ffa249ecdcba2c66ab4e}{Vec3::sLoadFloat3Unsafe}}(mInvI2\_R2xAxis));}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00640\ \ \ \ \ \}}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00643\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a21284d5ab7133a4e85f37fcfecb0be8e}{SetTotalLambda}}(\textcolor{keywordtype}{float}\ inLambda)}
\DoxyCodeLine{00644\ \ \ \ \ \{}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ mTotalLambda\ =\ inLambda;}
\DoxyCodeLine{00646\ \ \ \ \ \}}
\DoxyCodeLine{00647\ }
\DoxyCodeLine{00649\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_a012581aad01dbf091d9f8e2cf0ea6605}{GetTotalLambda}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00650\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ mTotalLambda;}
\DoxyCodeLine{00652\ \ \ \ \ \}}
\DoxyCodeLine{00653\ }
\DoxyCodeLine{00655\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_ad17a6a0c982d958f3e96e3b460315e5f}{SaveState}}(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00656\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ inStream.\mbox{\hyperlink{classStreamOut_ab6cde59b6c5efff58855641a44e6275e}{Write}}(mTotalLambda);}
\DoxyCodeLine{00658\ \ \ \ \ \}}
\DoxyCodeLine{00659\ }
\DoxyCodeLine{00661\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classAxisConstraintPart_afdaf8583a278a760eae80b8169ee6989}{RestoreState}}(\mbox{\hyperlink{classStateRecorder}{StateRecorder}}\ \&inStream)}
\DoxyCodeLine{00662\ \ \ \ \ \{}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ inStream.\mbox{\hyperlink{classStreamIn_a2a6ed7571089f1156ee7a480b67c22d1}{Read}}(mTotalLambda);}
\DoxyCodeLine{00664\ \ \ \ \ \}}
\DoxyCodeLine{00665\ }
\DoxyCodeLine{00666\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00667\ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mR1PlusUxAxis;}
\DoxyCodeLine{00668\ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mR2xAxis;}
\DoxyCodeLine{00669\ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mInvI1\_R1PlusUxAxis;}
\DoxyCodeLine{00670\ \ \ \ \ \mbox{\hyperlink{classFloat3}{Float3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mInvI2\_R2xAxis;}
\DoxyCodeLine{00671\ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mEffectiveMass\ =\ 0.0f;}
\DoxyCodeLine{00672\ \ \ \ \ \mbox{\hyperlink{classSpringPart}{SpringPart}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mSpringPart;}
\DoxyCodeLine{00673\ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mTotalLambda\ =\ 0.0f;}
\DoxyCodeLine{00674\ \};}
\DoxyCodeLine{00675\ }
\DoxyCodeLine{00676\ JPH\_NAMESPACE\_END}

\end{DoxyCode}
