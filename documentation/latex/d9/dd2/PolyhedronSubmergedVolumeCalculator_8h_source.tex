\doxysection{Polyhedron\+Submerged\+Volume\+Calculator.\+h}
\hypertarget{PolyhedronSubmergedVolumeCalculator_8h_source}{}\label{PolyhedronSubmergedVolumeCalculator_8h_source}\index{includes/jolt/Physics/Collision/Shape/PolyhedronSubmergedVolumeCalculator.h@{includes/jolt/Physics/Collision/Shape/PolyhedronSubmergedVolumeCalculator.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Jolt\ Physics\ Library\ (https://github.com/jrouwe/JoltPhysics)}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ SPDX-\/FileCopyrightText:\ 2021\ Jorrit\ Rouwe}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ MIT}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <Jolt/Geometry/Plane.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#ifdef\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\ \ \ \ \#include\ <Jolt/Renderer/DebugRenderer.h>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ JPH\_NAMESPACE\_BEGIN}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator}{PolyhedronSubmergedVolumeCalculator}}}
\DoxyCodeLine{00018\ \{}
\DoxyCodeLine{00019\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{//\ Calculate\ submerged\ volume\ *\ 6\ and\ center\ of\ mass\ *\ 4\ for\ a\ tetrahedron\ with\ 4\ vertices\ submerged}}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{comment}{//\ inV1\ ..\ inV4\ are\ submerged}}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \ sTetrahedronVolume4(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV3,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV4,\ \textcolor{keywordtype}{float}\ \&outVolumeTimes6,\ \mbox{\hyperlink{classVec3}{Vec3}}\ \&outCenterTimes4)}
\DoxyCodeLine{00023\ \ \ \ \ \{}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ center\ of\ mass\ and\ mass\ of\ this\ tetrahedron,}}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ see:\ https://en.wikipedia.org/wiki/Tetrahedron\#Volume}}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ outVolumeTimes6\ =\ max((inV1\ -\/\ inV4).Dot((inV2\ -\/\ inV4).Cross(inV3\ -\/\ inV4)),\ 0.0f);\ \textcolor{comment}{//\ All\ contributions\ should\ be\ positive\ because\ we\ use\ a\ reference\ point\ that\ is\ on\ the\ surface\ of\ the\ hull}}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ outCenterTimes4\ =\ inV1\ +\ inV2\ +\ inV3\ +\ inV4;}
\DoxyCodeLine{00028\ \ \ \ \ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ intersection\ point\ with\ a\ plane.}}
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{comment}{//\ inV1\ is\ inD1\ distance\ away\ from\ the\ plane,\ inV2\ is\ inD2\ distance\ away\ from\ the\ plane}}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{classVec3}{Vec3}}\ \ sGetPlaneIntersection(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV1,\ \textcolor{keywordtype}{float}\ inD1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV2,\ \textcolor{keywordtype}{float}\ inD2)}
\DoxyCodeLine{00033\ \ \ \ \ \{}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ JPH\_ASSERT(Sign(inD1)\ !=\ Sign(inD2),\ \textcolor{stringliteral}{"{}Assuming\ both\ points\ are\ on\ opposite\ ends\ of\ the\ plane"{}});}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ delta\ =\ inD1\ -\/\ inD2;}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (abs(delta)\ <\ 1.0e-\/6f)}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ inV1;\ \textcolor{comment}{//\ Parallel\ to\ plane,\ just\ pick\ a\ point}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ inV1\ +\ inD1\ *\ (inV2\ -\/\ inV1)\ /\ delta;}
\DoxyCodeLine{00040\ \ \ \ \ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{comment}{//\ Calculate\ submerged\ volume\ *\ 6\ and\ center\ of\ mass\ *\ 4\ for\ a\ tetrahedron\ with\ 1\ vertex\ submerged}}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//\ inV1\ is\ submerged,\ inV2\ ..\ inV4\ are\ not}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{comment}{//\ inD1\ ..\ inD4\ are\ the\ distances\ from\ the\ points\ to\ the\ plane}}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{inline}\ JPH\_IF\_NOT\_DEBUG\_RENDERER(\textcolor{keyword}{static})\ \textcolor{keywordtype}{void}\ sTetrahedronVolume1(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV1,\ \textcolor{keywordtype}{float}\ inD1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV2,\ \textcolor{keywordtype}{float}\ inD2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV3,\ \textcolor{keywordtype}{float}\ inD3,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV4,\ \textcolor{keywordtype}{float}\ inD4,\ \textcolor{keywordtype}{float}\ \&outVolumeTimes6,\ \mbox{\hyperlink{classVec3}{Vec3}}\ \&outCenterTimes4)}
\DoxyCodeLine{00046\ \ \ \ \ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ A\ tetrahedron\ with\ 1\ point\ submerged\ is\ cut\ along\ 3\ edges\ forming\ a\ new\ tetrahedron}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ v2\ =\ sGetPlaneIntersection(inV1,\ inD1,\ inV2,\ inD2);}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ v3\ =\ sGetPlaneIntersection(inV1,\ inD1,\ inV3,\ inD3);}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ v4\ =\ sGetPlaneIntersection(inV1,\ inD1,\ inV4,\ inD4);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Draw\ intersection\ between\ tetrahedron\ and\ surface}}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Shape::sDrawSubmergedVolumes)}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ v2w\ =\ mBaseOffset\ +\ v2;}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ v3w\ =\ mBaseOffset\ +\ v3;}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ v4w\ =\ mBaseOffset\ +\ v4;}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDebugRenderer_a8b92e7678965c488b8d68230816aa000}{DebugRenderer::sInstance}}-\/>\mbox{\hyperlink{classDebugRenderer_afc6b62590e5a26de8cbd98a29bf8b1a3}{DrawTriangle}}(v4w,\ v3w,\ v2w,\ Color::sGreen);}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDebugRenderer_a8b92e7678965c488b8d68230816aa000}{DebugRenderer::sInstance}}-\/>\mbox{\hyperlink{classDebugRenderer_a54813e4e95f78cdfc22d938ba15bcb8d}{DrawWireTriangle}}(v4w,\ v3w,\ v2w,\ Color::sWhite);}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\ \ \ \ \#endif\ }\textcolor{comment}{//\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ sTetrahedronVolume4(inV1,\ v2,\ v3,\ v4,\ outVolumeTimes6,\ outCenterTimes4);}
\DoxyCodeLine{00066\ \ \ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ Calculate\ submerged\ volume\ *\ 6\ and\ center\ of\ mass\ *\ 4\ for\ a\ tetrahedron\ with\ 2\ vertices\ submerged}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{//\ inV1,\ inV2\ are\ submerged,\ inV3,\ inV4\ are\ not}}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ inD1\ ..\ inD4\ are\ the\ distances\ from\ the\ points\ to\ the\ plane}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keyword}{inline}\ JPH\_IF\_NOT\_DEBUG\_RENDERER(\textcolor{keyword}{static})\ \textcolor{keywordtype}{void}\ sTetrahedronVolume2(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV1,\ \textcolor{keywordtype}{float}\ inD1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV2,\ \textcolor{keywordtype}{float}\ inD2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV3,\ \textcolor{keywordtype}{float}\ inD3,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV4,\ \textcolor{keywordtype}{float}\ inD4,\ \textcolor{keywordtype}{float}\ \&outVolumeTimes6,\ \mbox{\hyperlink{classVec3}{Vec3}}\ \&outCenterTimes4)}
\DoxyCodeLine{00072\ \ \ \ \ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ A\ tetrahedron\ with\ 2\ points\ submerged\ is\ cut\ along\ 4\ edges\ forming\ a\ quad}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ c\ =\ sGetPlaneIntersection(inV1,\ inD1,\ inV3,\ inD3);}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ d\ =\ sGetPlaneIntersection(inV1,\ inD1,\ inV4,\ inD4);}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ e\ =\ sGetPlaneIntersection(inV2,\ inD2,\ inV4,\ inD4);}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ f\ =\ sGetPlaneIntersection(inV2,\ inD2,\ inV3,\ inD3);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Draw\ intersection\ between\ tetrahedron\ and\ surface}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Shape::sDrawSubmergedVolumes)}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ cw\ =\ mBaseOffset\ +\ c;}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ dw\ =\ mBaseOffset\ +\ d;}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ ew\ =\ mBaseOffset\ +\ e;}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ fw\ =\ mBaseOffset\ +\ f;}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDebugRenderer_a8b92e7678965c488b8d68230816aa000}{DebugRenderer::sInstance}}-\/>\mbox{\hyperlink{classDebugRenderer_afc6b62590e5a26de8cbd98a29bf8b1a3}{DrawTriangle}}(cw,\ ew,\ dw,\ Color::sGreen);}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDebugRenderer_a8b92e7678965c488b8d68230816aa000}{DebugRenderer::sInstance}}-\/>\mbox{\hyperlink{classDebugRenderer_afc6b62590e5a26de8cbd98a29bf8b1a3}{DrawTriangle}}(cw,\ fw,\ ew,\ Color::sGreen);}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDebugRenderer_a8b92e7678965c488b8d68230816aa000}{DebugRenderer::sInstance}}-\/>\mbox{\hyperlink{classDebugRenderer_a54813e4e95f78cdfc22d938ba15bcb8d}{DrawWireTriangle}}(cw,\ ew,\ dw,\ Color::sWhite);}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDebugRenderer_a8b92e7678965c488b8d68230816aa000}{DebugRenderer::sInstance}}-\/>\mbox{\hyperlink{classDebugRenderer_a54813e4e95f78cdfc22d938ba15bcb8d}{DrawWireTriangle}}(cw,\ fw,\ ew,\ Color::sWhite);}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00093\ \textcolor{preprocessor}{\ \ \ \ \#endif\ }\textcolor{comment}{//\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ pick\ point\ c\ as\ reference\ (which\ is\ on\ the\ cut\ off\ surface)}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ leaves\ us\ with\ three\ tetrahedrons\ to\ sum\ up\ (any\ faces\ that\ are\ in\ the\ same\ plane\ as\ c\ will\ have\ zero\ volume)}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ center1,\ center2,\ center3;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ volume1,\ volume2,\ volume3;}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ sTetrahedronVolume4(e,\ f,\ inV2,\ c,\ volume1,\ center1);}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ sTetrahedronVolume4(e,\ inV1,\ d,\ c,\ volume2,\ center2);}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ sTetrahedronVolume4(e,\ inV2,\ inV1,\ c,\ volume3,\ center3);}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Tally\ up\ the\ totals}}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ outVolumeTimes6\ =\ volume1\ +\ volume2\ +\ volume3;}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ outCenterTimes4\ =\ outVolumeTimes6\ >\ 0.0f?\ (volume1\ *\ center1\ +\ volume2\ *\ center2\ +\ volume3\ *\ center3)\ /\ outVolumeTimes6\ :\ \mbox{\hyperlink{classVec3_ad03c52ab27761bc1e64e33c47632ba51}{Vec3::sZero}}();}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{comment}{//\ Calculate\ submerged\ volume\ *\ 6\ and\ center\ of\ mass\ *\ 4\ for\ a\ tetrahedron\ with\ 3\ vertices\ submerged}}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{comment}{//\ inV1,\ inV2,\ inV3\ are\ submerged,\ inV4\ is\ not}}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{//\ inD1\ ..\ inD4\ are\ the\ distances\ from\ the\ points\ to\ the\ plane}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keyword}{inline}\ JPH\_IF\_NOT\_DEBUG\_RENDERER(\textcolor{keyword}{static})\ \textcolor{keywordtype}{void}\ sTetrahedronVolume3(\mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV1,\ \textcolor{keywordtype}{float}\ inD1,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV2,\ \textcolor{keywordtype}{float}\ inD2,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV3,\ \textcolor{keywordtype}{float}\ inD3,\ \mbox{\hyperlink{classVec3}{Vec3Arg}}\ inV4,\ \textcolor{keywordtype}{float}\ inD4,\ \textcolor{keywordtype}{float}\ \&outVolumeTimes6,\ \mbox{\hyperlink{classVec3}{Vec3}}\ \&outCenterTimes4)}
\DoxyCodeLine{00112\ \ \ \ \ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ A\ tetrahedron\ with\ 1\ point\ above\ the\ surface\ is\ cut\ along\ 3\ edges\ forming\ a\ new\ tetrahedron}}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ v1\ =\ sGetPlaneIntersection(inV1,\ inD1,\ inV4,\ inD4);}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ v2\ =\ sGetPlaneIntersection(inV2,\ inD2,\ inV4,\ inD4);}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ v3\ =\ sGetPlaneIntersection(inV3,\ inD3,\ inV4,\ inD4);}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Draw\ intersection\ between\ tetrahedron\ and\ surface}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Shape::sDrawSubmergedVolumes)}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ v1w\ =\ mBaseOffset\ +\ v1;}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ v2w\ =\ mBaseOffset\ +\ v2;}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ v3w\ =\ mBaseOffset\ +\ v3;}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDebugRenderer_a8b92e7678965c488b8d68230816aa000}{DebugRenderer::sInstance}}-\/>\mbox{\hyperlink{classDebugRenderer_afc6b62590e5a26de8cbd98a29bf8b1a3}{DrawTriangle}}(v3w,\ v2w,\ v1w,\ Color::sGreen);}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classDebugRenderer_a8b92e7678965c488b8d68230816aa000}{DebugRenderer::sInstance}}-\/>\mbox{\hyperlink{classDebugRenderer_a54813e4e95f78cdfc22d938ba15bcb8d}{DrawWireTriangle}}(v3w,\ v2w,\ v1w,\ Color::sWhite);}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ \textcolor{preprocessor}{\ \ \ \ \#endif\ }\textcolor{comment}{//\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ dry\_center,\ total\_center;}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ dry\_volume,\ total\_volume;}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ first\ calculate\ the\ part\ that\ is\ above\ the\ surface}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ sTetrahedronVolume4(v1,\ v2,\ v3,\ inV4,\ dry\_volume,\ dry\_center);}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ total\ volume}}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ sTetrahedronVolume4(inV1,\ inV2,\ inV3,\ inV4,\ total\_volume,\ total\_center);}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ From\ this\ we\ can\ calculate\ the\ center\ and\ volume\ of\ the\ submerged\ part}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ outVolumeTimes6\ =\ max(total\_volume\ -\/\ dry\_volume,\ 0.0f);}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ outCenterTimes4\ =\ outVolumeTimes6\ >\ 0.0f?\ (total\_center\ *\ total\_volume\ -\/\ dry\_center\ *\ dry\_volume)\ /\ outVolumeTimes6\ :\ \mbox{\hyperlink{classVec3_ad03c52ab27761bc1e64e33c47632ba51}{Vec3::sZero}}();}
\DoxyCodeLine{00143\ \ \ \ \ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point}{Point}}}
\DoxyCodeLine{00148\ \ \ \ \ \{}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_aec79909846ca6d2021c468a724fa872a}{mAboveSurface}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00153\ \ \ \ \ \};}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00162\ \textcolor{preprocessor}{\#ifdef\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00164\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_ada801e6ae7e301c2f9b5e42abfcf18e4}{PolyhedronSubmergedVolumeCalculator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classMat44}{Mat44}}\ \&inTransform,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classVec3}{Vec3}}\ *inPoints,\ \textcolor{keywordtype}{int}\ inPointStride,\ \textcolor{keywordtype}{int}\ inNumPoints,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPlane}{Plane}}\ \&inSurface,\ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point}{Point}}\ *ioBuffer}
\DoxyCodeLine{00166\ \#ifdef\ JPH\_DEBUG\_RENDERER\ \textcolor{comment}{//\ Not\ using\ JPH\_IF\_DEBUG\_RENDERER\ for\ Doxygen}}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ ,\ \mbox{\hyperlink{classVec3}{RVec3}}\ inBaseOffset}
\DoxyCodeLine{00168\ \#endif\ \textcolor{comment}{//\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ )\ :}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ mPoints(ioBuffer)}
\DoxyCodeLine{00171\ \#ifdef\ JPH\_DEBUG\_RENDERER}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ ,\ mBaseOffset(inBaseOffset)}
\DoxyCodeLine{00173\ \#endif\ \textcolor{comment}{//\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00174\ \ \ \ \ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Convert\ the\ points\ to\ world\ space\ and\ determine\ the\ distance\ to\ the\ surface}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ reference\_dist\ =\ FLT\_MAX;}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ p\ =\ 0;\ p\ <\ inNumPoints;\ ++p)}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ values}}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ transformed\_point\ =\ inTransform\ *\ *\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{classVec3}{Vec3}}\ *\textcolor{keyword}{>}(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }uint8\ *\textcolor{keyword}{>}(inPoints)\ +\ p\ *\ inPointStride);}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ dist\ =\ inSurface.\mbox{\hyperlink{classPlane_a96f5ba7b329fcccd22eaa63a7e282605}{SignedDistance}}(transformed\_point);}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ above\ =\ dist\ >=\ 0.0f;}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Keep\ track\ if\ all\ are\ above\ or\ below}}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ mAllAbove\ \&=\ above;}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ mAllBelow\ \&=\ !above;}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ lowest\ point,\ we\ use\ this\ to\ create\ tetrahedrons\ out\ of\ all\ faces}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (reference\_dist\ >\ dist)}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mReferencePointIdx\ =\ p;}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reference\_dist\ =\ dist;}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Store\ values}}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ ioBuffer-\/>mPosition\ =\ transformed\_point;}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ ioBuffer-\/>mDistanceToSurface\ =\ dist;}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ ioBuffer-\/>mAboveSurface\ =\ above;}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ ++ioBuffer;}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00201\ \ \ \ \ \}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_afd8348d65dfed4f7eb40ee92eb74742a}{AreAllAbove}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00205\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ mAllAbove;}
\DoxyCodeLine{00207\ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_aac9438428e9b0508fbac276161acae83}{AreAllBelow}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00211\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ mAllBelow;}
\DoxyCodeLine{00213\ \ \ \ \ \}}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_af52627bf533a56d1b951f32030010eeb}{GetReferencePointIdx}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00217\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ mReferencePointIdx;}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_a2174180424e99b757f2eb63969557afc}{AddFace}}(\textcolor{keywordtype}{int}\ inIdx1,\ \textcolor{keywordtype}{int}\ inIdx2,\ \textcolor{keywordtype}{int}\ inIdx3)}
\DoxyCodeLine{00223\ \ \ \ \ \{}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ JPH\_ASSERT(inIdx1\ !=\ mReferencePointIdx\ \&\&\ inIdx2\ !=\ mReferencePointIdx\ \&\&\ inIdx3\ !=\ mReferencePointIdx,\ \textcolor{stringliteral}{"{}A\ face\ using\ the\ reference\ point\ will\ not\ contribute\ to\ the\ volume"{}});}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Find\ the\ points}}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point}{Point}}\ \&ref\ =\ mPoints[mReferencePointIdx];}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point}{Point}}\ \&p1\ =\ mPoints[inIdx1];}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point}{Point}}\ \&p2\ =\ mPoints[inIdx2];}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point}{Point}}\ \&p3\ =\ mPoints[inIdx3];}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Determine\ which\ vertices\ are\ submerged}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ uint\ code\ =\ (p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_aec79909846ca6d2021c468a724fa872a}{mAboveSurface}}?\ 0\ :\ 0b001)\ |\ (p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_aec79909846ca6d2021c468a724fa872a}{mAboveSurface}}?\ 0\ :\ 0b010)\ |\ (p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_aec79909846ca6d2021c468a724fa872a}{mAboveSurface}}?\ 0\ :\ 0b100);}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ volume;}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ center;}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (code)}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0b000:}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ One\ point\ submerged}}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ sTetrahedronVolume1(ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ volume,\ center);}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0b001:}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Two\ points\ submerged}}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ sTetrahedronVolume2(ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ volume,\ center);}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0b010:}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Two\ points\ submerged}}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ sTetrahedronVolume2(ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ volume,\ center);}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0b100:}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Two\ points\ submerged}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ sTetrahedronVolume2(ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ volume,\ center);}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0b011:}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Three\ points\ submerged}}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ sTetrahedronVolume3(ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ volume,\ center);}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0b101:}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Three\ points\ submerged}}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ sTetrahedronVolume3(ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ volume,\ center);}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0b110:}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Three\ points\ submerged}}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ sTetrahedronVolume3(ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_ae11b26a886ee27b6f818cf1685d151d2}{mDistanceToSurface}},\ volume,\ center);}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0b111:}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Four\ points\ submerged}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ sTetrahedronVolume4(ref.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p3.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p2.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ p1.\mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_1_1Point_a7d4332e216b4c207019734c00663b754}{mPosition}},\ volume,\ center);}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Should\ not\ be\ possible}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ JPH\_ASSERT(\textcolor{keyword}{false});}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ volume\ =\ 0.0f;}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ center\ =\ \mbox{\hyperlink{classVec3_ad03c52ab27761bc1e64e33c47632ba51}{Vec3::sZero}}();}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ mSubmergedVolume\ +=\ volume;}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ mCenterOfBuoyancy\ +=\ volume\ *\ center;}
\DoxyCodeLine{00289\ \ \ \ \ \}}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classPolyhedronSubmergedVolumeCalculator_a5a1c107b68d02c02bde9493400549faf}{GetResult}}(\textcolor{keywordtype}{float}\ \&outSubmergedVolume,\ \mbox{\hyperlink{classVec3}{Vec3}}\ \&outCenterOfBuoyancy)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00293\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ outCenterOfBuoyancy\ =\ mSubmergedVolume\ >\ 0.0f?\ mCenterOfBuoyancy\ /\ (4.0f\ *\ mSubmergedVolume)\ :\ \mbox{\hyperlink{classVec3_ad03c52ab27761bc1e64e33c47632ba51}{Vec3::sZero}}();\ \textcolor{comment}{//\ Do\ this\ before\ dividing\ submerged\ volume\ by\ 6\ to\ get\ correct\ weight\ factor}}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ outSubmergedVolume\ =\ mSubmergedVolume\ /\ 6.0f;}
\DoxyCodeLine{00296\ \ \ \ \ \}}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{comment}{//\ The\ precalculated\ points\ for\ this\ polyhedron}}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keyword}{const}\ Point\ *\ \ \ \ \ \ \ mPoints;}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{comment}{//\ If\ all\ points\ are\ above/below\ the\ surface}}
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mAllBelow\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mAllAbove\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{comment}{//\ The\ lowest\ point}}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mReferencePointIdx\ =\ 0;}
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ \ \ \ \ \textcolor{comment}{//\ Aggregator\ for\ submerged\ volume\ and\ center\ of\ buoyancy}}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mSubmergedVolume\ =\ 0.0f;}
\DoxyCodeLine{00311\ \ \ \ \ \mbox{\hyperlink{classVec3}{Vec3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mCenterOfBuoyancy\ =\ \mbox{\hyperlink{classVec3_ad03c52ab27761bc1e64e33c47632ba51}{Vec3::sZero}}();}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ \textcolor{preprocessor}{\#ifdef\ JPH\_DEBUG\_RENDERER}}
\DoxyCodeLine{00314\ \ \ \ \ \textcolor{comment}{//\ Base\ offset\ used\ for\ drawing}}
\DoxyCodeLine{00315\ \ \ \ \ \mbox{\hyperlink{classVec3}{RVec3}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ mBaseOffset;}
\DoxyCodeLine{00316\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00317\ \};}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00319\ JPH\_NAMESPACE\_END}

\end{DoxyCode}
