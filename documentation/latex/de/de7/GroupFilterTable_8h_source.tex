\doxysection{Group\+Filter\+Table.\+h}
\hypertarget{GroupFilterTable_8h_source}{}\label{GroupFilterTable_8h_source}\index{includes/jolt/Physics/Collision/GroupFilterTable.h@{includes/jolt/Physics/Collision/GroupFilterTable.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Jolt\ Physics\ Library\ (https://github.com/jrouwe/JoltPhysics)}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ SPDX-\/FileCopyrightText:\ 2021\ Jorrit\ Rouwe}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ SPDX-\/License-\/Identifier:\ MIT}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Collision/GroupFilter.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <Jolt/Physics/Collision/CollisionGroup.h>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ JPH\_NAMESPACE\_BEGIN}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{class\ }JPH\_EXPORT\ \mbox{\hyperlink{classGroupFilterTable}{GroupFilterTable}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classGroupFilter}{GroupFilter}}}
\DoxyCodeLine{00036\ \{}
\DoxyCodeLine{00037\ \ \ \ \ JPH\_DECLARE\_SERIALIZABLE\_VIRTUAL(JPH\_EXPORT,\ \mbox{\hyperlink{classGroupFilterTable}{GroupFilterTable}})}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{using\ }GroupID\ =\ CollisionGroup::GroupID;}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{using\ }SubGroupID\ =\ CollisionGroup::SubGroupID;}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetBit(SubGroupID\ inSubGroup1,\ SubGroupID\ inSubGroup2)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00045\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ JPH\_ASSERT(inSubGroup1\ !=\ inSubGroup2);}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ store\ the\ lower\ left\ half\ only,\ so\ swap\ the\ inputs\ when\ trying\ to\ access\ the\ top\ right\ half}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inSubGroup1\ >\ inSubGroup2)}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ swap(inSubGroup1,\ inSubGroup2);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ JPH\_ASSERT(inSubGroup2\ <\ mNumSubGroups);}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ at\ which\ bit\ the\ entry\ for\ this\ pair\ resides}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ use\ the\ fact\ that\ a\ row\ always\ starts\ at\ inSubGroup2\ *\ (inSubGroup2\ -\/\ 1)\ /\ 2}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (this\ is\ the\ amount\ of\ bits\ needed\ to\ store\ a\ table\ of\ inSubGroup2\ entries)}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (inSubGroup2\ *\ (inSubGroup2\ -\/\ 1))\ /\ 2\ +\ inSubGroup1;}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{explicit}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGroupFilterTable_ace82879585ebeb7f322700733349fa37}{GroupFilterTable}}(uint\ inNumSubGroups\ =\ 0)\ :}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ mNumSubGroups(inNumSubGroups)}
\DoxyCodeLine{00064\ \ \ \ \ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ By\ default\ everything\ collides}}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ table\_size\ =\ ((inNumSubGroups\ *\ (inNumSubGroups\ -\/\ 1))\ /\ 2\ +\ 7)\ /\ 8;}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ mTable.resize(table\_size,\ 0xff);}
\DoxyCodeLine{00068\ \ \ \ \ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGroupFilterTable_a91ed666a7043cd932da78adce8e8920e}{GroupFilterTable}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classGroupFilterTable}{GroupFilterTable}}\ \&inRHS)\ :\ mNumSubGroups(inRHS.mNumSubGroups),\ mTable(inRHS.mTable)\ \{\ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGroupFilterTable_a21f49a18fb98bbd35151022505fe275f}{DisableCollision}}(SubGroupID\ inSubGroup1,\ SubGroupID\ inSubGroup2)}
\DoxyCodeLine{00075\ \ \ \ \ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit\ =\ GetBit(inSubGroup1,\ inSubGroup2);}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ mTable[bit\ >>\ 3]\ \&=\ (0xff\ \string^\ (1\ <<\ (bit\ \&\ 0b111)));}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGroupFilterTable_a6b25689191afbfdb272feb4e57df4035}{EnableCollision}}(SubGroupID\ inSubGroup1,\ SubGroupID\ inSubGroup2)}
\DoxyCodeLine{00082\ \ \ \ \ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit\ =\ GetBit(inSubGroup1,\ inSubGroup2);}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ mTable[bit\ >>\ 3]\ |=\ 1\ <<\ (bit\ \&\ 0b111);}
\DoxyCodeLine{00085\ \ \ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGroupFilterTable_acfa23ff8483cdeec0926623ebb9dd8f3}{IsCollisionEnabled}}(SubGroupID\ inSubGroup1,\ SubGroupID\ inSubGroup2)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00089\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Test\ if\ the\ bit\ is\ set\ for\ this\ group\ pair}}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bit\ =\ GetBit(inSubGroup1,\ inSubGroup2);}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (mTable[bit\ >>\ 3]\ \&\ (1\ <<\ (bit\ \&\ 0b111)))\ !=\ 0;}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGroupFilterTable_a9a654e5e8db25dc647563a10a47d3ab4}{CanCollide}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classCollisionGroup}{CollisionGroup}}\ \&inGroup1,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classCollisionGroup}{CollisionGroup}}\ \&inGroup2)\textcolor{keyword}{\ const\ override}}
\DoxyCodeLine{00097\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ one\ of\ the\ groups\ is\ cInvalidGroup\ the\ objects\ will\ collide\ (note\ that\ the\ if\ following\ this\ if\ will\ ensure\ that\ group2\ is\ not\ cInvalidGroup)}}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inGroup1.GetGroupID()\ ==\ CollisionGroup::cInvalidGroup)}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ objects\ are\ in\ different\ groups,\ they\ collide}}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inGroup1.GetGroupID()\ !=\ inGroup2.GetGroupID())}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ collision\ filters\ do\ not\ match,\ but\ they're\ in\ the\ same\ group\ we\ ignore\ the\ collision}}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inGroup1.\mbox{\hyperlink{classCollisionGroup_abcda9f0cd8d5d8b2ee42bee0a19430a7}{GetGroupFilter}}()\ !=\ inGroup2.\mbox{\hyperlink{classCollisionGroup_abcda9f0cd8d5d8b2ee42bee0a19430a7}{GetGroupFilter}}())}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ they\ are\ in\ the\ same\ sub\ group,\ they\ don't\ collide}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (inGroup1.GetSubGroupID()\ ==\ inGroup2.GetSubGroupID())}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ the\ bit\ table}}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ IsCollisionEnabled(inGroup1.GetSubGroupID(),\ inGroup2.GetSubGroupID());}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{comment}{//\ See:\ GroupFilter::SaveBinaryState}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGroupFilterTable_ad84f52910c5b5e06ef42b285db07b4b1}{SaveBinaryState}}(\mbox{\hyperlink{classStreamOut}{StreamOut}}\ \&inStream)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{comment}{//\ See:\ GroupFilter::RestoreBinaryState}}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classGroupFilterTable_ae9911a6178119640940efa2c9706d69c}{RestoreBinaryState}}(\mbox{\hyperlink{classStreamIn}{StreamIn}}\ \&inStream)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00126\ \ \ \ \ uint\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mNumSubGroups;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00127\ \ \ \ \ Array<uint8>\ \ \ \ \ \ \ \ \ \ \ \ mTable;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00128\ \};}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ JPH\_NAMESPACE\_END}

\end{DoxyCode}
